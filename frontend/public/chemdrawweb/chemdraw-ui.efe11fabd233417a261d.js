"use strict";(self.webpackChunkperkinelmer=self.webpackChunkperkinelmer||[]).push([[399],{70730:(e,t,n)=>{n.d(t,{KK:()=>r,cy:()=>i,Nc:()=>a,SS:()=>s});var o=n(67294),r=o.createContext({});function i(){return o.useContext(r)}function a(){return i().instanceHub}function s(e){return a().configurationManager.isFeatureEnabled(e)}},77614:(e,t,n)=>{n.d(t,{_:()=>a,Z:()=>s});var o=n(40200),r=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},i=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function a(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:try{n=o.a.HELMUnregisteredMonomerFinder.findUnregisteredMonomersInHELMString(e)}catch(e){return[2]}return[4,c(n,t)];case 1:return l(r.sent()),[2]}}))}))}function s(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,c(o.a.HELMUnregisteredMonomerFinder.findUnregisteredMonomersInDocument(e),t)];case 1:return(n=r.sent()).length>0&&(l(n),o.a.HELMUnregisteredMonomerFinder.removeRegisteredMonomersFromDocument(e)),[2]}}))}))}function c(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return e.length?[4,Promise.all(e.map((function(e){return t.findMonomer(e)})))]:[2,[]];case 1:return[2,n.sent().filter(Boolean)]}}))}))}function l(e){for(var t,n=0,r=e;n<r.length;n++){var i=r[n],a=null!==(t=i.sourceLibrary)&&void 0!==t?t:"Unknown";o.a.ApplicationServices.loadMonomers(a,[i])}}},12329:(e,t,n)=>{n.r(t),n.d(t,{ChemdrawWeb:()=>Ra,initialize:()=>Ha}),n(4244),n(17878),n(52298),n(46081),n(67523),n(28660),n(57147);var o=n(68949),r=n(40200);const i=new(function(){function e(){this._activeInstanceHub=null,this.instanceHubs=new WeakMap}return Object.defineProperty(e.prototype,"activeInstanceHub",{get:function(){return this._activeInstanceHub},set:function(e){e&&r.a.CDDocument.setActiveDocument(e.chemDraw.cdDoc),this._activeInstanceHub=e},enumerable:!1,configurable:!0}),e.prototype.setInstanceHub=function(e,t){this.instanceHubs.set(e.view,t)},e.prototype.getInstanceHub=function(e){return this.instanceHubs.get(e.view)},e}());function a(e,t){var n=i.activeInstanceHub,o=n.chemistryService,r=n.progressIndicatorController;r.show(),o.nameToStructure(e).then((function(e){r.hide(),t&&(t.handleFulfilled(e),t.delete())})).catch((function(e){r.hide(),t&&(t.handleRejected(e.message),t.delete())}))}function s(e,t){i.activeInstanceHub.chemistryService.structureToName(e).then((function(e){t&&(t.handleFulfilled(e),t.delete())})).catch((function(e){t&&(t.handleRejected(e.message),t.delete())}))}var c=!1;function l(e){return t=this,n=void 0,r=function(){return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:c=!0,t.label=1;case 1:return t.trys.push([1,,4,5]),e?[4,e()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:return c=!1,[7];case 5:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}c((r=r.apply(t,n||[])).next())}));var t,n,o,r}var u,d=r.a.AlertDisplayService.extend("AlertDisplayService",{preventAlert:!1,DisplayAlert:function(e){return c||this.preventAlert?r.a.AlertResult.PrimaryButton.value:e.buttons.size()>1?confirm(e.message)?r.a.AlertResult.PrimaryButton.value:r.a.AlertResult.SecondaryButton.value:(alert(e.message),r.a.AlertResult.PrimaryButton.value)}}),h=n(79742),p=n(86700),f="Text",m="CDXML",g="ChemDraw Interchange Format",y="MDLCT",b="MDLSK",v="SMILES",w={InstanceHub:Symbol("InstanceHub"),ChemDrawCoreWrapper:Symbol("ChemDrawCoreWrapper"),ToolLibrary:Symbol("ToolLibrary"),FileDropEventSource:Symbol("FileDropEventSource"),MouseEventSource:Symbol("MouseEventSource"),KeyEventSource:Symbol("KeyEventSource"),ClipboardManager:Symbol("ClipboardManager"),CommandLibrary:Symbol("CommandLibrary"),ProgressIndicatorController:Symbol("ProgressIndicatorController"),MessagePresenterController:Symbol("MessagePresenterController"),DialogContainerController:Symbol("DialogContainerController"),ChemistryService:Symbol("ChemistryService"),EventPanelController:Symbol("EventPanelController"),TextEditorController:Symbol("TextEditorController"),ToolbarController:Symbol("ToolbarController"),LicenseManager:Symbol("LicenseManager"),ConfigurationManager:Symbol("ConfigurationManager"),DocumentStyleManager:Symbol("DocumentStyleManager"),ChemDrawWebLoader:Symbol("ChemDrawWebLoader"),CoreConfigurator:Symbol("CoreConfigurator"),EventEmitter:Symbol("EventEmitter"),MonomerService:Symbol("MonomerService"),CanvasTooltipContent:Symbol("CanvasTooltipContent"),PersistenceManager:Symbol("PersistenceManager")},C=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),S="!!cancelled!!",E=function(e){function t(){var n=e.call(this,S)||this;return Object.setPrototypeOf(n,t.prototype),n}return C(t,e),t.isCancelledError=function(e){return e instanceof t||e instanceof Error&&e.message===S},t}(Error),D=function(){function e(){}return e.prototype.initialize=function(e){this.eventEmitter=e.get(w.EventEmitter),this.configurationManager=e.get(w.ConfigurationManager),this.chemDraw=e.get(w.ChemDrawCoreWrapper),this.commandLibrary=e.get(w.CommandLibrary),this.toolLibrary=e.get(w.ToolLibrary),this.fileDropEventSource=e.get(w.FileDropEventSource),this.mouseEventSource=e.get(w.MouseEventSource),this.keyEventSource=e.get(w.KeyEventSource),this.clipboardManager=e.get(w.ClipboardManager),this.progressIndicatorController=e.get(w.ProgressIndicatorController),this.messagePresenterController=e.get(w.MessagePresenterController),this.dialogContainerController=e.get(w.DialogContainerController),this.chemistryService=e.get(w.ChemistryService),this.monomerService=e.get(w.MonomerService),this.eventPanelController=e.get(w.EventPanelController),this.textEditorController=e.get(w.TextEditorController),this.toolbarContainerController=e.get(w.ToolbarController),this.canvasTooltipContent=e.get(w.CanvasTooltipContent),this.persistenceManager=e.get(w.PersistenceManager),this.licenseManager=e.get(w.LicenseManager),this.documentStyleManager=e.get(w.DocumentStyleManager),this.chemDrawWebLoader=e.get(w.ChemDrawWebLoader),this.coreConfigurator=e.get(w.CoreConfigurator),this.monomerService=e.get(w.MonomerService)},e.prototype.dispose=function(){i.activeInstanceHub===this&&(i.activeInstanceHub=null),this.eventEmitter&&this.eventEmitter.emit("dispose"),this.chemDraw&&(this.chemDraw.cdDoc.delete(),this.chemDraw.trackingSession&&this.chemDraw.trackingSession.delete()),this.chemDraw=null,this.commandLibrary=null,this.toolLibrary=null,this.mouseEventSource=null,this.keyEventSource=null,this.fileDropEventSource=null,this.clipboardManager=null,this.progressIndicatorController=null,this.messagePresenterController=null,this.dialogContainerController=null,this.chemistryService=null,this.monomerService=null,this.eventPanelController=null,this.textEditorController=null,this.toolbarContainerController=null,this.persistenceManager=null,this.canvasTooltipContent=null,this.licenseManager=null,this.configurationManager=null,this.documentStyleManager=null,this.chemDrawWebLoader=null,this.coreConfigurator=null,this.eventEmitter=null},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)()],e)}(),T=n(77614),P=n(94184),x=n.n(P),O=n(67294),A=n(35005),M=n(50847),_=O.createContext({onClose:function(){},onCancel:function(){}}),k=n(98764),L=function(){return(L=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},I=function(e){var t=e.onKeyDown,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["onKeyDown"]),o=(0,O.useState)(null),r=o[0],i=o[1],a=(0,O.useCallback)((function(e){e.stopPropagation()}),[]);return O.createElement("div",{className:"modal-container",onKeyDown:t,onMouseDown:a,ref:i},r&&O.createElement(k.Z,L({},n,{className:n.className?n.className:"cdd-font",container:r})))},R=function(e){var t=e.children,n=e.className;return n||(n="cdd-dialog-content cdd-align-center"),O.createElement(k.Z.Body,{className:n},t)},H=function(e){var t=e.children;return O.createElement(k.Z.Footer,{className:"cdd-dialog-button-panel"},t)},N=function(){return(N=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},F=function(e){var t=e.items,n=(0,O.useContext)(_),o=n.onCancel,r=n.onClose,i=(0,O.useState)(null),a=i[0],s=i[1],c=(0,O.useCallback)((function(e){s(e)}),[]),l=(0,O.useCallback)((function(){r(t[a])}),[t,r,a]),u=(0,O.useCallback)((function(e){l(),e.preventDefault()}),[l]),d=(0,O.useCallback)((function(e){"Enter"===e.key&&null!==a&&l()}),[a]);return O.createElement(I,{dialogClassName:"cdd-paste-dialog",onHide:o,show:!0},O.createElement(M.Z,{onSubmit:u},O.createElement(R,{className:"cdd-align-left"},O.createElement(M.Z.Label,null,"Paste as:"),O.createElement("div",{className:"cdd-paste-dialog-items-container",onKeyDown:d},t.map((function(e,t){return O.createElement(j,N({},e,{key:t,selected:a===t,onSelected:c.bind(void 0,t)}))})))),O.createElement(H,null,O.createElement(A.Z,{bsPrefix:"cdd-button",disabled:null===a,type:"submit",variant:"ok"},"Paste"),O.createElement(A.Z,{bsPrefix:"cdd-button",onClick:o,variant:"cancel"},"Cancel"))))},j=function(e){var t=e.name,n=e.onSelected,o=e.selected,r=e.svg,i=(0,O.useCallback)((function(e){" "!==e.key||o||n()}),[o]);return O.createElement("div",{className:x()("cdd-paste-dialog-item",{"cdd-paste-dialog-item-selected":o}),onClick:n,onKeyDown:i,role:"button",tabIndex:0,"aria-label":t},O.createElement("div",{className:"cdd-paste-dialog-item-preview"},O.createElement("img",{src:"data:image/svg+xml;utf8,"+encodeURIComponent(r),alt:"Preview for "+t})),O.createElement("div",{className:"cdd-paste-dialog-item-label"},O.createElement("span",null,t)))};function W(e){var t=e.instanceHub,n=e.items;return t.dialogContainerController.showAsync(O.createElement(F,{items:n}))}var B=function(){function e(){var t=this;this.get=function(e){return t.storage.getItem(t.addPrefix(e))},this.set=function(e,n){t.storage.setItem(t.addPrefix(e),n)},this.remove=function(e){t.storage.removeItem(t.addPrefix(e))},this.removeAll=function(e){for(var n=t.storage.length-1;n>=0;n--){var o=t.storage.key(n);o.startsWith(t.addPrefix(e))&&t.storage.removeItem(o)}},this.addPrefix=function(t){return e.PREFIX+t},this.storage=window.localStorage}return e.PREFIX="cdd.",e}(),V=function(){var e=this;this.map=new Map,this.get=function(t){return e.map.get(t)},this.set=function(t,n){e.map.set(t,n)},this.remove=function(t){e.map.delete(t)},this.removeAll=function(t){e.map.forEach((function(n,o){o.startsWith(t)&&e.map.delete(o)}))}},U=function(e,t){var n=this;this.setString=function(e,t){var o=n.getObject();o[e]=t,n.setObject(o)},this.setNumber=function(e,t){var o=n.getObject();o[e]=t,n.setObject(o)},this.getString=function(e){return n.getObject()[e]},this.getNumber=function(e){return n.getObject()[e]},this.clear=function(){n.setObject({})},this.getObject=function(){var e,t=n.storage.get(n.storeKey);if(t&&""!==t)try{e=JSON.parse(t)}catch(e){}return void 0===e&&(e={}),e},this.setObject=function(e){n.storage.set(n.storeKey,JSON.stringify(e))},this.storage=e,this.storeKey=t},z=function(e,t){var n=this;this.map=new Map,this.setString=function(e,t){n.map.set(e,t)},this.setNumber=function(e,t){n.map.set(e,t)},this.getString=function(e){return n.map.get(e)},this.getNumber=function(e){return n.map.get(e)},this.clear=function(){n.map.clear()},this.setObject=function(e){throw new Error("Method not implemented.")}},G=function(){function e(){}return e.createObjectStore=function(t){return e.isLocalStorageSupported()?new U(new B,t):new z(new V,t)},e.isLocalStorageSupported=function(){return e.checkStorageSupport("localStorage")},e.checkStorageSupport=function(e){var t="_cdd_dummy_";try{return window[e].setItem(t,t),window[e].removeItem(t),!0}catch(e){return!1}},e}(),Z=function(){function e(){}return e.prototype.createLocalStorage=function(){return G.isLocalStorageSupported()?new B:new V},e.INSTANCE=new e,e}(),K=function(e){var t=e.className,n=e.closeButton,o=e.title;return t||(t="cdd-dialog-title"),O.createElement(k.Z.Header,{className:t,closeButton:n},O.createElement("div",{className:"cdd-dialog-title-content"},o))},X=n(70730),q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Y=function(e){function t(t){var n=e.call(this,t)||this;return n.hide=n.hide.bind(n),n}return q(t,e),t.prototype.hide=function(){this.context.instanceHub.dialogContainerController.hide()},t}(O.Component);Y.contextType=X.KK;var J,Q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$=function(e){function t(t){var n=e.call(this,t)||this;return n.onAllow=function(e){n.hideAllFirstDialog(),Se.allowExtension(n.context.instanceHub,!0),e.stopPropagation()},n.onDeny=function(e){n.hideAllFirstDialog(),Se.allowExtension(n.context.instanceHub,!1),e.stopPropagation()},n.hideFirstTimeDialog=function(){window.removeEventListener("cdd_clipboard_first_dialog_state",n.hideFirstTimeDialog),n.props.onClose(),n.hide()},n.hideAllFirstDialog=function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("cdd_clipboard_first_dialog_state",!0,!1,null),window.dispatchEvent(e)},window.addEventListener("cdd_clipboard_first_dialog_state",n.hideFirstTimeDialog),n}return Q(t,e),t.prototype.render=function(){return O.createElement(I,{show:!0,onHide:function(){}},O.createElement(K,{title:"Allow access to clipboard?"}),O.createElement(R,{className:"cdd-dialog-content"},O.createElement("p",null,"ChemDraw will load an extension to access your system's clipboard. This is needed to support extended copy and paste functionality from desktop ChemDraw."),O.createElement("p",null,"Do you want to allow this?")),O.createElement(H,null,O.createElement(A.Z,{onClick:this.onAllow,bsPrefix:"cdd-button",variant:"ok"},"Allow"),O.createElement(A.Z,{onClick:this.onDeny,bsPrefix:"cdd-button",variant:"danger"},"Deny")))},t}(Y),ee=n(43631),te=n(91695),ne=(0,ee.qY)(),oe=function(){function e(){}return e.isWindows=function(){var e,t;return null!==(t=null===(e=null==ne?void 0:ne.os)||void 0===e?void 0:e.startsWith("Windows"))&&void 0!==t&&t},e.isMac=function(){var e;return null!==(e="Mac OS"==(null==ne?void 0:ne.os))&&void 0!==e&&e},e.isAndroid=function(){var e;return null!==(e="Android OS"==(null==ne?void 0:ne.os))&&void 0!==e&&e},e.isChrome=function(){var e;return null!==(e="chrome"==(null==ne?void 0:ne.name))&&void 0!==e&&e},e.isFirefox=function(){var e;return null!==(e="firefox"==(null==ne?void 0:ne.name))&&void 0!==e&&e},e.isEdgeChromium=function(){var e;return null!==(e="edge-chromium"==(null==ne?void 0:ne.name))&&void 0!==e&&e},e.isIOS=function(){var e;return null!==(e="iOS"==(null==ne?void 0:ne.os))&&void 0!==e&&e},e.isMobile=function(){return e.isAndroid()||e.isIOS()},e.isSafari=function(){var e;return null!==(e="safari"==(null==ne?void 0:ne.name))&&void 0!==e&&e},e.getFirefoxVersion=function(){return e.isFirefox()&&(null==ne?void 0:ne.version)?te.G.parse(ne.version):void 0},e}(),re=n(57246);!function(e){e[e.INFO=0]="INFO",e[e.WARN=1]="WARN",e[e.ERROR=2]="ERROR"}(J||(J={}));var ie=function(){function e(){this.messageQueue=[],this.autoHideTimeout=5e3,this.filterMessage=function(e){return e}}return e.prototype.bind=function(e){this.presenter=e},e.prototype.error=function(e){this.pushMessage({level:J.ERROR,message:e})},e.prototype.warn=function(e){this.pushMessage({level:J.WARN,message:e})},e.prototype.info=function(e){this.pushMessage({level:J.INFO,message:e})},e.prototype.showMessages=function(e){this.pushMessage.apply(this,e)},e.prototype.hide=function(){this.doHide(),clearTimeout(this.timeHandler),this.timeHandler=void 0,this.showNextMessage()},e.prototype.pushMessage=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t&&t.length>0&&((e=this.messageQueue).push.apply(e,t),this.showNextMessage())},e.prototype.showNextMessage=function(){if(!this.timeHandler&&this.messageQueue.length>0){var e=this.messageQueue.shift();"function"==typeof this.filterMessage&&(e=this.filterMessage(e)),e?(this.doShow(e),this.startAutoHide()):this.showNextMessage()}},e.prototype.startAutoHide=function(){var e=this;this.timeHandler=setTimeout((function(){e.hide()}),this.autoHideTimeout)},e.prototype.doShow=function(e){this.presenter&&this.presenter.show(e.level,e.message)},e.prototype.doHide=function(){this.presenter&&this.presenter.hide()},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)()],e)}(),ae=function(){function e(e,t){this.message=e,this.response=t}return Object.defineProperty(e.prototype,"status",{get:function(){return this.response?this.response.status:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusText",{get:function(){return this.response?this.response.statusText:"Network Error"},enumerable:!1,configurable:!0}),e}(),se=new(function(){function e(){this.cache=new Map}return e.prototype.getWithCache=function(e){var t=this;if(this.cache.has(e)){var n=this.cache.get(e);return Promise.resolve(n)}return this.get(e).then((function(n){return t.cache.set(e,n),n}))},e.prototype.get=function(e){return this.fetch(e).then((function(e){return e.text()}))},e.prototype.fetch=function(e,t){return t=Object.assign({mode:"cors"},t),fetch(e,t).catch((function(e){throw new ae("Failed to load resource. Please check your network and service address.")})).then((function(e){if(e.ok)return e;throw new ae("Failed to load resource ("+e.status+": "+e.statusText+").",e)}))},e}()),ce="The version of clipboard extension is too old. Please click the clipboard icon below to update it.",le="After successful installation, the clipboard icon at the bottom left of the page will turn green.",ue="To enable extended copy and paste functionality, follow these steps:",de=function(){function e(){}return e.prototype.getName=function(){return Object.getPrototypeOf(this).constructor.name},e.prototype.setIconState=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("cdd_clipboard_icon_state",!0,!1,e),window.dispatchEvent(t)},e.prototype.checkNativeAppVersion=function(e,t){var n=te.G.parse(e);te.G.compareAsNumber(n.majorVersion,"2")<0&&Promise.reject("The version of clipboard native application is too old. Please click the clipboard icon below to update it.");var o=re.W.getVersionedUrl(re.W.join(re.W.basePath,t));return se.getWithCache(o).then((function(t){return new Promise((function(o){var r=te.G.parse(t);console.log("Installed native clipboard plugin version is "+e+", server version is "+t),n.compareTo(r)<0?o({level:J.INFO,message:"The clipboard native application has a new version. You can click the clipboard icon below to update it."}):o()}))})).catch((function(e){return console.log("Failed to get version from server, reason: "+e.message),new Promise((function(e){e()}))}))},e}(),he=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isInstalled=!1,t.needsNativeUpdate=!1,t.nativeAppVersionUrl="clipboard/installer/version.txt",t}return he(t,e),t.prototype.enabled=function(e){var t=this,n=function(){t.isInstalled=!1,r.a.ClipboardServiceWeb.getSharedService().extendedClipboardTypesSupported=!1,t.setIconState(!1)};return new Promise((function(o,i){if(t.needsNativeUpdate=!1,e){var a="Click the Enable Extended Clipboard button below if you want to enable extended copy and paste functionality.",s=setTimeout((function(){n(),i(a)}),500);t.checkExtension((function(e){clearTimeout(s),t.checkExtensionVersion(e.content).then((function(e){var s=[];e&&s.push(e),t.clipboardRequest({method:"getVersion"},(function(e){e.error?(n(),i(a)):t.checkNativeAppVersion(e.content,t.nativeAppVersionUrl).then((function(e){t.isInstalled=!0,r.a.ClipboardServiceWeb.getSharedService().extendedClipboardTypesSupported=!0,t.setIconState(!0),e&&(t.needsNativeUpdate=!0,s.push(e)),o(s)})).catch((function(e){n(),i(e)}))}))})).catch((function(e){n(),i(e)}))}))}else n(),o()}))},t.prototype.canPaste=function(e){return this.isInstalled},t.prototype.canCopy=function(e){return this.isInstalled},t.prototype.copy=function(e,t,n){var o=this;if(function(e){return!!Object.keys(e).length}(t)){var r={method:"set",data:t};this.clipboardRequest(r,(function(e){n({name:o.getName(),success:!!e.content,error:e.error})}))}else n({name:this.getName(),success:!0,error:void 0})},t.prototype.paste=function(e,t,n){var o=this,r={method:"getBatch",formats:t.formats};this.clipboardRequest(r,(function(e){var t={name:o.getName(),success:!1,error:"Can not access Clipboard.",responseData:{}};if(e.content){var r=void 0;try{r=JSON.parse(e.content)}catch(e){}if(r){for(var i in r)r.hasOwnProperty(i)&&(t.responseData[i]=r[i]);t.success=!0}else t.success=!1,t.error="No available data can paste from Clipboard."}else t.success=!1,e.error?t.error=e.error:t.error="No available data can paste from Clipboard.";n(t)}))},t.prototype.clipboardRequest=function(e,t){var n=function(e){window.removeEventListener("cdd_clipboard_response",n),t&&t.call(window,e.detail)};window.addEventListener("cdd_clipboard_response",n);var o=document.createEvent("CustomEvent");o.initCustomEvent("cdd_clipboard_request",!0,!1,e),window.dispatchEvent(o)},t.prototype.checkExtension=function(e){var t=function(n){window.removeEventListener("cdd_clipboard_extension_response",t),e&&e.call(window,n.detail)};window.addEventListener("cdd_clipboard_extension_response",t);var n=document.createEvent("CustomEvent");n.initCustomEvent("cdd_clipboard_extension_request",!0,!1,{method:"getVersion"}),window.dispatchEvent(n),setTimeout((function(){window.removeEventListener("cdd_clipboard_extension_response",t)}),500)},t.prototype.getInstruction=function(){return this.needsNativeUpdate?Le.generateUpdateContents({installerPath:this.getInstallerPath()}):this.isInstalled?Le.generateInstallContents():this.getInstallInstruction()},t.prototype.checkExtensionVersion=function(e){return t=this,n=void 0,r=function(){return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){return[2]}))},new((o=void 0)||(o=Promise))((function(e,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}c((r=r.apply(t,n||[])).next())}));var t,n,o,r},t.prototype.getInstallerPath=function(){return oe.isWindows()?re.W.getVersionedUrl(re.W.join(re.W.basePath,"clipboard/installer/ChemDraw Web Clipboard.exe")):oe.isMac()?re.W.getVersionedUrl(re.W.join(re.W.basePath,"clipboard/installer/ChemDraw Web Clipboard.pkg")):"about:blank"},t.prototype.getInstallInstruction=function(){return Le.generateChromeInstruction({installerPath:this.getInstallerPath()})},t}(de),fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fe(t,e),t.prototype.getInstallInstruction=function(){return Le.generateEdgeInstruction({installerPath:this.getInstallerPath()})},t}(pe),ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.needsExtensionUpdate=!1,t}return ge(t,e),t.prototype.getInstruction=function(){var e=re.W.getVersionedUrl(re.W.join(re.W.basePath,"clipboard/firefox/chemdraw_web_clipboard.xpi"));return this.needsExtensionUpdate||this.needsNativeUpdate?Le.generateUpdateContents({installerPath:this.needsNativeUpdate?this.getInstallerPath():void 0,extensionPath:this.needsExtensionUpdate?e:void 0}):this.isInstalled?Le.generateInstallContents():Le.generateFirefoxInstruction({installerPath:this.getInstallerPath(),extensionPath:e})},t.prototype.checkExtensionVersion=function(e){var t=this;this.needsExtensionUpdate=!1;var n=te.G.parse(e);if(te.G.compareAsNumber(n.majorVersion,"2")<0)return new Promise((function(e,t){t(ce)}));var o=re.W.getVersionedUrl(re.W.join(re.W.basePath,"clipboard/firefox/version.txt"));return se.getWithCache(o).then((function(e){return new Promise((function(o,r){var i=te.G.parse(e);if(te.G.compareAsNumber(n.majorVersion,i.majorVersion)<0)t.needsExtensionUpdate=!0,r(ce);else if(n.compareTo(i)<0){t.needsExtensionUpdate=!0;var a=J.INFO;te.G.compareAsNumber(n.minorVersion,i.minorVersion)<0&&(a=J.WARN),o({level:a,message:"The clipboard extension has a new version. You can click the clipboard icon below to update it."})}else o()}))})).catch((function(e){return console.log("Failed to get version from server. Reason: "+e.statusText+"."),new Promise((function(e,t){e()}))}))},t}(pe),be=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ve=function(e){function t(){var t=e.call(this)||this;return t.nativeAppVersionUrl="clipboard/safari/version.txt",t}return be(t,e),t.prototype.getInstallInstruction=function(){return Le.generateSafariInstruction({installerPath:this.getInstallerPath()})},t.prototype.getInstallerPath=function(){return re.W.getVersionedUrl(re.W.join(re.W.basePath,"clipboard/safari/ChemDraw Web Clipboard (Safari).dmg"))},t}(pe),we=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return we(t,e),t.prototype.enabled=function(e){throw new Error("Not Supported.")},t.prototype.canPaste=function(e){try{return this.canCopy(e)}catch(e){return!1}},t.prototype.canCopy=function(e){try{var t=e?e.clipboardData:void 0;return void 0===t&&(t=window.clipboardData),!!t}catch(e){throw new Error("The action can not be completed in short time, please try again.")}},t.prototype.copy=function(e,t,n){var o={name:this.getName(),success:!1,error:void 0},r=e?e.clipboardData:void 0;if(void 0===r&&(r=window.clipboardData),r){var i=t.Text;i?(r.setData(f,i),o.success=!0):o.success=!1}n(o)},t.prototype.paste=function(e,t,n){var o={name:this.getName(),success:!1,error:void 0,responseData:{}};try{var r=e?e.clipboardData:void 0;if(void 0===r&&(r=window.clipboardData),r){var i=r.getData("text");i?(o.responseData.Text=i,o.success=!0):o.success=!1}}catch(e){o.success=!1,o.error=e.message}n(o)},t.prototype.getInstruction=function(){throw new Error("Not Supported.")},t.prototype.checkExtensionVersion=function(e){throw Error("Not Supported.")},t}(de);const Se=new(function(){function e(){if(this.textClipboard=new Ce,this.clipboardLocalStorage=Z.INSTANCE.createLocalStorage(),oe.isWindows()||oe.isMac())if(oe.isEdgeChromium())this.extendedClipboard=new me;else if(oe.isChrome())this.extendedClipboard=new pe;else if(oe.isFirefox()){var e=oe.getFirefoxVersion();e&&e.greaterThanOrEqualTo(te.G.parse("50"))&&(this.extendedClipboard=new ye)}else oe.isSafari()&&(this.extendedClipboard=new ve)}return e.prototype.checkPermissions=function(e){var t;if(this.canExecuteExtension(e)){var n=this.getClipboardPermission();if("yes"===n)this.enableExtension(e,!0);else{if("no"!==n)return void e.dialogContainerController.showAsync(Le.generateClipboardFirstTimeChoice((function(){})),{dialogType:"system"}).catch();null===(t=this.extendedClipboard)||void 0===t||t.enabled(!1).catch()}}},e.prototype.getClipboardPermission=function(){return this.clipboardLocalStorage.get(e.STORE_NAME)},e.prototype.registerClipboardStorageChangedListener=function(t){var n=this;if(this.canExecuteExtension(t)){var o=function(o){o.key&&o.key.includes(e.STORE_NAME)&&o.newValue!==o.oldValue&&(n.canExecuteExtension(t)&&n.enableExtension(t,"yes"===o.newValue),t.chemDraw&&t.dialogContainerController&&t.dialogContainerController.isDialogType($)&&t.dialogContainerController.hide())};window.addEventListener("storage",o),t.eventEmitter.on("dispose",(function(){window.removeEventListener("storage",o)}))}},e.prototype.extensionIsAllowed=function(){return"yes"===this.getClipboardPermission()},e.prototype.allowExtension=function(t,n){this.clipboardLocalStorage.set(e.STORE_NAME,n?"yes":"no"),this.canExecuteExtension(t)&&this.enableExtension(t,n)},e.prototype.enableExtension=function(e,t){var n=this;this.canExecuteExtension(e)&&setTimeout((function(){var o;null===(o=n.extendedClipboard)||void 0===o||o.enabled(t).then((function(t){e.progressIndicatorController&&e.progressIndicatorController.hide(),t&&e.messagePresenterController&&e.messagePresenterController.showMessages(t)})).catch((function(t){e.progressIndicatorController&&e.progressIndicatorController.hide(),t&&e.messagePresenterController&&e.messagePresenterController.error(t)}))}),0)},e.prototype.canExecuteExtension=function(e){return void 0!==this.extendedClipboard&&e.clipboardManager.clipboardEventSource.isEnabled()},e.STORE_NAME="clipboard.permission",e}());var Ee=function(e){var t=e.installerPath;return O.createElement("div",null,O.createElement(K,{closeButton:!0,title:ue}),O.createElement(R,null,O.createElement("ul",{className:"cdd-dialog-list"},O.createElement("li",null,"Download and install"," ",O.createElement("a",{className:"cdd-link",href:t,target:"_blank",rel:"noreferrer"},"ChemDraw Web Clipboard"),"."),O.createElement("li",null,"Install the extension from the"," ",O.createElement("a",{className:"cdd-link",href:"https://chrome.google.com/webstore/detail/chemdraw-direct-clipboard/amdbbknpahfhdafplabjenapaacedach",target:"_blank",rel:"noreferrer"},"Chrome web store"),"."),O.createElement("li",null,O.createElement("a",{className:"cdd-link",href:"#",onClick:function(){return window.location.reload()}},"Refresh")," ","this page.")),O.createElement("div",null,le)),O.createElement("hr",{className:"thin"}))},De=function(){return O.createElement(K,{closeButton:!0,title:"Extended copy and paste is disabled"})},Te=function(e){var t=e.installerPath;return O.createElement("div",null,O.createElement(K,{closeButton:!0,title:ue}),O.createElement(R,null,O.createElement("ul",{className:"cdd-dialog-list"},O.createElement("li",null,"Download and install"," ",O.createElement("a",{className:"cdd-link",href:t,target:"_blank",rel:"noreferrer"},"ChemDraw Web Clipboard"),"."),O.createElement("li",null,"Install the extension from the"," ",O.createElement("a",{className:"cdd-link",href:"https://chrome.google.com/webstore/detail/chemdraw-direct-clipboard/amdbbknpahfhdafplabjenapaacedach",target:"_blank",rel:"noreferrer"},"Chrome web store"),'. You must enable "Allow extensions from other stores" in Edge for extended copy and paste to work properly.'),O.createElement("li",null,O.createElement("a",{className:"cdd-link",href:"#",onClick:function(){return window.location.reload()}},"Refresh")," ","this page.")),O.createElement("div",null,le)),O.createElement("hr",{className:"thin"}))},Pe=function(e){var t=e.installerPath,n=e.extensionPath;return O.createElement("div",null,O.createElement(K,{closeButton:!0,title:ue}),O.createElement(R,null,O.createElement("ul",{className:"cdd-dialog-list"},O.createElement("li",null,"Download and install"," ",O.createElement("a",{className:"cdd-link",href:t,target:"_blank",rel:"noreferrer"},"ChemDraw Web Clipboard"),"."),O.createElement("li",null,O.createElement("a",{className:"cdd-link",href:n},"Click here")," ","to install the extension."),O.createElement("li",null,O.createElement("a",{className:"cdd-link",href:"#",onClick:function(){return window.location.reload()}},"Refresh")," ","this page.")),O.createElement("div",null,le)),O.createElement("hr",{className:"thin"}))},xe=function(){return O.createElement(K,{closeButton:!0,title:"Extended copy and paste is activated"})},Oe=function(){var e="";return oe.isMobile()&&(e=" on mobile devices"),O.createElement("div",null,O.createElement(K,{closeButton:!0,title:"Extended copy and paste is not supported"+e}))},Ae=function(e){var t=e.installerPath;return O.createElement("div",null,O.createElement(K,{closeButton:!0,title:ue}),O.createElement(R,null,O.createElement("ul",{className:"cdd-dialog-list"},O.createElement("li",null,"Download and install"," ",O.createElement("a",{className:"cdd-link",href:t,target:"_blank",rel:"noreferrer"},"ChemDraw Web Clipboard"),"."),O.createElement("li",null,"Run ChemDraw Web Clipboard and follow the instructions to enable the Safari extension."),O.createElement("li",null,O.createElement("a",{className:"cdd-link",href:"#",onClick:function(){return window.location.reload()}},"Refresh")," ","this page.")),O.createElement("div",null,le)),O.createElement("hr",{className:"thin"}))},Me=function(e){var t=e.installerPath,n=e.extensionPath;return O.createElement("div",null,O.createElement(K,{closeButton:!0,title:"To update the ChemDraw Web Clipboard, follow these steps:"}),O.createElement(R,null,O.createElement("ul",{className:"cdd-dialog-list"},t&&O.createElement("li",null,O.createElement("a",{className:"cdd-link",href:t,target:"_blank",rel:"noreferrer"},"Click here")," ","to update the ChemDraw Web Clipboard application."),n&&O.createElement("li",null,O.createElement("a",{className:"cdd-link",href:n},"Click here")," ","to update the extension."),O.createElement("li",null,O.createElement("a",{className:"cdd-link",href:"#",onClick:function(){return window.location.reload()}},"Refresh")," ","this page."))),O.createElement("hr",{className:"thin"}))},_e=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onOK=function(e){t.hide(),e.stopPropagation()},t}return _e(t,e),t.prototype.render=function(){return O.createElement(I,{show:!0,onHide:this.hide,dialogClassName:"cdd-dialog-guide"},O.createElement(K,{className:"cdd-align-center",title:"These actions are unavailable via the tool. Instead, use:"}),O.createElement(R,null,O.createElement("div",{className:"cdd-dialog-guide-text-container cdd-dialog-guide-text-container-bold"},O.createElement("span",null,"Ctrl+C"),O.createElement("span",null,"Ctrl+X"),O.createElement("span",null,"Ctrl+V")),O.createElement("hr",null),O.createElement("div",{className:"cdd-dialog-guide-text-container"},O.createElement("span",null,"to copy"),O.createElement("span",null,"to cut"),O.createElement("span",null,"to paste"))),O.createElement(H,null,O.createElement(A.Z,{onClick:this.onOK,bsPrefix:"cdd-button",variant:"cancel"},"OK")))},t}(Y),Le=function(){function e(){}return e.generatePasteButtonGuide=function(){return O.createElement(ke,null)},e.generateClipboardFirstTimeChoice=function(e){return O.createElement($,{onClose:e})},e.generateInstallContents=function(){return O.createElement(xe,null)},e.generateUpdateContents=function(e){return O.createElement(Me,{installerPath:e.installerPath,extensionPath:e.extensionPath})},e.generateSafariInstruction=function(e){return O.createElement(Ae,{installerPath:e.installerPath})},e.generateChromeInstruction=function(e){return O.createElement(Ee,{installerPath:e.installerPath})},e.generateFirefoxInstruction=function(e){return O.createElement(Pe,{installerPath:e.installerPath,extensionPath:e.extensionPath})},e.generateEdgeInstruction=function(e){return O.createElement(Te,{installerPath:e.installerPath})},e.generateClipboardInstructionContents=function(){return Se.extendedClipboard?Se.extensionIsAllowed()?Se.extendedClipboard.getInstruction():O.createElement(De,null):O.createElement(Oe,null)},e}(),Ie=function(){function e(e){this.configurationManager=e,this.hideTextAreaForClipboard=document.createElement("textarea"),this.hideTextAreaForClipboard.style.position="fixed",this.hideTextAreaForClipboard.style.top="50%",this.hideTextAreaForClipboard.style.opacity="0",this.hideTextAreaForClipboard.style.zIndex="0",this.hideTextAreaForClipboard.style.cursor="inherit",this.hideTextAreaForClipboard.style.width="0px",this.hideTextAreaForClipboard.style.height="0px",this.hideTextAreaForClipboard.textContent="Hide Text Area For Clipboard"}return e.prototype.registerOnElement=function(e){var t=this;return e.appendChild(this.hideTextAreaForClipboard),function(){e.removeChild(t.hideTextAreaForClipboard)}},e.prototype.addTextCopyListener=function(e){this.hideTextAreaForClipboard.addEventListener("copy",e),this.hideTextAreaForClipboard.addEventListener("cut",e)},e.prototype.addPasteListener=function(e){this.hideTextAreaForClipboard.addEventListener("paste",e)},e.prototype.setActive=function(){this.hideTextAreaForClipboard.focus(),this.hideTextAreaForClipboard.setSelectionRange(0,1)},e.prototype.copyResultCallback=function(e,t){return function(n){n.success?e():t({message:n.error})}},e.prototype.textCopy=function(e,t){var n=this;return new Promise((function(o,r){Se.textClipboard.canCopy(t)?Se.textClipboard.copy(t,e,n.copyResultCallback(o,r)):r({message:"No Clipboard can handle Copy action."}),t.preventDefault()}))},e.prototype.extendedCopy=function(e){var t=this;return new Promise((function(n,o){var r;Se.extendedClipboard&&Se.extendedClipboard.canCopy(void 0)&&(r=Se.extendedClipboard),r?r.copy(void 0,e,t.copyResultCallback(n,o)):n()}))},e.prototype.paste=function(e,t){var n=this;return new Promise((function(o,r){var i=[];i.push(n.promisePaste(Se.textClipboard,e,t)),n.canExecuteExtension()&&Se.extendedClipboard&&i.push(n.promisePaste(Se.extendedClipboard,e,t)),Promise.all(i).then((function(e){var t=e[0],n=e[1];t.isAvailable&&n&&n.isAvailable?0!==Object.keys(n.responseData).length?o({message:n.message,responseData:Object.assign({},t.responseData,n.responseData)}):0!==Object.keys(t.responseData).length?o({message:n.message+" Text is pasted instead.",responseData:Object.assign({},t.responseData,n.responseData)}):n.message?r({message:n.message}):t.message?r({message:t.message}):o({responseData:{}}):t.isAvailable?0!==Object.keys(t.responseData).length?o({responseData:t.responseData}):t.message?r({message:t.message}):o({responseData:{}}):n&&n.isAvailable?0!==Object.keys(n.responseData).length?o({responseData:n.responseData}):n.message?r({message:n.message}):o({responseData:{}}):r({guide:Le.generatePasteButtonGuide()})})),t&&t.preventDefault()}))},e.prototype.canExecuteExtension=function(){return this.isEnabled()&&void 0!==Se.extendedClipboard&&Se.extendedClipboard.canCopy(void 0)&&Se.extendedClipboard.canPaste(void 0)},e.prototype.isEnabled=function(){return this.configurationManager.isFeatureEnabled("ExtendedCopyPaste")},e.prototype.promisePaste=function(e,t,n){return new Promise((function(o){e&&e.canPaste(n)?e.paste(n,t,(function(e){o({message:e.success?void 0:e.error,responseData:e.responseData,isAvailable:!0})})):o({isAvailable:!1,responseData:{}})}))},e}(),Re=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},He=function(e,t){return function(n,o){t(n,o,e)}},Ne=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Fe=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},je=function(){function e(e,n){var o=this;this.instanceHub=e,this.monomerService=n,this.copyAction=null,this.callback=null,this.busy=!1,this.haveCheckedPermissions=!1,this.clipboardEventSource=new Ie(e.configurationManager),this.clipboardEventSource.addTextCopyListener((function(e){var n;o.clipboardEvent=e,t.currentInstance=o.instanceHub.clipboardManager;var r=null!==(n=o.copyAction)&&void 0!==n?n:e.type;o.copyAction=null,o.instanceHub.chemDraw.handleCommand(r),o.instanceHub.chemDraw.processChange()})),this.clipboardEventSource.addPasteListener((function(e){t.currentInstance=o.instanceHub.clipboardManager,o.executePaste(e)}))}var t;return t=e,e.prototype.checkPermissions=function(){this.haveCheckedPermissions||(this.instanceHub.chemDraw.isViewOnly?Se.allowExtension(this.instanceHub,Se.extensionIsAllowed()):Se.checkPermissions(this.instanceHub),this.haveCheckedPermissions=!0)},e.prototype.setClipboardActive=function(){this.clipboardEventSource.setActive()},e.prototype.setCallback=function(e){this.callback=e},e.prototype.executeCopy=function(e,t){var n=this;this.executeTask((function(){return Ne(n,void 0,void 0,(function(){return Fe(this,(function(n){switch(n.label){case 0:return[4,this.clipboardEventSource.textCopy(e,this.clipboardEvent)];case 1:return n.sent(),this.clipboardEventSource.canExecuteExtension()?[4,this.clipboardEventSource.extendedCopy(t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}))},e.prototype.executePaste=function(e){var t=this;this.instanceHub.chemDraw.isViewOnly||this.executeTask((function(){return Ne(t,void 0,void 0,(function(){var t,n,o;return Fe(this,(function(r){switch(r.label){case 0:return[4,this.clipboardEventSource.paste({formats:[f,m,g,y,b,v]},e)];case 1:return t=r.sent(),n=t.responseData,o=t.message,n&&Object.keys(n).length?[4,this.handlePasteResponseData(n)]:[3,4];case 2:return r.sent(),[4,T.Z(this.instanceHub.chemDraw.cdDoc,this.monomerService)];case 3:r.sent(),r.label=4;case 4:return o&&this.instanceHub.messagePresenterController&&this.instanceHub.messagePresenterController.warn(o),[2]}}))}))}))},e.prototype.executeTask=function(e){var t=this;this.busy||(this.busy=!0,this.instanceHub.progressIndicatorController.show(),e().then((function(){return Ne(t,void 0,void 0,(function(){return Fe(this,(function(e){return this.instanceHub.progressIndicatorController.hide(),this.callback&&(this.callback(),this.callback=null),[2]}))}))})).catch((function(e){t.instanceHub.progressIndicatorController.hide(),E.isCancelledError(e)||(e.message&&t.instanceHub.messagePresenterController&&t.instanceHub.messagePresenterController.error(e.message),t.instanceHub.dialogContainerController&&t.instanceHub.dialogContainerController.show(e.guide))})).finally((function(){t.busy=!1})))},e.prototype.handlePasteResponseData=function(e){return Ne(this,void 0,void 0,(function(){var t,n,o,i,a,s,c,l,u,d;return Fe(this,(function(p){switch(p.label){case 0:return(t=r.a.ClipboardServiceWeb.getSharedService()).clear(),1!==(n=Object.keys(e)).length||n[0]!==f||this.instanceHub.textEditorController.getTextEditor().isEditing?[3,2]:[4,this.pastePlainText(e.Text)];case 1:return p.sent(),[3,3];case 2:for(o=0,i=n;o<i.length;o++)switch(a=i[o],s=e[a],a){case f:t.setTextDataForType(s,r.a.ClipboardDataType.TextPlain);break;case m:t.setTextDataForType(s,r.a.ClipboardDataType.ChemicalCDXML);break;default:(c=Ze(a))&&(l=h.toByteArray(s),t.setBinaryDataForType(l,c))}p.label=3;case 3:u=r.a.AlertDisplayService.getSharedService().preventAlert;try{r.a.AlertDisplayService.getSharedService().preventAlert=!0,d=r.a.getCommandIDForName("paste"),r.a.handleCommand(d,this.instanceHub.chemDraw.cdDoc),r.a.SelectionAPI.moveToCenter(this.instanceHub.chemDraw.cdDoc)}finally{r.a.AlertDisplayService.getSharedService().preventAlert=u}return this.instanceHub.chemDraw.processChange(),[2]}}))}))},e.prototype.pastePlainText=function(e){return Ne(this,void 0,void 0,(function(){var t,n,o,i;return Fe(this,(function(a){switch(a.label){case 0:return t=r.a.ClipboardServiceWeb.getSharedService(),function(e){return new RegExp("<cdxml[\\s\\S]*</cdxml>","gim").test(e)}(e)?(t.setTextDataForType(e,r.a.ClipboardDataType.ChemicalCDXML),[2]):function(e){return e.startsWith("InChI=")}(e)?(t.setTextDataForType(e,r.a.ClipboardDataType.TextPlain),[2]):[4,this.generatePossibleTypesForText(e)];case 1:return 1!==(n=a.sent()).length?[3,2]:(t.setTextDataForType(n[0].cdxml,r.a.ClipboardDataType.ChemicalCDXML),[2]);case 2:if(!(n.length>1))return[3,6];a.label=3;case 3:return a.trys.push([3,,5,6]),this.instanceHub.progressIndicatorController.hide(),[4,W({instanceHub:this.instanceHub,items:n})];case 4:return o=a.sent().cdxml,t.setTextDataForType(o,r.a.ClipboardDataType.ChemicalCDXML),[2];case 5:return this.instanceHub.progressIndicatorController.show(),[7];case 6:return a.trys.push([6,8,,9]),[4,T._(e,this.monomerService)];case 7:return a.sent(),[3,9];case 8:return i=a.sent(),console.error("Unexpected error adding monomers",i),[3,9];case 9:return t.setTextDataForType(e,r.a.ClipboardDataType.TextPlain),[2]}}))}))},e.prototype.generatePossibleTypesForText=function(e){return Ne(this,void 0,void 0,(function(){var t,n,o,i,a;return Fe(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.nameToCDXML(e),We(e,this.instanceHub.chemDraw.cdDoc),Be(e,this.instanceHub.chemDraw.cdDoc),Ve(e,this.instanceHub.chemDraw.cdDoc),Ue(e,this.instanceHub.chemDraw.cdDoc)])];case 1:if(t=s.sent(),(n=t.filter((function(e){return e.cdxml.length>0}))).length>1)for(o=0,i=n;o<i.length;o++)(a=i[o]).svg=r.a.FormatConverter.cdxmlToSVG(a.cdxml);return[2,n]}}))}))},e.prototype.nameToCDXML=function(e){return Ne(this,void 0,void 0,(function(){var t,n;return Fe(this,(function(o){switch(o.label){case 0:if(t={name:"Chemical Name",cdxml:"",svg:""},!(e.length<=100))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.instanceHub.chemistryService.nameToStructure(e)];case 2:return n=o.sent(),t.cdxml=r.a.FormatConverter.applyDocumentSettingsToCDXML(n,this.instanceHub.chemDraw.cdDoc),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,t]}}))}))},t=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),He(0,(0,p.f3)(w.InstanceHub)),He(1,(0,p.f3)(w.MonomerService)),Re("design:paramtypes",[D,Object])],e)}();function We(e,t){return Ne(this,void 0,void 0,(function(){var n;return Fe(this,(function(o){n={name:"SMILES",cdxml:"",svg:""};try{n.cdxml=r.a.FormatConverter.smilesToCDXML(e,t)}catch(e){}return[2,n]}))}))}function Be(e,t){return Ne(this,void 0,void 0,(function(){var n;return Fe(this,(function(o){n={name:"FASTA Peptide",cdxml:"",svg:""};try{n.cdxml=r.a.FormatConverter.fastaPeptideToCDXML(e,t)}catch(e){}return[2,n]}))}))}function Ve(e,t){return Ne(this,void 0,void 0,(function(){var n;return Fe(this,(function(o){n={name:"FASTA DNA",cdxml:"",svg:""};try{n.cdxml=r.a.FormatConverter.fastaDNAToCDXML(e,t)}catch(e){}return[2,n]}))}))}function Ue(e,t){return Ne(this,void 0,void 0,(function(){var n;return Fe(this,(function(o){n={name:"FASTA RNA",cdxml:"",svg:""};try{n.cdxml=r.a.FormatConverter.fastaRNAToCDXML(e,t)}catch(e){}return[2,n]}))}))}var ze=[g,y,b,v,"SLNSTRING","PNG"],Ge=[r.a.ClipboardDataType.ChemicalCDX,r.a.ClipboardDataType.ChemicalMOL,r.a.ClipboardDataType.ChemicalSketch,r.a.ClipboardDataType.ChemicalSMILES,r.a.ClipboardDataType.ChemicalSLN,r.a.ClipboardDataType.ImagePNG];function Ze(e){return Ge[ze.indexOf(e)]}var Ke=r.a.ClipboardServiceWeb.extend("ClipboardServiceWeb",{transferDataForTypes:function(e){var t={},n={};e.forEach((function(e){switch(e){case r.a.ClipboardDataType.TextPlain:var o=r.a.ClipboardServiceWeb.getSharedService().getTextDataForType(e);o&&(t.Text=o,n.Text=o);break;case r.a.ClipboardDataType.ChemicalCDXML:var i=r.a.ClipboardServiceWeb.getSharedService().getTextDataForType(e);i&&(t.Text=i,n.CDXML=i);break;default:var a=function(e){return ze[Ge.indexOf(e)]}(e),s=r.a.ClipboardServiceWeb.getSharedService().getBinaryDataForType(e);if(a&&s){var c=h.fromByteArray(s);n[a]=c}}})),je.currentInstance&&je.currentInstance.executeCopy(t,n)}}),Xe=r.a.CursorService.extend("CursorService",{SetVisible:function(e){i.activeInstanceHub&&i.activeInstanceHub.eventPanelController&&i.activeInstanceHub.eventPanelController.setCursorVisible(e)},SetCursorByID:function(e){i.activeInstanceHub&&i.activeInstanceHub.eventPanelController&&i.activeInstanceHub.eventPanelController.setCursorByID(e)}}),qe=n(23789),Ye=function(){function e(){}return e.isNumber=function(e){return new RegExp("^-?[0-9]*[.]?[0-9]*$").test(e)},e}(),Je=function(e){var t=this;this.done=function(e){var n;t.instanceHub.chemDraw.processChange(),null===(n=t.instanceHub.mouseEventSource.handler)||void 0===n||n.refreshHighlight(e)},this.refresh=function(){t.done(!0)},this.instanceHub=i.getInstanceHub(e.getDocument())},Qe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$e=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:n.props.atomNumber+""},n}return Qe(t,e),t.prototype.render=function(){var e=this,t=function(t){var n=e.props.onValidate(e.state.value);n?e.setState({errorMessage:n}):(e.hide(),e.props.onSubmit(parseFloat(e.state.value))),t.preventDefault(),t.stopPropagation()},n=function(){e.hide(),e.props.onCancel()};return O.createElement(I,{show:!0,onHide:n,dialogClassName:"cdd-dialog-chain",onKeyDown:function(e){"Enter"===e.key&&t(e)}},O.createElement(R,{className:"cdd-dialog-content cdd-align-left"},O.createElement(et,{action:this.props.action,errorMessage:this.state.errorMessage,onChange:function(t){return e.setState({value:t})},value:this.state.value}),O.createElement("div",{className:"cdd-dialog-tip"},"To create another chain of the same length, hold down the "+(oe.isMac()?"Option":"Alt")+" key and click in the document window.")),O.createElement(H,null,O.createElement(A.Z,{onClick:t,bsPrefix:"cdd-button",variant:"ok"},this.props.action),O.createElement(A.Z,{onClick:n,bsPrefix:"cdd-button",variant:"cancel"},"Cancel")))},t}(Y),et=function(e){var t=e.action,n=e.errorMessage,o=e.onChange,r=e.value,i=O.useRef(null);(0,O.useEffect)((function(){var e=i.current;e.focus(),e.select()}),[n]);var a=(0,O.useCallback)((function(e){o(e.target.value)}),[o]);return O.createElement("div",{className:"form-inline"},O.createElement(M.Z.Group,{controlId:"chain-length"},O.createElement(M.Z.Label,{className:"inline"},t," a chain of "),O.createElement(M.Z.Control,{className:"cdd-dialog-input mx-1 text-right",type:"text",value:r,onChange:a,ref:i,isInvalid:!!n}),O.createElement(M.Z.Label,{className:"inline"}," carbon atoms"),O.createElement(M.Z.Control.Feedback,{className:"cdd-dialog-error-helpblock",type:"invalid"},n)))},tt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=function(e){function t(t){var n=e.call(this,t)||this;return n.presenter=t,n}return tt(t,e),t.prototype.show=function(){var e=this,t=this.instanceHub.dialogContainerController,n=this.presenter,o=O.createElement($e,{atomNumber:n.numberOfAtoms,action:n.actionButtonTitle,onSubmit:function(t){n.createChain(Math.floor(t+.4)),e.done(!0)},onCancel:this.refresh,onValidate:function(e){if(Ye.isNumber(e)){var t=parseFloat(e);return t?t>999||t<2?"The field value must be between 2 and 999.":"":"The field value is invalid."}return"The field value is invalid."}},null);t.show(o)},t}(Je),ot=function(){function e(e){this.presenter=e}return e.prototype.show=function(){confirm("There are errors in the selected structure. Do you want to continue?")?this.presenter.ignoreAll():this.presenter.stop()},e}(),rt=n(92977),it=function(){return(it=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function at(e,t){var n=(0,rt.Z)();return(0,O.useMemo)((function(){return function(e){var t=e.presenter,n=e.actions,o=e.onUpdate;return new Proxy(t,{get:function(e,r,i){var a=Reflect.get(e,r,i);return-1!==n.indexOf(r.toString())?function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=a.bind(t).apply(void 0,e);return o(),r}:a},set:function(e,t,n,r){var i=Reflect.set(e,t,n,r);return o(),i}})}(it({presenter:e,onUpdate:n},t))}),[e])}var st=function(e){var t=e.onChange,n=(0,O.useCallback)((function(e){t(e.target.selectedIndex)}),[t]);return O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(M.Z.Label,{className:"cdd-dialog-table-row-header",htmlFor:e.controlId},e.labelString),O.createElement(M.Z.Control,{as:"select",className:"cdd-dialog-table-row-data",disabled:e.disabled,id:e.controlId,onChange:n,value:e.value},e.optionStrings.map((function(e,t){return O.createElement("option",{key:t,value:t},e)}))))},ct=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lt=function(){return(lt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ut=function(e){var t=e.presenter,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["presenter"]),o=at(t,{actions:["updateWithDefaults"]});return O.createElement(dt,lt({},n,{presenter:o}))},dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onKeyDown=function(e){"Enter"===e.key?t.onSubmit():"Escape"===e.key&&t.onCancel()},t.onCancel=function(){t.hide(),t.props.refresh()},t.onSubmit=function(){t.props.presenter.applyAtomProperties(),t.hide(),t.props.refresh()},t.onDefaults=function(){t.props.presenter.updateWithDefaults()},t}return ct(t,e),t.prototype.render=function(){return O.createElement(I,{onHide:this.onCancel,show:!0,dialogClassName:"cdd-dialog-atom-properties",onKeyDown:this.onKeyDown},O.createElement(R,{className:"cdd-dialog-content"},O.createElement(ht,{presenter:this.props.presenter,showGenericLabels:this.props.showGenericLabels}),O.createElement(pt,{presenter:this.props.presenter}),O.createElement(ft,{presenter:this.props.presenter}),O.createElement(mt,{presenter:this.props.presenter})),O.createElement(H,null,O.createElement(A.Z,{onClick:this.onDefaults,bsPrefix:"cdd-button",variant:"defaults"},"Use Defaults"),O.createElement(A.Z,{onClick:this.onSubmit,bsPrefix:"cdd-button",variant:"ok"},"OK"),O.createElement(A.Z,{onClick:this.onCancel,bsPrefix:"cdd-button",variant:"cancel"},"Cancel")))},t}(Y),ht=function(e){var t=e.presenter;return e.showGenericLabels?O.createElement(st,{controlId:"cdd-generic-label-select",labelString:"Generic Label:",optionStrings:t.genericLabelOptionStrings,onChange:function(e){return t.genericLabel=e},value:t.genericLabel}):null},pt=function(e){var t=e.presenter,n=(0,O.useCallback)((function(e){isNaN(parseInt(e.target.value,10))?t.isotope=0:t.isotope=parseInt(e.target.value,10)}),[t]);return t.shouldShowSingleAtomProperties?O.createElement(O.Fragment,null,O.createElement(st,{controlId:"cdd-charge-select",labelString:"Charge:",optionStrings:t.chargeOptionStrings,onChange:function(e){return t.charge=e},value:t.charge}),O.createElement(st,{controlId:"cdd-radical-select",labelString:"Radical:",optionStrings:t.radicalOptionStrings,onChange:function(e){return t.radical=e},value:t.radical}),O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(M.Z.Label,{className:"cdd-dialog-table-row-header",htmlFor:"cdd-isotope-input"},"Isotope:"),O.createElement(M.Z.Control,{className:"cdd-dialog-table-row-data",id:"cdd-isotope-input",type:"text",onChange:n,value:t.isotope>0?t.isotope+"":""}))):null},ft=function(e){var t=e.presenter;if(!t.shouldShowQueryFeatureProperties)return null;var n=(0,O.useCallback)((function(e){isNaN(parseInt(e.target.value,10))?t.substituentCount=0:t.substituentCount=parseInt(e.target.value,10)}),[t]);return O.createElement(O.Fragment,null,O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(M.Z.Label,{className:"cdd-dialog-table-row-header",htmlFor:"cdd-substituents-select"},"Substituents:"),O.createElement("div",{className:"cdd-atom-dialog-substituents-row"},O.createElement(M.Z.Control,{as:"select",className:"cdd-atom-dialog-substituents-row-selection",id:"cdd-substituents-select",onChange:function(e){return t.substituents=e.target.selectedIndex},value:t.substituents+""},t.substituentOptionStrings.map((function(e,t){return O.createElement("option",{key:t,value:t},e)}))),O.createElement("div",{className:"cdd-atom-dialog-substituents-row-number-count"},O.createElement(M.Z.Control,{type:"number",disabled:!t.shouldEnableSubstituents,onChange:n,max:t.maxSubstituentsNumber,min:t.minSubstituentsNumber,value:t.substituentCount+"","data-testid":"substituents-count"})))),O.createElement(st,{controlId:"cdd-implicit-hydrogens-select",labelString:"Implicit Hydrogens:",optionStrings:t.implicitHydrogenOptionStrings,onChange:function(e){return t.implicitHydrogens=e},value:t.implicitHydrogens}),O.createElement(st,{controlId:"cdd-ring-bond-count-select",labelString:"Ring Bond Count:",optionStrings:t.ringBondCountOptionStrings,onChange:function(e){return t.ringBondCount=e},value:t.ringBondCount}),O.createElement(st,{controlId:"cdd-unsaturation-select",labelString:"Unsaturation:",optionStrings:t.unsaturationOptionStrings,onChange:function(e){return t.unsaturation=e},value:t.unsaturation}),O.createElement(st,{controlId:"cdd-reaction-change-select",labelString:"Reaction Change:",optionStrings:t.reactionChangeOptionStrings,onChange:function(e){return t.rxnChange=e},value:t.rxnChange}),O.createElement(st,{controlId:"cdd-reaction-stereo-select",labelString:"Reaction Stereo:",optionStrings:t.reactionStereoOptionStrings,onChange:function(e){return t.rxnStereo=e},value:t.rxnStereo}),O.createElement(st,{controlId:"cdd-translation-select",labelString:"Translation:",optionStrings:t.translationOptionStrings,onChange:function(e){return t.translation=e},value:t.translation}),O.createElement(st,{controlId:"cdd-isotopic-abundance-select",labelString:"Isotopic Abundance:",optionStrings:t.isotopicAbundanceOptionStrings,onChange:function(e){return t.abundance=e},value:t.abundance}),O.createElement(st,{controlId:"cdd-abnormal-valence-select",labelString:"Abnormal Valence:",optionStrings:t.abnormalValenceOptionStrings,onChange:function(e){return t.abValence=e},value:t.abValence}))},mt=function(e){var t=e.presenter;return t.shouldShowEnhancedStereoProperty?O.createElement(st,{controlId:"cdd-enabled-sterochemistry-select",labelString:"Enhanced Stereochemistry:",optionStrings:t.enhancedStereochemistryOptionStrings,onChange:function(e){return t.enhancedStereo=e},value:t.enhancedStereo}):null},gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yt=function(e){function t(t){var n=e.call(this,t)||this;return n.presenter=t,n}return gt(t,e),t.prototype.show=function(){var e=this.presenter,t=this.instanceHub.configurationManager.isFeatureEnabled("AtomPropertiesDialog.ShowGenericLabels"),n=O.createElement(ut,{presenter:e,showGenericLabels:t,refresh:this.refresh});this.instanceHub.dialogContainerController.show(n)},t}(Je),bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vt=function(){return(vt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},wt=function(e){var t=e.presenter,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["presenter"]),o=at(t,{actions:["updateWithDefaults"]});return O.createElement(Ct,vt({},n,{presenter:o}))},Ct=function(e){function t(t){var n=e.call(this,t)||this;return n.onKeyDown=function(e){"Enter"===e.key?n.onSubmit():"Escape"===e.key&&n.onCancel()},n.onDefaults=function(){n.props.presenter.updateWithDefaults()},n.onSubmit=function(){n.props.presenter.applyBondProperties(),n.hide(),n.props.refresh()},n.onCancel=function(){n.hide(),n.props.refresh()},n}return bt(t,e),t.prototype.render=function(){var e=this;return O.createElement(I,{show:!0,onHide:this.onCancel,dialogClassName:"cdd-dialog-bond-properties",onKeyDown:this.onKeyDown},O.createElement(R,{className:"cdd-dialog-content"},O.createElement(st,{controlId:"cdd-bond-type",labelString:"Bond Type:",key:"Bond Type:",value:this.props.presenter.selectedBondTypeItemIndex,optionStrings:this.props.presenter.bondTypeItemDisplayNames,onChange:function(t){return e.props.presenter.selectedBondTypeItemIndex=t}}),O.createElement(st,{controlId:"cdd-bond-topology",labelString:"Topology:",key:"Topology:",value:this.props.presenter.selectedTopologyItemIndex,optionStrings:this.props.presenter.topologyItemDisplayNames,onChange:function(t){return e.props.presenter.selectedTopologyItemIndex=t}}),O.createElement(st,{controlId:"cdd-bond-reaction-center",labelString:"Reaction Center:",key:"Reaction Center:",value:this.props.presenter.selectedReactionCenterItemIndex,optionStrings:this.props.presenter.reactionCenterItemDisplayNames,onChange:function(t){return e.props.presenter.selectedReactionCenterItemIndex=t}})),O.createElement(H,null,O.createElement(A.Z,{onClick:this.onDefaults,bsPrefix:"cdd-button",variant:"defaults"},"Use Defaults"),O.createElement(A.Z,{onClick:this.onSubmit,bsPrefix:"cdd-button",variant:"ok"},"OK"),O.createElement(A.Z,{onClick:this.onCancel,bsPrefix:"cdd-button",variant:"cancel"},"Cancel")))},t}(Y),St=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Et=function(e){function t(t){var n=e.call(this,t)||this;return n.presenter=t,n}return St(t,e),t.prototype.show=function(){var e=O.createElement(wt,{presenter:this.presenter,refresh:this.refresh});this.instanceHub.dialogContainerController.show(e)},t}(Je),Dt=n(93002),Tt=O.forwardRef((function(e,t){return O.createElement("div",null,O.createElement(M.Z.Label,{className:"cdd-dialog-table-row-header",htmlFor:e.controlId},e.label),O.createElement(M.Z.Control,{className:"cdd-dialog-table-row-data",id:e.controlId,ref:t,isInvalid:!!e.errorMessage,onChange:e.onChange,value:e.value}),!!e.errorMessage&&O.createElement(M.Z.Control.Feedback,{className:"cdd-dialog-error-helpblock",role:"alert",type:"invalid"},e.errorMessage))})),Pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xt=function(){return(xt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pt(t,e),t.prototype.render=function(){var e=this;return O.createElement(At,xt({},this.props,{show:!0,onClose:function(){e.hide(),e.props.refresh()}}))},t}(Y),At=function(e){var t=at(e.presenter,{actions:["updateWithDefaults"]});(0,O.useEffect)((function(){r(Mt(t))}),[t]);var n=(0,Dt.Z)(Mt(t)),o=n[0],r=n[1],i=(0,O.useState)(""),a=i[0],s=i[1],c=(0,O.useState)(""),l=c[0],u=c[1],d=function(){t.isOverrideVisible&&u(""),t.isOverrideRangeVisible&&s(""),function(e){var t,n=e.presenter,o=e.properties,r=e.onOverrideRangeLabelErrorMessage,i=e.onOverrideLabelErrorMessage,a=!0;if(n.isOrderVisible&&(""===(t=o.order)||Ye.isNumber(t)&&parseInt(t,10)>=0?n.order=o.order:a=!1),n.isRepeatCountVisible&&(function(e){return!!Ye.isNumber(e)&&parseInt(e,10)>=0}(o.repeatCount)?n.repeatCount=o.repeatCount:a=!1),n.isSRUVisible&&(n.sru=o.sru),n.isOverrideRangeVisible)try{n.molecularWeightOverrideRange=o.molecularWeightOverrideRange}catch(e){(s=qe.l.getException(e))&&r(s.message),a=!1}if(n.isOverrideVisible)try{n.molecularWeightOverride=o.molecularWeightOverride}catch(e){var s;(s=qe.l.getException(e))&&i(s.message),a=!1}return a}({presenter:t,properties:o,onOverrideLabelErrorMessage:u,onOverrideRangeLabelErrorMessage:s})&&(t.applyBracketProperties(),e.onClose())},h=function(){e.onClose()},p=(0,O.useRef)(null),f=(0,O.useRef)(null),m=(0,O.useRef)(null),g=(0,O.useRef)(null),y=(0,O.useRef)(null);return(0,O.useEffect)((function(){var e=function(e){e&&(e.select(),e.focus())};t.isOrderVisible?e(p.current):t.isRepeatCountVisible?e(f.current):t.isSRUVisible?e(m.current):t.isOverrideRangeVisible?e(g.current):t.isOverrideVisible&&e(y.current)}),[t,t.isOrderVisible,t.isRepeatCountVisible,t.isSRUVisible,t.isOverrideRangeVisible,t.isOverrideVisible]),O.createElement(I,{show:e.show,onHide:h,dialogClassName:"cdd-dialog-bracket-properties",onKeyDown:function(e){"Enter"===e.key?d():"Escape"===e.key&&h()}},O.createElement(R,{className:"cdd-dialog-content"},O.createElement(st,{controlId:"cdd-bracket-usage-select",labelString:"Bracket Usage:",key:"Bracket Usage:",onChange:function(e){return t.selectedUsageIndex=e},optionStrings:t.usageDisplayNames,value:t.selectedUsageIndex}),t.isOrderVisible&&O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(Tt,{ref:p,controlId:"cdd-order-input",label:"Order:",onChange:function(e){return r({order:e.target.value})},value:o.order})),t.isRepeatCountVisible&&O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(Tt,{ref:f,controlId:"cdd-repeat-count-input",label:"Repeat Count:",onChange:function(e){return r({repeatCount:e.target.value})},value:o.repeatCount})),t.isSRUVisible&&O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(Tt,{ref:m,controlId:"cdd-sru-label-input",label:"SRU Label:",onChange:function(e){return r({sru:e.target.value})},value:o.sru})),t.isOverrideRangeVisible&&O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(Tt,{ref:g,controlId:"cdd-label-input",label:"Label:",errorMessage:a,onChange:function(e){return r({molecularWeightOverrideRange:e.target.value})},value:o.molecularWeightOverrideRange})),t.isOverrideVisible&&O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(Tt,{ref:y,controlId:"cdd-mw-mn-input",label:"Mw or Mn:",errorMessage:l,onChange:function(e){return r({molecularWeightOverride:e.target.value})},value:o.molecularWeightOverride})),O.createElement(st,{controlId:"cdd-repeat-pattern-select",labelString:"Repeat Pattern:",disabled:!t.isRepeatPatternEnabled,key:"Repeat Pattern:",onChange:function(e){return t.selectedRepeatPatternIndex=e},optionStrings:t.repeatPatternDisplayNames,value:t.selectedRepeatPatternIndex}),O.createElement(st,{controlId:"cdd-flip-type-select",labelString:"Flip Type:",disabled:!t.isFlipTypeEnabled,key:"Flip Type:",onChange:function(e){return t.selectedFlipTypeIndex=e},optionStrings:t.flipTypeDisplayNames,value:t.selectedFlipTypeIndex})),O.createElement(H,null,O.createElement(A.Z,{onClick:function(){t.updateWithDefaults(),r(Mt(t))},bsPrefix:"cdd-button",variant:"defaults"},"Use Defaults"),O.createElement(A.Z,{onClick:d,bsPrefix:"cdd-button",variant:"ok"},"OK"),O.createElement(A.Z,{onClick:h,bsPrefix:"cdd-button",variant:"cancel"},"Cancel")))};function Mt(e){return{order:e.order,repeatCount:e.repeatCount,sru:e.sru,molecularWeightOverride:e.molecularWeightOverride,molecularWeightOverrideRange:e.molecularWeightOverrideRange}}var _t=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kt=function(e){function t(t){var n=e.call(this,t)||this;return n.presenter=t,n}return _t(t,e),t.prototype.show=function(){var e=this.presenter,t=O.createElement(Ot,{presenter:e,refresh:this.refresh});this.instanceHub.dialogContainerController.show(t)},t}(Je),Lt=n(89048),It=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rt=function(e){function t(t){var n=e.call(this,t)||this;return n.onLabelChanged=function(e){n.setState({label:e})},n.onSubmit=function(e){e.preventDefault(),n.hide(),n.props.onSubmit(n.state.label)},n.onCancel=function(){n.hide(),n.props.onCancel()},n.state={label:t.label},n}return It(t,e),t.prototype.render=function(){return O.createElement(I,{show:!0,onHide:this.onCancel,dialogClassName:"cdd-dialog-contract"},O.createElement(M.Z,{onSubmit:this.onSubmit},O.createElement(R,{className:"cdd-dialog-content cdd-align-left"},O.createElement(Ht,{label:this.state.label,onChange:this.onLabelChanged})),O.createElement(H,null,O.createElement(A.Z,{type:"submit",bsPrefix:"cdd-button",variant:"ok"},"OK"),O.createElement(A.Z,{onClick:this.onCancel,bsPrefix:"cdd-button",variant:"cancel"},"Cancel"))))},t}(Y),Ht=function(e){var t=e.label,n=e.onChange,o=(0,O.useRef)(null);(0,Lt.Z)((function(){var e=o.current;e.focus(),e.select()}));var r=(0,O.useCallback)((function(e){n(e.target.value)}),[n]);return O.createElement(M.Z.Group,{controlId:"cdd-contract-label-input"},O.createElement(M.Z.Label,null,"Enter atom label to contract to:"),O.createElement(M.Z.Control,{className:"cdd-dialog-input",onChange:r,type:"text",ref:o,value:t}))},Nt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ft=function(e){function t(t){var n=e.call(this,t)||this;return n.presenter=t,n}return Nt(t,e),t.prototype.show=function(){var e=this,t=this.presenter,n=O.createElement(Rt,{label:t.label,onSubmit:function(n){t.label=n;try{t.contract()}catch(e){console.warn(e)}e.done()},onCancel:function(){e.done()}},null);this.instanceHub.dialogContainerController.show(n)},t}(Je),jt=function(){function e(){}return e.prototype.show=function(){},e}(),Wt=n(57458),Bt=n.n(Wt),Vt=function(){function e(){}return e.isNullOrWhiteSpace=function(e){return void 0===e||/^ *$/.test(e)},e.fromByteArray=function(t){if("string"==typeof t)return t;var n=t,o=e.toByteString(n);return Bt().decode(o)},e.toUint8Array=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return n},e.toByteString=function(e){for(var t="",n=0;n<e.length;n+=16384){var o=e.slice(n,n+16384);t+=String.fromCharCode.apply(null,Array.from(o))}return t},e}(),Ut=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zt=function(e){function t(t){var n=e.call(this,t)||this;return n.bindInput=function(e){e&&(n.textInput=e)},n.onTextInputChanged=function(){n.setState({isSubmitDisabled:n.isSubmitDisabled()})},n.isSubmitDisabled=function(){return Vt.isNullOrWhiteSpace(n.textInput?n.textInput.value:n.props.structureName)},n.onSubmit=function(e){e.preventDefault(),n.hide();var t=n.textInput.value,o=n.checkBox.checked;n.props.onSubmit(t,o)},n.onCancel=function(){n.hide(),n.props.onCancel()},n.state={isSubmitDisabled:n.isSubmitDisabled()},n}return Ut(t,e),t.prototype.render=function(){var e=this;return O.createElement(I,{show:!0,onHide:this.onCancel,dialogClassName:"cdd-dialog-name-to-structure"},O.createElement(M.Z,{onSubmit:this.onSubmit},O.createElement(R,{className:"cdd-dialog-content cdd-align-left"},O.createElement(Gt,{ref:this.bindInput,onChange:this.onTextInputChanged,structureName:this.props.structureName}),O.createElement(M.Z.Check,{inline:!0,className:"cdd-dialog-input",id:"cdd-paste-below-check",label:"Paste name below structure",ref:function(t){e.checkBox=t},defaultChecked:this.props.pasteName})),O.createElement(H,null,O.createElement(A.Z,{type:"submit",bsPrefix:"cdd-button",variant:"ok",disabled:this.state.isSubmitDisabled},"OK"),O.createElement(A.Z,{onClick:this.onCancel,bsPrefix:"cdd-button",variant:"cancel"},"Cancel"))))},t}(Y),Gt=(0,O.forwardRef)((function(e,t){var n=e.onChange,o=e.structureName,r=(0,O.useRef)(null);return(0,Lt.Z)((function(){var e=r.current;e.focus(),e.select()})),(0,O.useImperativeHandle)(t,(function(){return r.current})),O.createElement(M.Z.Group,{controlId:"cdd-structure-name-input"},O.createElement(M.Z.Label,null,"Insert structure whose name is:"),O.createElement(M.Z.Control,{className:"cdd-dialog-input",type:"text",defaultValue:o,onChange:n,ref:r}))})),Zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kt=function(e){function t(t){var n=e.call(this,t)||this;return n.presenter=t,n}return Zt(t,e),t.prototype.show=function(){var e=this,t=this.presenter,n=O.createElement(zt,{structureName:t.structureName,pasteName:t.pasteName,onSubmit:function(n,o){t.structureName=n,t.pasteName=o;try{t.pasteNamedStructure()}catch(e){console.warn(e)}e.done()},onCancel:function(){e.done()}},null);this.instanceHub.dialogContainerController.show(n)},t}(Je),Xt=function(){function e(e){this.presenter=e,this.instanceHub=i.getInstanceHub(this.presenter.getDocument());var t=this.instanceHub.textEditorController;this.editor=t.getTextEditor()}return e.prototype.show=function(){this.setContentsToEditor(),this.setColor(),this.updateSizeAndPosition(),this.showEditor(),this.setSelectionToEditor(),this.setEventListener(),this.setEditorBoundsToPresenter()},e.prototype.setColor=function(){var e=this.editor.container.style,t=this.presenter.getDocument();e.backgroundColor=t.backgroundColor.getHexRGB()},e.prototype.updateSizeAndPosition=function(){var e=this.presenter,t=this.editor.container,n=t.style,o=t.getElementsByClassName("ql-container")[0];o.style.fontFamily=e.defaultFontFamily,o.style.fontSize=e.defaultFontSize*e.scale+"px",0===e.lineHeight?o.style.lineHeight="initial":o.style.lineHeight=e.lineHeight*e.scale+"px";var r=e.textObjectBounds;n.top=r.top-3+"px",n.left=r.left-3+"px",n.minWidth=e.minWidth*e.scale+6+"px",n.maxWidth=e.maxWidth*e.scale+6+"px"},e.prototype.setEditorBoundsToPresenter=function(){var e=this.presenter,t=this.editor.container,n=e.textObjectBounds;n.top-=3,n.left-=3,n.right=n.left+t.offsetWidth,n.bottom=n.top+t.offsetHeight,n.top-=1,n.left-=1,n.right+=1,n.bottom+=1,e.editorBounds=n},e.prototype.setContentsToPresenter=function(){var e=this.presenter,t=this.editor.quill,n=t.getContents();if(n=JSON.parse(JSON.stringify(n)),this.scaleFontSizeInDelta(n,1/e.scale),n.ops)for(var o=0,r=n.ops;o<r.length;o++){var i=r[o].attributes;i&&(i.font||(i.font=e.defaultFontFamily),i.size||(i.size=e.defaultFontSize+"px"))}var a=t.getSelection();a||(a=t.selection.savedRange),e.handleTextEdit(n,a)},e.prototype.setSelectionToPresenter=function(){var e=this.editor.quill.getSelection();e&&this.presenter.handleSelectedRangeEdit(e)},e.prototype.setContentsToEditor=function(){var e=this.presenter.quillDelta;this.scaleFontSizeInDelta(e,this.presenter.scale),this.editor.quill.setContents(e)},e.prototype.setSelectionToEditor=function(){this.editor.quill.setSelection(this.presenter.selectedRange)},e.prototype.scaleFontSizeInDelta=function(e,t){if(e.ops)for(var n=0,o=e.ops;n<o.length;n++){var r=o[n].attributes;r&&this.scaleFontSizeInFormats(r,t)}},e.prototype.scaleFontSizeInFormats=function(e,t){var n=e.size;if(n){var o=/^([+-]?\d+(\.\d+)?)(.*)$/.exec(n);if(o){var r=parseFloat(o[1])*t+o[3];e.size=r}}},e.prototype.setTypingFormatToEditor=function(){var e=this.editor.quill,t=e.getSelection();if(null!==t&&0===t.length){var n=this.presenter.typingFormat;for(var o in this.scaleFontSizeInFormats(n,this.presenter.scale),n)n.hasOwnProperty(o)&&e.format(o,n[o])}},e.prototype.setEventListener=function(){var e=this,t=this.presenter;this.editor.onKeyDown=function(n){27===n.keyCode?e.commitChanges():13===n.keyCode&&(t.shouldEndEditingOnNewline&&!n.altKey?e.commitChanges():e.insertNewLine())},this.editor.onTextChange=function(){window.setTimeout((function(){e.setContentsToPresenter(),e.processChange()}),0),e.setEditorBoundsToPresenter()},this.editor.onSelectionChange=function(){e.setSelectionToPresenter(),e.processChange()},this.editor.onUndo=function(){e.handleCommand("undo")},this.editor.onRedo=function(){e.handleCommand("redo")},this.editor.onShortcut=function(t){switch(t){case"subscript":e.handleCommand("textStyleSubscript");break;case"superscript":e.handleCommand("textStyleSuperscript");break;case"formula":e.handleCommand("textStyleFormula")}},this.editor.getTypingFormat=function(){return t.typingFormat},this.editor.onDismiss=function(){if(e.editor.container){var n=e.editor.container.style;"none"!==n.display&&(t.commit(),n.display="none")}},this.editor.onUpdatePositionForDynamicPage=function(){e.updateSizeAndPosition()},t.addNotificationHandler("textChanged",(function(){e.setContentsToEditor(),e.setSelectionToEditor(),e.updateSizeAndPosition()})),t.addNotificationHandler("selectedRangeChanged",(function(){e.setSelectionToEditor()})),t.addNotificationHandler("typingStyleChanged",(function(){e.setTypingFormatToEditor()})),t.addNotificationHandler("scaleChanged",(function(){e.setContentsToEditor(),e.setSelectionToEditor(),e.instanceHub.chemDraw.preservePageInfo&&e.updateSizeAndPosition()})),t.addNotificationHandler("dismiss",(function(){e.processChange(),e.hideEditor()}))},e.prototype.handleCommand=function(e){this.instanceHub.commandLibrary.getCommandWithName(e).execute()},e.prototype.processChange=function(){this.editor.container&&this.instanceHub.chemDraw.processChange()},e.prototype.insertNewLine=function(){var e=this.editor.quill,t=e.getSelection();t.length>0&&e.deleteText(t.index,t.length),e.insertText(t.index,"\n","user"),e.setSelection(t.index+1,0)},e.prototype.commitChanges=function(){this.presenter.commit()},e.prototype.showEditor=function(){this.editor.container.style.display="block"},e.prototype.hideEditor=function(){this.editor.container&&(this.editor.container.style.display="none",this.instanceHub.eventPanelController.setFocus()),this.presenter.delete()},e}(),qt=n(73935),Yt=n(70438),Jt=function(){return(Jt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Qt=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},$t=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},en=function(){function e(e,t){this.instanceHub=e,this.monomerService=t,this._onContentChange=null}return e.prototype.getName=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.cdDoc.name]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.setName=function(e){return Qt(this,void 0,void 0,(function(){return $t(this,(function(t){try{this.instanceHub.chemDraw.cdDoc.name=e}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.clear=function(){return Qt(this,void 0,void 0,(function(){var e,t,n;return $t(this,(function(o){switch(o.label){case 0:return e=this.instanceHub.chemDraw,t=e.cdDoc,n=this.instanceHub.documentStyleManager.getDefaultZoomLevelForDocument(t),t.clearContent(),t.performWithUndoDisabled((function(){t.setZoomLevel(n)})),[4,e.processChange(!0)];case 1:return o.sent(),[2]}}))}))},e.prototype.isEmpty=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.cdDoc.isEmpty()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getCDXML=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToXml()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getBase64CDX=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToB64CDX()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getImageURL=function(e){return Qt(this,void 0,void 0,(function(){return $t(this,(function(t){try{return[2,"data:image/png;base64,"+this.instanceHub.chemDraw.documentToPNG(e)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getInChI=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToInChI()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getInChIKey=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToInChIKey()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getMOLV2000=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToMOLV2000()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getMOLV3000=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToMOLV3000()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getRXNV2000=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToRXNV2000()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getRXNV3000=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToRXNV3000()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getSMILES=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.documentToSMILES()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getSVG=function(e){return Qt(this,void 0,void 0,(function(){return $t(this,(function(t){try{return[2,this.instanceHub.chemDraw.documentToSVG(e)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.setCDXML=function(e){return this.createNewDocumentWithData(e,Yt.l.CDXML)},e.prototype.setBase64CDX=function(e){return this.createNewDocumentWithData(e,Yt.l.B64CDX)},e.prototype.setMOL=function(e){return this.createNewDocumentWithData(e,Yt.l.MOLFILE)},e.prototype.setSMILES=function(e){return this.createNewDocumentWithData(e,Yt.l.SMILES)},e.prototype.findReactions=function(){return Qt(this,void 0,void 0,(function(){var e;return $t(this,(function(t){switch(t.label){case 0:return e=this.instanceHub.chemDraw.documentToXml(),[4,this.instanceHub.chemistryService.findReactions(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.getChemicalErrors=function(){return Qt(this,void 0,void 0,(function(){return $t(this,(function(e){try{return[2,this.instanceHub.chemDraw.cdDoc.processErrors()]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getFragmentsInfo=function(e){return Qt(this,void 0,void 0,(function(){return $t(this,(function(t){return[2,tn(this.instanceHub.chemDraw.cdDoc,"getAllFragmentsInfo",e)]}))}))},e.prototype.getProperties=function(){return Qt(this,void 0,void 0,(function(){var e,t,n,o,r;return $t(this,(function(i){switch(i.label){case 0:e=this.instanceHub,t=e.chemDraw,n=e.chemistryService,i.label=1;case 1:return i.trys.push([1,3,,4]),o=t.documentToXml(),[4,n.getProperties(o)];case 2:return[2,i.sent()];case 3:throw r=i.sent(),qe.l.getError(r);case 4:return[2]}}))}))},e.prototype.labelFragments=function(e){return Qt(this,void 0,void 0,(function(){var t,n;return $t(this,(function(o){switch(o.label){case 0:t=this.instanceHub.chemDraw,o.label=1;case 1:return o.trys.push([1,3,,4]),r.a.FragmentAPI.labelFragments(t.cdDoc,e),[4,t.processChange()];case 2:return o.sent(),[3,4];case 3:throw n=o.sent(),qe.l.getError(n);case 4:return[2]}}))}))},e.prototype.addReactant=function(e){var t=this;return this.addReactionComponent((function(){return r.a.ReactionAPI.addReactant(t.instanceHub.chemDraw.cdDoc,e)}))},e.prototype.addReagent=function(e){var t=this;return this.addReactionComponent((function(){return r.a.ReactionAPI.addReagent(t.instanceHub.chemDraw.cdDoc,e)}))},e.prototype.addProduct=function(e){var t=this;return this.addReactionComponent((function(){return r.a.ReactionAPI.addProduct(t.instanceHub.chemDraw.cdDoc,e)}))},Object.defineProperty(e.prototype,"onContentChange",{get:function(){return this._onContentChange},set:function(e){this._onContentChange=e,this.instanceHub.chemDraw.contentChangedHandlerCallback=function(t,n){if(e)try{t.isClean()||e(n)}catch(e){}}},enumerable:!1,configurable:!0}),e.prototype.createNewDocumentWithData=function(e,t){return Qt(this,void 0,void 0,(function(){var n=this;return $t(this,(function(o){switch(o.label){case 0:return[4,l((function(){return Qt(n,void 0,void 0,(function(){return $t(this,(function(n){switch(n.label){case 0:return this.instanceHub.chemDraw.newDocument(e,t),Yt.l.IsChemDrawDocument(t)?[4,T.Z(this.instanceHub.chemDraw.cdDoc,this.monomerService)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}))];case 1:return o.sent(),[2]}}))}))},e.prototype.addReactionComponent=function(e){return Qt(this,void 0,void 0,(function(){var t,n,o;return $t(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t=this.instanceHub.chemDraw,n=e(),[4,t.processChange()];case 1:return r.sent(),[4,T.Z(t.cdDoc,this.monomerService)];case 2:return r.sent(),[2,n];case 3:throw o=r.sent(),qe.l.getError(o);case 4:return[2]}}))}))},e}();function tn(e,t,n){n=Jt(Jt({},n),{transparentBackground:!0});try{var o=r.a.FragmentAPI[t](e,n);return o.forEach((function(e){e.image="data:image/png;base64,"+e.image})),o}catch(e){throw qe.l.getError(e)}}var nn=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},on=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},rn=function(){function e(e){this.instanceHub=e,this._onChange=null}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange},set:function(e){this._onChange=e,this.instanceHub.chemDraw.selectionChangedHandlerCallback=function(){if(e)try{e()}catch(e){}}},enumerable:!1,configurable:!0}),e.prototype.containsPartialStructure=function(){return nn(this,void 0,void 0,(function(){return on(this,(function(e){try{return[2,r.a.SelectionAPI.containsPartialStructure(this.instanceHub.chemDraw.cdDoc)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.isEmpty=function(){return nn(this,void 0,void 0,(function(){return on(this,(function(e){try{return[2,r.a.SelectionAPI.isEmpty(this.instanceHub.chemDraw.cdDoc)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getNumberOfObjects=function(){return nn(this,void 0,void 0,(function(){return on(this,(function(e){try{return[2,r.a.SelectionAPI.numberOfObjects(this.instanceHub.chemDraw.cdDoc)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getNumberOfStructures=function(){return nn(this,void 0,void 0,(function(){return on(this,(function(e){try{return[2,r.a.SelectionAPI.numberOfStructures(this.instanceHub.chemDraw.cdDoc)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getCDXML=function(){return nn(this,void 0,void 0,(function(){return on(this,(function(e){try{return[2,r.a.SelectionAPI.getCDXML(this.instanceHub.chemDraw.cdDoc)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getImageUrl=function(e){return void 0===e&&(e={}),nn(this,void 0,void 0,(function(){return on(this,(function(t){try{return[2,"data:image/png;base64,"+r.a.SelectionAPI.getPNG(this.instanceHub.chemDraw.cdDoc,e)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getSVG=function(e){return void 0===e&&(e={}),nn(this,void 0,void 0,(function(){return on(this,(function(t){try{return[2,r.a.SelectionAPI.getSVG(this.instanceHub.chemDraw.cdDoc,e)]}catch(e){throw qe.l.getError(e)}return[2]}))}))},e.prototype.getFragmentsInfo=function(e){return nn(this,void 0,void 0,(function(){return on(this,(function(t){return[2,tn(this.instanceHub.chemDraw.cdDoc,"getSelectedFragmentsInfo",e)]}))}))},e}(),an=n(12833),sn=function(e){return function(t,n,o){var r=o.value,i=!1;return o.value=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return i||(console.warn('The method "'+n+'" is deprecated and will be removed in a future version of ChemDraw JS. '+e),i=!0),r.apply(this,t)},o}},cn=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ln=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},un=function(){function e(e){this.instanceHub=e}return e.prototype.onChange=function(e){this.instanceHub.chemDraw.selectionChangedHandlerCallback=function(){if(e)try{e()}catch(e){console.error("Calling selection changed handler throws error:\n"+e)}}},e.prototype.isEmpty=function(){return r.a.SelectionAPI.isEmpty(this.instanceHub.chemDraw.cdDoc)},e.prototype.containsPartialStructure=function(){return r.a.SelectionAPI.containsPartialStructure(this.instanceHub.chemDraw.cdDoc)},e.prototype.numberOfStructures=function(){return r.a.SelectionAPI.numberOfStructures(this.instanceHub.chemDraw.cdDoc)},e.prototype.numberOfObjects=function(){return r.a.SelectionAPI.numberOfObjects(this.instanceHub.chemDraw.cdDoc)},e.prototype.getCDXML=function(){try{return r.a.SelectionAPI.getCDXML(this.instanceHub.chemDraw.cdDoc)}catch(e){throw qe.l.getError(e)}},e.prototype.getImageUrl=function(e){var t=Object.assign({},e);try{return"data:image/png;base64,"+r.a.SelectionAPI.getPNG(this.instanceHub.chemDraw.cdDoc,t)}catch(e){throw qe.l.getError(e)}},e.prototype.getSVG=function(e){var t=Object.assign({},e);try{return r.a.SelectionAPI.getSVG(this.instanceHub.chemDraw.cdDoc,t)}catch(e){throw qe.l.getError(e)}},cn([sn('Use api2."selection.onChange" instead'),ln("design:type",Function),ln("design:paramtypes",[Function]),ln("design:returntype",void 0)],e.prototype,"onChange",null),cn([sn('Use async "api2.selection.isEmpty()" instead.'),ln("design:type",Function),ln("design:paramtypes",[]),ln("design:returntype",Boolean)],e.prototype,"isEmpty",null),cn([sn('Use async "api2.selection.containPartialStructure()" instead.'),ln("design:type",Function),ln("design:paramtypes",[]),ln("design:returntype",Boolean)],e.prototype,"containsPartialStructure",null),cn([sn('Use async "api2.selection.getNumberOfStructures()" instead.'),ln("design:type",Function),ln("design:paramtypes",[]),ln("design:returntype",Number)],e.prototype,"numberOfStructures",null),cn([sn('Use async "api2.selection.getNumberOfObjects()" instead.'),ln("design:type",Function),ln("design:paramtypes",[]),ln("design:returntype",Number)],e.prototype,"numberOfObjects",null),cn([sn('Use async "api2.selection.getCDXML()" instead.'),ln("design:type",Function),ln("design:paramtypes",[]),ln("design:returntype",String)],e.prototype,"getCDXML",null),cn([sn('Use async "api2.selection.getImageURL()" instead.'),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",String)],e.prototype,"getImageUrl",null),cn([sn('Use async "api2.selection.getSVG()" instead.'),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",String)],e.prototype,"getSVG",null),e}(),dn=n(98163),hn=n(22092),pn=function(){function e(e,t,n,o){this.left=e,this.top=t,this.right=n,this.bottom=o}return e.isIntersecting=function(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},e.intersection=function(t,n){var o=Math.max(t.left,n.left),r=Math.max(t.top,n.top);return new e(o,r,Math.max(Math.min(t.right,n.right),o),Math.max(Math.min(t.bottom,n.bottom),r))},e.union=function(t,n){return new e(Math.min(t.left,n.left),Math.min(t.top,n.top),Math.max(t.right,n.right),Math.max(t.bottom,n.bottom))},e.empty=function(){return new e(0,0,0,0)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.left===this.right||this.top===this.bottom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.right-this.left},set:function(e){this.right=this.left+e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bottom-this.top},set:function(e){this.bottom=this.top+e},enumerable:!1,configurable:!0}),e.prototype.isIntersecting=function(t){return e.isIntersecting(this,t)},e.prototype.grow=function(e){return this.left-=e,this.top-=e,this.right+=e,this.bottom+=e,this},e.prototype.equals=function(e){return this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom},e.prototype.toString=function(){return"(x,y){"+this.left+", "+this.top+"}, (w,h)["+this.width+", "+this.height+"]"},e}(),fn=n(98517),mn=function(e,t,n){this.command="",this.type="button",this.name=e,this.displayName=t,this.reason=n},gn=n(2086),yn=n(19798),bn=n(22873),vn=n(77823),wn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cn=function(){return(Cn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Sn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bindButton=function(e){e&&(t.buttonHTMLElement=e)},t}return wn(t,e),t.prototype.getElement=function(){return this.buttonHTMLElement},t.prototype.render=function(){var e=this.props,t=e.id,n=e.className,o=e.children,r=e.iconClass,i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["id","className","children","iconClass"]);return O.createElement(A.Z,Cn({id:t,className:n},i,{ref:this.bindButton}),O.createElement("div",{className:r}),o)},t}(O.Component),En=function(){return(En=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Dn=function(e){var t=e.children,n=e.enabled,o=e.popupDisabled,r=e.title,i=e.tool,a=e.toolbarOrientation,s=e.viewOnly,c=(0,O.useRef)(null),l=function(e){var t=e.onHide,n=e.onShow,o=(0,O.useState)(!1),r=o[0],i=o[1],a=(0,O.useCallback)((function(){i(!1),t&&t()}),[]);return{isPopupVisible:r,showPopup:(0,O.useCallback)((function(){i(!0),n&&n()}),[]),hidePopup:a}}(e),u=l.isPopupVisible,d=l.showPopup,h=l.hidePopup,p=function(e,t){var n=t.enabled,o=t.popupInstant,r=(0,O.useRef)(null),i=(0,O.useCallback)((function(){null!==r.current&&(clearTimeout(r.current),window.removeEventListener("mouseup",i))}),[]);return(0,vn.Z)((function(){return i()})),{onMouseDown:(0,O.useCallback)((function(){n&&!o?(r.current=setTimeout((function(){e(),i()}),250),window.addEventListener("mouseup",i)):e()}),[n,e])}}(d,e);(0,O.useEffect)((function(){s&&h()}),[s]);var f=(0,O.useCallback)((function(){n&&!u&&i.onClick()}),[n,u,i]),m=(0,O.useCallback)((function(e){c.current=e?e.buttonHTMLElement:null}),[]);return O.createElement(O.Fragment,null,O.createElement(gn.Z,null,O.createElement(Sn,En({ref:m,id:"CDW_"+i.name,className:Pn(e),disabled:o,iconClass:xn(e),onClick:f,title:null!=r?r:i.displayName},p),O.createElement("div",{className:"cdd-tool-expandable"}))),O.createElement(Tn,{onHide:h,show:u,target:c,toolbarOrientation:a},t))},Tn=function(e){var t=e.children,n=e.onHide,o=e.show,r=e.target,i=e.toolbarOrientation;return O.createElement(bn.Z,{onHide:n,placement:"vertical"===i?"right-start":"bottom-start",popperConfig:{modifiers:[{name:"preventOverflow",options:{altAxis:!0,tether:!1,padding:10}},{name:"offset",enabled:!0,options:{offset:[0,2]}},{name:"clipToViewPortStyle",enabled:!0,phase:"beforeWrite",fn:function(e){e.state.modifiersData.clipToViewPortStyle={maxWidth:"calc(100vw - 20px)",maxHeight:"calc(100vh - 20px)",overflow:"auto"}}}]},rootClose:!0,rootCloseEvent:"mousedown",show:o,target:r,transition:!1},(function(e){e.placement,e.arrowProps,e.show;var o,r=e.popper,i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["placement","arrowProps","show","popper"]);return O.createElement("div",En({},i,{className:"cdd cddroot cdd-toolbar-popup-container",id:"cdd-toolbar-popup-container",onClick:n}),O.createElement("div",{className:"cdd-toolbar-popup",style:null===(o=r.state)||void 0===o?void 0:o.modifiersData.clipToViewPortStyle},"function"==typeof t?t({popper:r}):t))}))};function Pn(e){var t=e.popupDisabled,n=e.selected,o=e.tool;return x()("cdd-tool-button",{"cdd-tool-button-selected":n,"cdd-tool-button-disabled":t},"cdd-tool-button-"+o.name)}function xn(e){var t=e.enabled,n=e.tool;return x()("cdd-tool-image",{"cdd-tool-image-disabled":!t},"cdd-tool-image-"+n.name)}var On=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),An=function(e){this.enabled=!1,this.selected=!1,this.tool=e},Mn=function(e){function t(t){var n=e.call(this,t)||this;return n.mouseClick=function(){n.props.beforeClickHandled&&n.props.beforeClickHandled(n),n.props.tool.onClick(),n.props.afterClickHandled&&n.props.afterClickHandled(n)},n}return On(t,e),t.prototype.shouldComponentUpdate=function(e,t,n){return this.props.enabled!==e.enabled||this.props.selected!==e.selected},t.prototype.render=function(){var e=x()({"cdd-tool-button":!0,"cdd-tool-button-selected":this.props.selected,"cdd-tool-button-disabled":!this.props.enabled},this.props.className,"cdd-tool-button-"+this.props.tool.name),t="CDW_"+this.props.tool.name,n="cdd-tool-image cdd-tool-image-"+this.props.tool.name;return O.createElement(Sn,{id:t,className:e,onClick:this.props.enabled?this.mouseClick:function(){},title:this.props.tool.displayName,disabled:!this.props.enabled,iconClass:n})},t}(O.Component),_n=function(){return(_n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},kn=function(e,t,n,o,r,i){this.enabled=!1,this.selected=!1,this.subTools=[],this.isCollapsed=!0,this.tool=e,this.groupName=t,this.subTools=o,this.subToolColumnCount=n,this.writingMode=r,this.collapseOption=i},Ln=function(e){var t=e.enabled,n=e.groupName,o=e.selected,r=e.tool,i=e.toolbarOrientation,a=e.viewOnly;return O.createElement(Dn,{enabled:t,selected:o,title:n?n+": "+r.displayName:r.displayName,tool:r,toolbarOrientation:i,viewOnly:a},O.createElement(In,_n({},e)))},In=function(e){var t=e.afterSubToolClickHandled,n=e.beforeSubToolClickHandled,o=e.subToolColumnCount,r=e.subTools,i=e.writingMode;if(!r.length)return null;var a=[];return r.forEach((function(e,r){var i=o>0?Math.floor(r/o):0,s=a[i];void 0===s&&(s=[],a[i]=s),s.push(O.createElement(Mn,_n({key:"subTool_"+i+"_"+r+"_"+e.tool.name,afterClickHandled:t,beforeClickHandled:n,className:"cdd-tool-button-subtool"},e)))})),O.createElement(yn.Z,{className:"cdd-toolbar cdd-panel-group-buttons"},O.createElement(gn.Z,{vertical:"horizontal"===i},a.map((function(e,t){return O.createElement(gn.Z,{key:"subToolbar_row_"+t,vertical:"vertical"===i},e)}))))},Rn=n(40460),Hn=n(12541),Nn=n(66653),Fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jn=function(){return(jn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fn(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.iconClass,o=(e.children,e.imageWidth),r=e.imageHeight,i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["className","iconClass","children","imageWidth","imageHeight"]),a={width:o,height:r};return O.createElement(A.Z,jn({className:"cdd-empty-image-button "+t},i,{disabled:!0}),O.createElement("div",{className:n,style:a}))},t}(O.Component),Bn=function(){return(Bn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Vn=function(e){var t=e.category,n=e.extension,o=e.showTemplates,r=e.onShowTemplates,i=e.onTemplateSelected,a=e.selectedTemplate,s=(0,O.useRef)(null),c=(0,O.useCallback)((function(){r(t)}),[r]),l=(0,O.useCallback)((function(e){e.stopPropagation()}),[]);return O.createElement(O.Fragment,null,O.createElement("div",{ref:s,className:"cdd-menu-item cdd-templates-menu-item",onClick:l,onMouseEnter:c,role:"menuitem"},O.createElement("span",null,t.name),O.createElement("span",{className:"cdd-menu-item-padding"}),O.createElement(Nn.aVz,{className:"cdd-disclose-right"})),O.createElement(bn.Z,{placement:"right-start",popperConfig:{modifiers:[{name:"flip",enabled:!0},{name:"preventOverflow",enabled:!0,options:{tether:!1}},Hn.Z,{name:"applyMaxSize",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn:function(e){var t=e.state,n=t.modifiersData.maxSize,o=n.width,r=n.height;t.styles.popper=Bn(Bn({},t.styles.popper),{maxWidth:o+"px",maxHeight:r+"px",overflow:"hidden"})}}]},show:o,target:s,transition:!1},(function(e){e.placement,e.arrowProps,e.show,e.popper;var o=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["placement","arrowProps","show","popper"]);return O.createElement("div",Bn({},o,{className:"cdd cdd-toolbar-popup-container",onMouseDown:l}),O.createElement(Un,{category:t,extension:n,onTemplateSelected:i,selectedTemplate:a}))})))},Un=function(e){for(var t=e.category,n=e.extension,o=e.onTemplateSelected,a=e.selectedTemplate,s=(0,O.useCallback)((function(e){i.activeInstanceHub.progressIndicatorController.show();var t=re.W.basePath+"/templates/"+e.selectedName+"/"+e.selectedRow+"_"+e.selectedColumn+n.cdxml;se.get(t).then((function(t){i.activeInstanceHub.progressIndicatorController.hide(),r.a.TemplateManager.setSelectedTemplate(t),o(e)})).catch((function(e){i.activeInstanceHub.progressIndicatorController.hide(),i.activeInstanceHub.messagePresenterController.error(e.message)}))}),[n,o]),c=[],l=1;l<=t.rows;l++){for(var u=[],d=1;d<=t.columns;d++)if((l-1)*t.columns+d<=t.count){var h=t.name===(null==a?void 0:a.selectedName)&&l===a.selectedRow&&d===a.selectedColumn;u.push(O.createElement(zn,{key:d,category:t,extension:n,row:l,column:d,onSelected:s,selected:h}))}else u.push(O.createElement(Wn,{key:d,className:"cdd-tool-button cdd-tool-button-subtool cdd-templates-image-button",iconClass:"cdd-templates-image-button-thumbnail",imageWidth:t.imgWidth,imageHeight:t.imgHeight}));c.push(O.createElement(gn.Z,{key:l},u))}return O.createElement(yn.Z,{className:"cdd-toolbar cdd-toolbar-popup"},O.createElement(gn.Z,{vertical:!0},c))},zn=function(e){var t=e.category,n=e.extension,o=e.row,r=e.column,i=e.onSelected,a=e.selected,s=(0,O.useCallback)((function(){i({selectedName:t.name,selectedRow:o,selectedColumn:r})}),[t.name,o,r]),c=re.W.basePath+"/templates/"+t.name+"/"+o+"_"+r+n.image,l=(0,O.useState)(!1),u=l[0],d=l[1];return O.createElement(A.Z,{className:x()("cdd-tool-button cdd-tool-button-subtool cdd-templates-image-button",{"cdd-templates-image-button-selected":a}),onClick:s},O.createElement("div",{className:"cdd-image-button-content",style:{width:t.imgWidth,height:t.imgHeight}},O.createElement("span",null),O.createElement("img",{className:"cdd-templates-image-button-thumbnail",src:c,style:{maxWidth:t.imgWidth,maxHeight:t.imgHeight},onLoad:function(){return d(!0)}}),O.createElement("div",{className:"cdd-image-button-hover"}),!u&&O.createElement("div",{className:"cdd-image-button-indicator"})))},Gn=function(e){this.tool=e,this.enabled=!1,this.selected=!1,this.selectedTemplate=null,this.toolbarOrientation="horizontal",this.viewOnly=!1},Zn=function(e){var t=e.beforeClickHandled,n=e.enabled,o=e.selectedTemplate,r=e.selected,a=e.tool,s=e.toolbarOrientation,c=(0,Rn.Z)((function(){return e=re.W.getVersionedUrl(re.W.join(re.W.basePath,"/templates/templateIndex.json")),new Promise((function(t,n){se.getWithCache(e).then((function(e){t({templateIndex:JSON.parse(e)})})).catch((function(e){i.activeInstanceHub.messagePresenterController.error(e.message),n()}))}));var e})).value,l=(0,O.useState)(null),u=l[0],d=l[1],h=(0,O.useCallback)((function(e){d(e.name)}),[]),p=(0,O.useCallback)((function(){d(null)}),[]),f=(0,O.useCallback)((function(e){t&&t(e),a.onClick()}),[t,a]);return O.createElement(Dn,{enabled:n,onHide:p,popupDisabled:!n,popupInstant:!0,selected:r,tool:a,toolbarOrientation:s},(function(e){var t=e.popper;return O.createElement(Kn,{onShowTemplates:h,onTemplateSelected:f,popper:t,selectedTemplate:o,templateIndex:null==c?void 0:c.templateIndex,visibleTemplatesCategory:u})}))},Kn=function(e){var t=e.onShowTemplates,n=e.onTemplateSelected,o=e.popper,r=e.selectedTemplate,i=e.templateIndex,a=e.visibleTemplatesCategory;return(0,O.useEffect)((function(){o.scheduleUpdate()}),[i]),O.createElement("ul",{className:"cdd-toolbar cdd-TemplateMenu cdd-templates-menu cdd-font"},i?i.categories.map((function(e,o){return O.createElement(Vn,{key:o,category:e,extension:i.extension,showTemplates:a==e.name,onShowTemplates:t,onTemplateSelected:n,selectedTemplate:r})})):O.createElement("li",{className:"cdd-templates-menu-indicator",role:"status"},O.createElement("span",{className:"cdd-image-button-indicator"})))},Xn=function(){function e(){this.autoFit=null,this.centerContent=!1}return e.prototype.resizeForView=function(e,t){var n=t.width,o=t.height;if(n<=0||o<=0)return{width:n,height:o};if(!this.autoFit){var i=e.contentBounds;(i.width>0||i.height>0)&&(n=Math.max(n,i.right+10),o=Math.max(o,i.bottom+10))}var a=function(e,t){var n=e.getMutableMainPage().getScale();return{width:n.curToInternDistance(t.width),height:n.curToInternDistance(t.height)}}(e,{width:n,height:o}),s=a.width,c=a.height,l=new r.a.DocumentPosterSize(s,c);try{e.resize(l)}finally{l.delete()}if(this.centerContent&&function(e){var t=e.getMainPage().curRect,n=e.contentBounds,o=(t.left+t.right-(n.left+n.right))/2,i=(t.top+t.bottom-(n.top+n.bottom))/2;0===o&&0===i||(e.performWithUndoModified((function(){e.moveObjects(new r.a.CurPoint(o,i,0))})),e.performWithUndoModified((function(){})))}(e),!0===this.autoFit||this.autoFit&&"object"==typeof this.autoFit&&!this.autoFit.resetZoom){var u=Math.max(n-20,0),d=Math.max(o-20,0),h=new r.a.CurRect(0,0,d,u);e.performWithUndoModified((function(){e.shrinkToFitContentInRect(h)}))}else this.autoFit&&this.autoFit.resetZoom&&function(e,t){var n=function(e){var t=e.getSetting(r.a.CDXDatumID.BondLength)/20;if(t>=21.6)return 1;var n=21.6/t;return Math.round(100*n)/100}(e),o=e.contentBounds;if(0!==o.width&&0!==o.height){var i=20/e.getMainPage().getScale().scale,a=o.width/i*n,s=o.height/i*n,c=Math.max(Math.min(a,t.width-22),0),l=Math.max(Math.min(s,t.height-22),0),u=new r.a.CurRect(0,0,l,c);e.performWithUndoModified((function(){e.scaleToFitContentInRect(u)}))}else e.setZoomLevel(n)}(e,{width:n,height:o});return{width:n,height:o}},e.prototype.updatePageSize=function(e,t){var n=t.width,o=t.height,i=e.getMutableMainPage(),a=i.getScale(),s=a.curToInternDistance(n),c=a.curToInternDistance(o);if(i.internRect.width===s&&i.internRect.height===c)return!1;if(s<=0||c<=0)return!1;var l=new r.a.DocumentPosterSize(s,c);return e.resize(l),l.delete(),!0},e}(),qn=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.toString=function(){return"(width: "+this.width+", height: "+this.height+")"},e}(),Yn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Jn=function(){function e(e){this.trackingSession=null,this.toolsProps=[],this.contentChangedHandlerCallback=null,this.drawDelegate=null,this.viewDelegate=null,this.onContentChange=new dn.MZ,this.onNewDocument=new dn.MZ,this.onScaleChange=new dn.MZ,this.onSelectionChange=new dn.MZ,this.onSizeChange=new dn.MZ,this.instanceHub=e}var t,n,o;return t=e,Object.defineProperty(e.prototype,"isViewOnly",{get:function(){var e;return null!==(e=this.instanceHub.configurationManager.getConfig().isViewOnly)&&void 0!==e&&e},set:function(e){this.instanceHub.configurationManager.updateConfig({isViewOnly:e})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preservePageInfo",{get:function(){var e;return null!==(e=this.instanceHub.configurationManager.getConfig().preservePageInfo)&&void 0!==e&&e},enumerable:!1,configurable:!0}),e.prototype.newDocument=function(e,t){var n=this,o=this.instanceHub.progressIndicatorController;o.show();try{this.withMutedContentChangeEvents((function(){n.cdDoc&&n.cdDoc.delete(),n.cdDoc=new r.a.CDDocument(r.a.ViewType.Normal);var o=n.cdDoc.getMutableMainPage(),i=new r.a.CwWebCanvasPort(null,null);i.canvasTooltipContent=n.instanceHub.canvasTooltipContent,n.cdDoc.setPort(i),i.setPage(o),n.bindDocumentView(),n.registerEventHandler(),n.initializeDocumentContent(e,t),n.registerDrawCallback(),n.onNewDocument.dispatch()})),this.cdDoc.markClean()}catch(e){throw qe.l.getError(e)}finally{o.hide()}},e.prototype.documentToB64CDX=function(){return this.saveAs(hn.j.B64CDX)},e.prototype.documentToXml=function(){return this.saveAs(hn.j.CDXML)},e.prototype.documentToSMILES=function(){return this.saveAs(hn.j.SMILES)},e.prototype.documentToInChI=function(){return this.saveAs(hn.j.InChI)},e.prototype.documentToInChIKey=function(){return this.saveAs(hn.j.InChIKey)},e.prototype.documentToRXNV2000=function(){return this.saveAs(hn.j.RXNV2000)},e.prototype.documentToRXNV3000=function(){return this.saveAs(hn.j.RXNV3000)},e.prototype.documentToPNG=function(e){var t=Object.assign({},e);return this.saveAs(hn.j.PNG,t)},e.prototype.documentToPreviewPNG=function(e){var t=Object.assign({},e);return this.saveAs(hn.j.PreviewPNG,t)},e.prototype.documentToSVG=function(e){var t=Object.assign({},e);return r.a.WriteDocumentAPI.writeSVG(this.cdDoc,t)},e.prototype.saveAs=function(e,t){switch(e){case hn.j.CDXML:return r.a.WriteDocumentAPI.writeCDXML(this.cdDoc);case hn.j.B64CDX:return r.a.WriteDocumentAPI.writeBase64CDX(this.cdDoc);case hn.j.SMILES:return r.a.WriteDocumentAPI.writeSMILES(this.cdDoc);case hn.j.InChI:return r.a.WriteDocumentAPI.writeInChI(this.cdDoc);case hn.j.InChIKey:return r.a.WriteDocumentAPI.writeInChIKey(this.cdDoc);case hn.j.RXNV2000:return r.a.WriteDocumentAPI.writeRXNV2000(this.cdDoc);case hn.j.RXNV3000:return r.a.WriteDocumentAPI.writeRXNV3000(this.cdDoc);case hn.j.PNG:return r.a.WriteDocumentAPI.writePNG(this.cdDoc,t);case hn.j.PreviewPNG:return r.a.WriteDocumentAPI.writePreviewPNG(this.cdDoc,t);case hn.j.SVG:return r.a.WriteDocumentAPI.writeSVG(this.cdDoc,t);default:throw new Error("Could not convert to format "+e)}},e.prototype.documentToMOLV2000=function(){return r.a.WriteDocumentAPI.writeMOLV2000(this.cdDoc)},e.prototype.documentToMOLV3000=function(){return r.a.WriteDocumentAPI.writeMOLV3000(this.cdDoc)},e.prototype.setViewOnly=function(e){var t=this.isViewOnly;this.isViewOnly=e,t!==e&&(e&&(r.a.CursorService.getSharedService().SetCursorByID(0),this.handleCommand("selectAll"),this.handleCommand("invertSelection")),this.viewOnlyCallback(e),e&&(this.instanceHub.dialogContainerController.hide(),this.instanceHub.textEditorController.getTextEditor().dismiss()),e||this.instanceHub.clipboardManager.checkPermissions())},e.prototype.fitToContainer=function(){var e=this;this.withMutedContentChangeEvents((function(){var t,n,o=null!==(n=null===(t=e.viewDelegate)||void 0===t?void 0:t.getContainerSize())&&void 0!==n?n:{width:0,height:0};if(!(o.width<=0||o.height<=0)){if(e.preservePageInfo){var i=new r.a.CurRect(0,0,o.height,o.width);e.cdDoc.performWithUndoModified((function(){e.cdDoc.scaleToFitPageInRect(i)}))}else e.cdDoc.performWithUndoModified((function(){e.scaleContentToContainer(o)}));e.cdDoc.performWithUndoModified((function(){}))}}))},e.prototype.zoomToContainer=function(e){var n=this.getVisibleClientRect(),o=new qn(n.width,n.height);if(!(o.width<=0||o.height<=0)){var r=this.cdDoc.contentBounds;if(0!==r.width&&0!==r.height){var i=this.cdDoc.getZoomLevel(),a=2*(t.PAGE_PADDING+1),s=o.width-a,c=o.height-a,l=s/r.width*i,u=c/r.height*i,d=Math.min(l,u);if(void 0!==e){var h=100*d;void 0!==e.minimumZoomPercent&&e.minimumZoomPercent>0&&h<e.minimumZoomPercent&&(d=e.minimumZoomPercent/100),void 0!==e.maximumZoomPercent&&e.maximumZoomPercent>0&&h>e.maximumZoomPercent&&(d=e.maximumZoomPercent/100),this.cdDoc.setZoomLevel(d)}else this.cdDoc.setZoomLevel(d)}}},e.prototype.shrinkToFit=function(){var e=this;this.withMutedContentChangeEvents((function(){var t,n,o=null!==(n=null===(t=e.viewDelegate)||void 0===t?void 0:t.getContainerSize())&&void 0!==n?n:{width:0,height:0};o.width<=0||o.height<=0||(e.shrinkContentToContainer(o),e.cdDoc.performWithUndoModified((function(){})))}))},e.prototype.autoFitToContainer=function(){var e,t=null!==(e=this.instanceHub.configurationManager.getConfig().autoFit)&&void 0!==e&&e;t&&("object"==typeof t&&t.resetZoom?this.fitToContainer():this.shrinkToFit())},e.prototype.resizeToContainer=function(){if(this.viewDelegate){var e=new Xn;e.centerContent=!0,e.resizeForView(this.cdDoc,this.viewDelegate.getContainerSize())}},e.prototype.addSelectionChangeListener=function(e){this.onSelectionChange.add(e)},e.prototype.removeSelectionChangeListener=function(e){this.onSelectionChange.remove(e)},e.prototype.addContentChangeListener=function(e){this.onContentChange.add(e)},e.prototype.removeContentChangeListener=function(e){this.onContentChange.remove(e)},e.prototype.addNewDocumentListener=function(e){this.onNewDocument.add(e)},e.prototype.removeNewDocumentListener=function(e){this.onNewDocument.remove(e)},e.prototype.addScaleChangeListener=function(e){this.onScaleChange.add(e)},e.prototype.removeScaleChangeListener=function(e){this.onScaleChange.remove(e)},e.prototype.addSizeChangeListener=function(e){this.onSizeChange.add(e)},e.prototype.removeSizeChangeListener=function(e){this.onSizeChange.remove(e)},e.prototype.processChange=function(e){var t=this;return new Promise((function(n){i.activeInstanceHub=t.instanceHub,t.checkToolState(),e&&(oe.isChrome()||oe.isFirefox()?t.redrawAsync():t.redraw()),n()}))},e.prototype.redraw=function(){var e;null===(e=this.drawDelegate)||void 0===e||e.draw()},e.prototype.redrawAsync=function(){var e;null===(e=this.drawDelegate)||void 0===e||e.requestDraw()},e.prototype.initToolbar=function(e,t){var n=this.removeFeatureDisabledTools(e.layout.toolItems);this.toolbarModel=r.a.ToolbarModel.createToolbarModel(this.createToolbarConfig(t,n));var o=function(e){var n=t.getTool(e);if(n){if(!(n instanceof mn))return n;console.warn(n.reason)}else console.warn("Could not find tool: "+e)};this.toolsProps=[];for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s.isGroup){for(var c=s.getColumns(),l=s.getTools(),u=void 0,d=s.getName(),h=[],p=0,f=l;p<f.length;p++)(g=o(f[p]))&&(void 0===u&&(u=g),h.push(new An(g)));if(0===h.length);else if(1===h.length)this.toolsProps.push(h[0]);else{var m=new kn(u,d,c,h,s.getGroupToolsWritingMode(),s.getGroupCollapseOption());this.toolsProps.push(m)}}else{var g;(g=o(s.getName()))&&("Templates"===g.name?this.toolsProps.push(new Gn(g)):this.toolsProps.push(new An(g)))}}this.initToolbarCallback&&this.initToolbarCallback(2)},e.prototype.checkToolState=function(){var e=this.toolbarModel;if(void 0!==e){this.cdDoc.toolbarModel=e,e.update(this.cdDoc);for(var t=new Map,n=0;n<e.numberOfItems;n++){var o=e.itemAtIndex(n);if(o instanceof r.a.SelectableToolGroupModel)for(var i=0;i<o.numberOfItems;i++){var a=o.itemAtIndex(i);t.set(a.command,a)}else t.set(o.command,o)}for(var s=!1,c=function(e){if(e.tool instanceof fn.A){var n=t.get(e.tool.command),o=e.selected,r=e.enabled;n?(e.selected=n.isSelected,e.enabled=n.isEnabled,o===e.selected&&r===e.enabled||(s=!0)):console.error('Command "'+e.tool.command+'" does not exist')}else e.enabled=!1,e.selected=!1},l=function(e){e instanceof An?c(e):e instanceof kn?(e.subTools.forEach((function(t){c(t),t.selected&&(e.tool=t.tool)})),c(e)):e instanceof Gn&&(c(e),e.enabled&&e.selected||(e.selectedTemplate=null))},u=0,d=this.toolsProps;u<d.length;u++)l(d[u]);s&&this.checkToolStateCallback()}},e.prototype.handleCommand=function(e){var t=r.a.getCommandIDForName(e);return r.a.handleCommand(t,this.cdDoc)},e.prototype.getAvailableCommandNames=function(){return r.a.getAvailableCommandNames()},e.prototype.getCommandIDForName=function(e){return r.a.getCommandIDForName(e)},e.prototype.isCommandEnabled=function(e){var t=r.a.getCommandIDForName(e);return r.a.isCommandEnabled(t)},e.prototype.isCommandChecked=function(e){var t=r.a.getCommandIDForName(e);return r.a.isCommandSelected(t)},e.prototype.copyDocumentToClipboard=function(){var e=this;this.handleCommand("selectAll"),this.instanceHub.commandLibrary.getCommandWithName("copy").execute((function(){e.handleCommand("invertSelection")}))},e.prototype.withMutedContentChangeEvents=function(e){var t,n;null===(t=this.cdDoc)||void 0===t||t.doAllIdleTasks();var o=null===(n=this.cdDoc)||void 0===n?void 0:n.isClean(),r=this.onContentChange;this.onContentChange=new dn.MZ;var i=null;this.contentChangedHandlerCallback&&(i=this.contentChangedHandlerCallback,this.contentChangedHandlerCallback=null);try{e(),this.cdDoc.doAllIdleTasks()}finally{o&&this.cdDoc.markClean(),this.contentChangedHandlerCallback=i,this.onContentChange=r}},e.prototype.registerEventHandler=function(){this.cdDoc&&(this.setContentChangedHandler(),this.setScaleChangedHandler(),this.setSizeChangedHandler(),this.setSelectionChangedHandler())},e.prototype.initializeDocumentContent=function(e,t){if(!this.viewDelegate)throw new Error("View delegate is not set");var n=r.a.AlertDisplayService.getSharedService().preventAlert;r.a.AlertDisplayService.getSharedService().preventAlert=!this.preservePageInfo;try{if(t=t||Yt.l.CDXML,e&&Yt.l.IsChemDrawDocument(t)||(this.instanceHub.documentStyleManager.applyConfiguredStyle(this.cdDoc),(new Xn).resizeForView(this.cdDoc,this.viewDelegate.getContainerSize())),e){switch(t){case Yt.l.CDXML:r.a.ReadDocumentAPI.readCDXML(this.cdDoc,e);break;case Yt.l.B64CDX:r.a.ReadDocumentAPI.readCDX(this.cdDoc,e);break;case Yt.l.MOLFILE:r.a.ReadDocumentAPI.readMDLMolfile(this.cdDoc,e);break;case Yt.l.SMILES:r.a.ReadDocumentAPI.readSMILES(this.cdDoc,e);break;default:throw new Error("Unsupported data format: "+t)}this.instanceHub.configurationManager.getConfig().autoFit?this.autoFitToContainer():!this.preservePageInfo&&this.viewDelegate&&this.resizeToContainer()}}catch(e){throw(new Xn).resizeForView(this.cdDoc,this.viewDelegate.getContainerSize()),e}finally{this.processChange(!0),this.instanceHub.messagePresenterController.hide(),"document"===this.instanceHub.dialogContainerController.dialogType&&this.instanceHub.dialogContainerController.hide(),i.setInstanceHub(this.cdDoc,this.instanceHub),r.a.AlertDisplayService.getSharedService().preventAlert=n,this.cdDoc.markClean()}},e.prototype.getVisibleClientRect=function(){if(this.viewDelegate)return this.viewDelegate.getVisibleClientRect();var e=this.cdDoc.getMutableMainPage(),t=e.curRect.width,n=e.curRect.height;return new pn(0,0,t,n)},e.prototype.scaleContentToContainer=function(e){var n=this.instanceHub.documentStyleManager.getDefaultZoomLevelForDocument(this.cdDoc),o=this.cdDoc.contentBounds;if(0!==o.width&&0!==o.height){var i=20/this.cdDoc.getMainPage().getScale().scale,a=o.width/i*n,s=o.height/i*n,c=2*(t.PAGE_PADDING+1),l=Math.max(Math.min(a,e.width-c),0),u=Math.max(Math.min(s,e.height-c),0),d=new r.a.CurRect(0,0,u,l);this.cdDoc.scaleToFitContentInRect(d)}else this.cdDoc.setZoomLevel(n)},e.prototype.shrinkContentToContainer=function(e){var n=this,o=t.PAGE_PADDING,i=Math.max(e.width-2*o,0),a=Math.max(e.height-2*o,0),s=new r.a.CurRect(0,0,a,i);this.cdDoc.performWithUndoModified((function(){n.cdDoc.shrinkToFitContentInRect(s)}))},e.prototype.registerDrawCallback=function(){var e=this;this.cdDoc.getPort().drawCallback=function(t){var n;null===(n=e.drawDelegate)||void 0===n||n.requestDraw(new pn(t.left,t.top,t.right,t.bottom))}},e.prototype.setContentChangedHandler=function(){var e=this;this.cdDoc.setNotificationHandler("ContentChanged",(function(t){var n=t.data;e.onContentChange.dispatch(n),e.contentChangedHandlerCallback&&e.contentChangedHandlerCallback(e.cdDoc,n)}))},e.prototype.setScaleChangedHandler=function(){var e=this;this.cdDoc.setNotificationHandler("ScaleChanged",(function(t){e.onScaleChange.dispatch(t.data)}))},e.prototype.setSizeChangedHandler=function(){var e=this;this.cdDoc.setNotificationHandler("SizeChanged",(function(t){e.onSizeChange.dispatch(t.data)}))},e.prototype.setSelectionChangedHandler=function(){var e=this;this.cdDoc.setNotificationHandler("SelectionChanged",(function(t){e.onSelectionChange.dispatch(t.data),e.selectionChangedHandlerCallback&&e.selectionChangedHandlerCallback()}))},e.prototype.bindDocumentView=function(){var e=this;this.cdDoc&&(this.cdDoc.view={getVisibleClientRect:function(){var t=e.getVisibleClientRect();return new r.a.CurRect(t.top,t.left,t.bottom,t.right)},scrollClientRectToView:function(t){var n;null===(n=e.viewDelegate)||void 0===n||n.scrollClientRectToView(new pn(t.left,t.top,t.right,t.bottom))}})},e.prototype.removeFeatureDisabledTools=function(e){var t=this,n=function(e){return!(!t.instanceHub.chemistryService.isEnabled()&&["StructureToName","NameToStructure"].indexOf(e)>=0&&(console.warn("Tool "+e+" is not displayed, because WebService feature is disabled in configuration."),1))};return e.filter((function(e){return e.isGroup?(e.tools=e.getTools().filter((function(e){return n(e)})),!0):n(e.getName())}))},e.prototype.createToolbarConfig=function(e,t){for(var n=[],o=function(t){if(t.isGroup){var o=t.getTools(),r=[];o.forEach((function(t){var n=e.getTool(t);n&&r.push(n)})),n.push({type:"drawingToolGroup",displayName:t.getName(),tools:r})}else{var i=e.getTool(t.getName());i&&n.push(i)}},r=0,i=t;r<i.length;r++)o(i[r]);return n},e.PAGE_PADDING=10,t=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(n=0,o=(0,p.f3)(w.InstanceHub),function(e,t){o(e,t,n)}),Yn("design:paramtypes",[D])],e)}(),Qn=n(26729),$n=n.n(Qn),eo=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},to=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},no=function(e,t){for(var n=0,o=t.length,r=e.length;n<o;n++,r++)e[r]=t[n];return e},oo=function(){function e(){this.showTooltip=!1,this.textOnlyLines=[],this.hasFormattedDescription=!1,this.title="",this.previewCDXML="",this.dataLines=[],this.bounds=pn.empty(),(0,o.rC)(this)}return e.prototype.setContent=function(e,t){this.textOnlyLines=no([],e.textOnlyLines),this.hasFormattedDescription=e.hasFormattedDescription,this.title=e.title,this.previewCDXML=e.previewCDXML,this.dataLines=no([],e.dataLines),this.bounds=new pn(t.left,t.top,t.right,t.bottom),this.showTooltip=!0},e.prototype.clearContent=function(){this.showTooltip=!1},eo([o.LO,to("design:type",Object)],e.prototype,"showTooltip",void 0),eo([o.LO,to("design:type",Array)],e.prototype,"textOnlyLines",void 0),eo([o.LO,to("design:type",Object)],e.prototype,"hasFormattedDescription",void 0),eo([o.LO,to("design:type",Object)],e.prototype,"title",void 0),eo([o.LO,to("design:type",Object)],e.prototype,"previewCDXML",void 0),eo([o.LO,to("design:type",Array)],e.prototype,"dataLines",void 0),eo([o.LO,to("design:type",Object)],e.prototype,"bounds",void 0),eo([o.aD,to("design:type",Function),to("design:paramtypes",[Object,Object]),to("design:returntype",void 0)],e.prototype,"setContent",null),eo([o.aD,to("design:type",Function),to("design:paramtypes",[]),to("design:returntype",void 0)],e.prototype,"clearContent",null),eo([(0,p.b2)(),to("design:paramtypes",[])],e)}(),ro=n(50361),io=n.n(ro),ao=n(23279),so=n.n(ao),co=n(27361),lo=n.n(co),uo=n(18446),ho=n.n(uo),po=n(36968),fo=n.n(po),mo=n(98601),go=n.n(mo),yo=n(82492),bo=n.n(yo),vo=function(){function e(e,t,n,o,r){var i=this;this.columns=0,this.getName=function(){return i.name},this.getTools=function(){return i.tools},this.getColumns=function(){return i.columns},this.getGroupCollapseOption=function(){return i.groupCollapseOption},this.name=e,t?(this.tools=t,this.columns=n,this._isGroup=!0,this.groupToolsWritingMode=null!=o?o:"horizontal",this.groupCollapseOption=null!=r?r:"auto"):(this.tools=[e],this._isGroup=!1)}return Object.defineProperty(e.prototype,"isGroup",{get:function(){return this._isGroup},enumerable:!1,configurable:!0}),e.prototype.getGroupToolsWritingMode=function(){return this.groupToolsWritingMode},e}(),wo=function(){return(wo=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Co(e){if(e.preservePageInfo&&e.autoFit)throw new Error("autoFit and preservePageInfo cannot be enabled at the same time")}function So(e){return"string"==typeof e?new vo(e):function(e){var t=e.group,n=[],o=e.order;void 0!==o&&(n=function(e,t){for(var n=0,o=t.length,r=e.length;n<o;n++,r++)e[r]=t[n];return e}([],o));var r=e.columns||0,i=To(e.collapse,["auto","always","never"],"auto"),a=Do(e.writingMode);return new vo(t,n,r,a,i)}(e)}function Eo(e,t,n){if(void 0!==t)for(var o=t.length,r=0;r<o;r++){var i=t[r];e.set(i,n)}}function Do(e){return To(e,["horizontal","vertical"],"horizontal")}function To(e,t,n){if("string"==typeof e){var o=e.toLowerCase();if(t.includes(o))return o}return n}var Po=new(function(){function e(){}return e.prototype.parse=function(e){if(void 0===e)return{};var t,n,o,r,i,a,s,c,l,u,d;void 0!==e.layout&&(i=Do((r=e.layout).orientation),a=function(e){var t=e.tools;if(!Array.isArray(t))return[];for(var n=[],o=0,r=t;o<r.length;o++)for(var i=0,a=r[o].order;i<a.length;i++){var s=a[i];n.push(So(s))}return n}(r),t={orientation:i,tools:r.tools,toolItems:a}),void 0!==e.features&&(s=e.features,c=new Map,l=s.enabled,u=s.disabled,Eo(c,l,!0),Eo(c,u,!1),n=c),void 0!==e.properties&&(d=e.properties,o=wo(wo({},d),{chemService:d.chemService||d.chemservice,styleSheet:d.styleSheet||d.StyleSheet,aromaticDisplay:To(d.aromaticDisplay,["alternating","aromatic","none"],void 0)}));var h={layout:t,featuresInternal:n,properties:o,isViewOnly:e.isViewOnly,preservePageInfo:e.preservePageInfo,autoFit:e.autoFit,applicationState:e.applicationState,saveApplicationStateCallback:e.saveApplicationStateCallback};return Co(h),h},e.prototype.mergeConfig=function(e,t){var n,o=io()(t);return bo()(o,e),o.layout=function(e,t){var n,o=bo()(t.layout,e.layout);return o&&(null===(n=e.layout)||void 0===n?void 0:n.tools)&&(o.tools=e.layout.tools,o.toolItems=e.layout.toolItems),o}(e,t),o.featuresInternal=function(e,t){var n;return void 0===e.featuresInternal?t.featuresInternal:(null===(n=t.featuresInternal)||void 0===n||n.forEach((function(t,n){var o,r;(null===(o=e.featuresInternal)||void 0===o?void 0:o.has(n))||null===(r=e.featuresInternal)||void 0===r||r.set(n,t)})),e.featuresInternal)}(e,t),o.properties=function(e,t){return bo()(t.properties,e.properties)}(e,t),o.applicationState=null!==(n=e.applicationState)&&void 0!==n?n:o.applicationState,Co(o),o},e}()),xo={layout:{orientation:"Horizontal",tools:[{order:["LassoSelection","MarqueeSelection","Undo","Redo","ZoomIn","ZoomOut",{group:"Clipboard",columns:2,collapse:"always",order:["Copy","CopyAsCDXML"]},"Paste","SolidBond","Eraser","DashedBond","BoldBond","HashedBond","WedgedBond","HashedWedgedBond","HollowWedgedBond","WavyBond",{group:"Multiple Bonds",columns:4,collapse:"always",order:["DoubleBond","DashedDoubleBond","DoubleEitherBond","TripleBond","BoldDoubleBond","DoubleDashedDoubleBond","DativeBond","QuadrupleBond","AnyBond","SingleOrDoubleBond","SingleOrAromaticBond","DoubleOrAromaticBond"]},{group:"Chain Tools",collapse:"always",order:["AcyclicChain","SnakingChain"]},{group:"Arrows",columns:7,collapse:"always",order:["ArrowSolidLarge","ArrowSolidMedium","ArrowSolidSmall","ArrowHollowLarge","ArrowHollowMedium","ArrowRetrosyntheticLarge","ArrowRetrosyntheticSmall","ArrowBoldLarge","ArrowBoldMedium","ArrowBoldSmall","Arrow270CW","Arrow180CW","Arrow120CW","Arrow90CW","ArrowDashedLarge","ArrowDashedMedium","ArrowDashedSmall","Arrow270CCW","Arrow180CCW","Arrow120CCW","Arrow90CCW","ArrowOneSidedLeftLarge","ArrowOneSidedLeftMedium","ArrowOneSidedLeftSmall","Arrow270SingleCW","Arrow180SingleCW","Arrow120SingleCW","Arrow90SingleCW","ArrowOneSidedRightLarge","ArrowOneSidedRightMedium","ArrowOneSidedRightSmall","Arrow270SingleCCW","Arrow180SingleCCW","Arrow120SingleCCW","Arrow90SingleCCW","ArrowResonanceLarge","ArrowResonanceMedium","ArrowResonanceSmall","Arrow270Double","Arrow180Double","Arrow120Double","Arrow90Double","ArrowNoGoCrossLarge","ArrowNoGoCrossMedium","ArrowNoGoCrossSmall","ArrowEquilibriumLarge","ArrowEquilibriumMedium","ArrowEquilibriumSmall","Arrow270ElipticalCW","ArrowNoGoHashLarge","ArrowNoGoHashMedium","ArrowNoGoHashSmall","ArrowUnbalancedELarge","ArrowUnbalancedEMedium","ArrowUnbalancedESmall","Arrow270ElipticalCCW"]},"Benzene","Pentadiene","Hexane","Pentane","Propane","Butane","Octane","Heptane","CyclohexaneChairRight","CyclohexaneChairLeft","Text","Formula","Superscript","Subscript","Group","Ungroup","Integral",{group:"Brackets",collapse:"always",columns:4,order:["SquareBrackets","RoundBrackets","CurlyBrackets","DoubleDaggerBrackets","LeftSquareBracket","LeftRoundBracket","LeftCurlyBracket","SingleDaggerBracket"]},"StructureCleanup","ReactionCleanup","ExpandLabel","ContractLabel","Templates",{group:"Chemical Symbols",columns:2,writingMode:"vertical",collapse:"always",order:["CirclePlus","CircleMinus","Plus","Minus","RadicalCation","RadicalAnion","LonePair","Radical","ElectronPushing","RadicalPushing","HDot","HDash","AttachmentDiamond","AttachmentStar","AttachmentPolymerBead","AttachmentWavy"]},{group:"Query Tools",collapse:"always",columns:2,order:["AlternativeGroup","ReactionAtomMap","AddMultiCenterAttachment","AddVariableAttachment"]},"StructureProperties"],hidden:["ReactionInterpretation"]}]},features:{enabled:["ShowWarnValence","ShowWarnParens","ShowWarnIsotopes","ShowWarnStrayBonds","ShowWarnStrayAtoms","ShowWarnUndefinedStereo","ShowWarnAmbigStereo","ShowWarnStereoBtw","ShowWarnLinearAtoms","ShowWarnHydrogenBonds","ShowWarnMisc","AlwaysShowReactionMapping","AutomaticReactionMapping","ApplicationLogo","ExtendedCopyPaste"],disabled:["WebService","AtomPropertiesDialog.ShowGenericLabels","CopyDocumentButton"]},properties:{StyleSheet:"ACS Document 1996"}},Oo=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ao=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Mo=function(){function e(){this.configuration=_o({},xo),(0,o.rC)(this)}return e.prototype.getConfig=function(){return this.configuration},e.prototype.isFeatureEnabled=function(e){var t=this.getConfig().featuresInternal;return!!t&&!0===t.get(e)},e.prototype.updateConfig=function(e){this.configuration=_o(this.configuration,e)},Oo([o.LO,Ao("design:type",Object)],e.prototype,"configuration",void 0),Oo([o.aD,Ao("design:type",Function),Ao("design:paramtypes",[Object]),Ao("design:returntype",void 0)],e.prototype,"updateConfig",null),Oo([(0,p.b2)(),Ao("design:paramtypes",[])],e)}();function _o(e,t){var n=Po.parse(t);return Po.mergeConfig(n,e)}var ko=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Lo=function(){function e(e){var t=this;this.configurationManager=e,this.state={},this.lastState={},this.debouncedSaveState=so()((function(){return t.saveState()}),2e3),(0,o.U5)((function(){return t.configurationManager.getConfig().applicationState}),(function(){t.restoreState()})),this.restoreState()}return e.prototype.save=function(e,t){fo()(this.state,e,t),this.debouncedSaveState()},e.prototype.get=function(e,t){var n=lo()(this.state,e);return void 0!==n?n:t},e.prototype.delete=function(e){go()(this.state,e),this.debouncedSaveState()},e.prototype.restoreState=function(){var e=this.configurationManager.getConfig().applicationState;e&&(this.state=io()(e),this.lastState=io()(e))},e.prototype.saveState=function(){var e=this.configurationManager.getConfig().saveApplicationStateCallback;e&&!ho()(this.state,this.lastState)&&(e((0,o.ZN)(this.state)),this.lastState=io()(this.state))},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.ConfigurationManager),function(e,o){n(e,o,t)}),ko("design:paramtypes",[Mo])],e);var t,n}(),Io=n(43590),Ro=function(e){var t=e.children,n=e.id,o=(0,X.Nc)();return 0===O.Children.count(t)?null:O.createElement("div",{className:x()("cdd-accessory-panel-container cdd-font",{"d-none":o.chemDraw.isViewOnly}),id:n,"data-testid":n},t)},Ho=n(52766),No=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fo=function(e){function t(t){var n=e.call(this,t)||this;return n.onKeyDown=function(e){13===e.keyCode&&n.onOK()},n.onOK=function(){n.hide()},n}return No(t,e),t.prototype.render=function(){var e=re.W.getAbsoluteUrl(this.context.instanceHub.configurationManager.getConfig().properties.chemService);return O.createElement(I,{show:!0,onHide:this.onOK,dialogClassName:"cdd-dialog-about",onKeyDown:this.onKeyDown},O.createElement(K,{title:"About ChemDraw"}),O.createElement(R,{className:"cdd-dialog-content"},O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(M.Z.Label,{className:"cdd-dialog-table-row-header"},"Version:"),O.createElement(M.Z.Label,{className:"cdd-dialog-table-row-data"},te.G.getAppVersion())),O.createElement("div",{className:"cdd-dialog-table-row"},O.createElement(M.Z.Label,{className:"cdd-dialog-table-row-header"},"Service URL:"),O.createElement(M.Z.Label,{className:"cdd-dialog-table-row-data"},O.createElement("a",{href:e,target:"_blank",rel:"noreferrer"},e)))),O.createElement(H,null,O.createElement(A.Z,{onClick:this.onOK,bsPrefix:"cdd-button",variant:"ok"},"OK")))},t}(Y),jo=(0,Ho.Pi)((function(){var e=(0,X.Nc)().dialogContainerController,t=(0,X.SS)("ApplicationLogo"),n=(0,O.useCallback)((function(){e.show(O.createElement(Fo,null))}),[e]);return t?O.createElement("div",{className:x()("CDW_Logo cdd-logo"),onClick:n,role:"button","aria-label":"About ChemDraw JS"}):null})),Wo=n(88306),Bo=n.n(Wo),Vo=n(27537),Uo=n.n(Vo),zo=function(){function e(){}return e.getEventKey=function(t){var n=t.key;if(void 0===n)if((n=Uo()(t)).length>1)n=n.charAt(0).toUpperCase()+n.slice(1);else if(t.shiftKey&&1===n.length){n=n.toUpperCase();var o=e.shiftedSymbols[n];o&&(n=o)}return n},e.shiftedSymbols={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+","[":"{","]":"}","\\":"|",";":":","'":'"',",":"<",".":">","/":"?"},e}(),Go=function(){function e(e){this.isHandlingKeyEvent=!1,this.lastKeyEventTimeoutHandler=0,this.instanceHub=e}return e.prototype.handleModifierKeyChanged=function(e,t){var n=oe.isMac()?e.metaKey:e.ctrlKey;this.instanceHub.chemDraw.trackingSession?this.instanceHub.chemDraw.trackingSession.handleKeyModifiersChanged(n,e.altKey,e.shiftKey):r.a.TrackingSession.handleMouseMove(this.instanceHub.chemDraw.cdDoc,t,e.shiftKey,e.altKey,n),n&&this.instanceHub.clipboardManager.setClipboardActive()},e.prototype.handleKeyEvent=function(e){38===e.keyCode||40===e.keyCode||37===e.keyCode||39===e.keyCode?this.handleKeyEventAsync(e):this.handleKeyEventSync(e)},e.prototype.doHandleKeyEvent=function(e){var t=zo.getEventKey(e),n=oe.isMac()?e.metaKey:e.ctrlKey;return this.instanceHub.chemDraw.cdDoc.handleKeyEvent(t,e.keyCode,n,e.shiftKey,e.altKey)},e.prototype.handleKeyEventSync=function(e){var t=this;this.doHandleKeyEvent(e)&&(e.preventDefault(),this.instanceHub.chemDraw.processChange().then((function(){t.handleHighlight()})))},e.prototype.handleKeyEventAsync=function(e){var t=this;e.preventDefault(),this.isHandlingKeyEvent||(this.isHandlingKeyEvent=!0,window.setTimeout((function(){t.isHandlingKeyEvent=!1,window.clearTimeout(t.lastKeyEventTimeoutHandler),t.doHandleKeyEvent(e)&&(t.instanceHub.chemDraw.redraw(),t.handleHighlight(),t.lastKeyEventTimeoutHandler=window.setTimeout((function(){t.instanceHub.chemDraw.processChange()}),400))}),20))},e.prototype.handleHighlight=function(){var e;null===(e=this.instanceHub.mouseEventSource.handler)||void 0===e||e.refreshHighlight()},e}(),Zo=function(){function e(e){this.dragUpdateTime=0,this.isDrawing=!1,this.needRedrawInDragging=!1,this.instanceHub=e}return e.prototype.updateHighlighting=function(e,t){var n=this.instanceHub.chemDraw.cdDoc;if(e&&t){var o=oe.isMac()?t.metaKey:t.ctrlKey;r.a.TrackingSession.handleMouseMove(n,e,t.shiftKey,t.altKey,o)}else r.a.TrackingSession.updateCursor(n)},e.prototype.handleMove=function(e,t){this.isDrawing?this.performWithTrackingPort((function(){})):this.processMove(e,t)},e.prototype.handleSingleClick=function(e,t){var n=this;this.performWithTrackingPort((function(){n.setTrackingStateForEvent(e,t),n.beginTracking(e,t,!1,0),n.stopTracking()}))},e.prototype.handleDoubleClick=function(e,t){var n=this;this.performWithTrackingPort((function(){n.setTrackingStateForEvent(e,t),n.beginTracking(e,t,!1,1),n.stopTracking()}))},e.prototype.handleStartDrag=function(e,t){this.processDrag(e,t,!0),this.needRedrawInDragging=this.isToolNeedsFullRedraw()},e.prototype.handleDrag=function(e,t){var n=this,o=performance.now();this.dragUpdateTime=o,window.requestAnimationFrame((function(){n.dragUpdateTime===o&&(n.processDrag(e,t,!1),n.needRedrawInDragging&&n.instanceHub.chemDraw.redrawAsync())}))},e.prototype.handleStopDrag=function(){var e=this;this.dragUpdateTime=performance.now(),this.performWithTrackingPort((function(){e.stopTracking(!0)})),this.refreshHighlight()},e.prototype.stopTracking=function(e){var t=this,n=this.instanceHub.chemDraw.trackingSession;return n&&(this.instanceHub.chemDraw.trackingSession=null,n.end(),n.delete()),this.instanceHub.chemDraw.processChange(e).then((function(){t.isDrawing=!1,t.performWithTrackingPort((function(){}))}))},e.prototype.handleMouseDown=function(e,t){r.a.TrackingState.setLeftMouseButtonDown(!0)},e.prototype.handleMouseUp=function(e,t){r.a.TrackingState.setLeftMouseButtonDown(!1)},e.prototype.setTrackingStateForEvent=function(e,t){var n=new r.a.CurPoint(e.x,e.y,0);r.a.TrackingState.setMouseLocation(n),r.a.TrackingState.setShiftKeyDown(t.shiftKey),r.a.TrackingState.setControlKeyDown(t.ctrlKey),r.a.TrackingState.setAltKeyDown(t.altKey),r.a.TrackingState.setMetaKeyDown(t.metaKey),n.delete()},e.prototype.refreshHighlight=function(e){var t=this;this.isDrawing||this.performWithTrackingPort((function(){e||r.a.TrackingSession.updateCursor(t.instanceHub.chemDraw.cdDoc)}))},e.prototype.beginTracking=function(e,t,n,o){this.isDrawing=!0;var i=new r.a.CurPoint(e.x,e.y,0),a=oe.isMac()?t.metaKey:t.ctrlKey;this.instanceHub.chemDraw.trackingSession=r.a.TrackingSession.beginSession(this.instanceHub.chemDraw.cdDoc,i,o,t.shiftKey,t.altKey,a,n),this.instanceHub.chemDraw.redrawAsync()},e.prototype.performWithTrackingPort=function(e){var t;null===(t=this.instanceHub.chemDraw.drawDelegate)||void 0===t||t.performWithTrackingPort(e)},e.prototype.processMove=function(e,t){this.setTrackingStateForEvent(e,t),this.updateHighlighting(e,t)},e.prototype.processDrag=function(e,t,n){var o=this;this.performWithTrackingPort((function(){o.setTrackingStateForEvent(e,t),n&&!o.instanceHub.chemDraw.trackingSession&&o.beginTracking(e,t,!0,0);var r=o.instanceHub.chemDraw.trackingSession;r&&r.handleDrag(e)}))},e.prototype.isToolNeedsFullRedraw=function(){for(var e=this.instanceHub.chemDraw.cdDoc.toolbarModel,t=0;t<e.numberOfItems;t++){var n=e.itemAtIndex(t);if(n instanceof r.a.SelectableToolGroupModel)for(var o=0;o<n.numberOfItems;o++){var i=n.itemAtIndex(o);if("chooseEdittingTool_Eraser"===i.command&&i.isSelected)return!0}else if("chooseEdittingTool_Eraser"===n.command&&n.isSelected)return!0}return!1},e}(),Ko=n(19611),Xo=n(15469),qo=n(46670),Yo=function(){return(Yo=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Jo=(0,Ho.Pi)((function(e){var t=e.content,n=(0,O.useMemo)((function(){return(0,qo.m)()}),[]),o=(0,O.useRef)(null),r=(0,O.useRef)(null),i=(0,O.useRef)(null),a=(0,Dt.Z)({show:!1}),s=a[0],c=a[1];return(0,O.useEffect)((function(){return t.showTooltip?i.current=setTimeout((function(){i.current=null,c({show:!0})}),500):c({show:!1}),function(){i.current&&(clearTimeout(i.current),i.current=null)}}),[t.showTooltip]),O.createElement("div",{className:"cdd-canvas-tooltip-drawing-area",ref:o},O.createElement(bn.Z,{target:r,show:s.show,placement:"bottom",container:n,rootClose:!0,onHide:function(){},popperConfig:{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["top","right","left"]}}]}},function(e){if(e.hasFormattedDescription){if(0===e.previewCDXML.length&&0===e.dataLines.length){var t=new oo;return t.textOnlyLines.push(e.title),Qo(t)}return function(e){return O.createElement($o,{className:"cdd-canvas-tooltip cdd-canvas-tooltip-formatted"},O.createElement(Ko.Z.Title,null,e.title),O.createElement(Ko.Z.Content,null,e.previewCDXML.length&&O.createElement(Xo.k,{mimeData:e.previewCDXML,mimeType:"chemical/x-cdxml",className:"cdd-canvas-tooltip-preview"}),e.dataLines.map((function(e,t){return O.createElement("p",{className:"cdd-canvas-tooltip-data-line",key:t},e)}))))}(e)}return Qo(e)}(t)),O.createElement("div",{className:"cdd-canvas-tooltip-target",style:{width:t.bounds.width+"px",height:t.bounds.height+"px",left:t.bounds.left+"px",top:t.bounds.top+"px"},ref:r}))}));function Qo(e){return O.createElement($o,{className:"cdd-canvas-tooltip"},O.createElement(Ko.Z.Content,null,e.textOnlyLines.map((function(e,t){return O.createElement("p",{className:"cdd-canvas-tooltip-data-line",key:t},e)}))))}var $o=O.forwardRef((function(e,t){var n=e.popper,o=e.children,r=(e.show,function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["popper","children","show"]));(0,O.useEffect)((function(){n.scheduleUpdate()}),[o,n]);var i=Yo(Yo({},r),{id:"CanvasTooltip"});return O.createElement(Ko.Z,Yo({ref:t},i),o)})),er=n(76095),tr=n.n(er),nr=tr().import("attributors/style/font");nr.whitelist=null,tr().register(nr,!0);var or=tr().import("attributors/style/size");or.whitelist=null,tr().register(or,!0);var rr=tr().import("parchment"),ir=new rr.Attributor.Attribute("pki-chemistry","pki-chemistry",{scope:rr.Scope.INLINE});tr().register(ir,!0);var ar=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sr=function(e){function t(t){var n=e.call(this,t)||this;return n.quill=null,n.isComposing=!1,n.handleMouseDown=function(e){e.stopPropagation()},n.handleKeyDown=function(e){n.onKeyDown&&n.onKeyDown(e)},n.eventEmitter=new($n()),n}return ar(t,e),Object.defineProperty(t.prototype,"isEditing",{get:function(){return"block"===this.container.style.display},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var e=this;this.customizeHistory();var t=this.getKeyBindings();this.quill=new(tr())(this.quillContainer,{formats:["background","bold","color","font","italic","size","script","underline","align","pki-chemistry"],modules:{keyboard:{bindings:t}}}),this.quill.on("text-change",(function(t,n,o){if("user"===o){if(e.isComposing)return;e.onTextChange&&e.onTextChange()}})),this.quill.on("selection-change",(function(t,n,o){if("user"===o){if(e.isComposing)return;e.onSelectionChange&&e.onSelectionChange(t,n)}})),this.quill.clipboard.addMatcher(Node.ELEMENT_NODE,(function(t,n){var o=getComputedStyle(t),r=o.getPropertyValue("font-family"),i=r.split(/, */);i.length>0&&(r=i[0]);var a={font:r,size:o.getPropertyValue("font-size"),"pki-chemistry":void 0},s=e.getTypingFormat();s["pki-chemistry"]&&(a["pki-chemistry"]=s["pki-chemistry"]);var c=n.constructor;return n.compose((new c).retain(n.length(),a))})),this.handleCompositionEvent()},t.prototype.componentWillUnmount=function(){this.eventEmitter.emit("remove"),this.quill=null},t.prototype.dismiss=function(){this.onDismiss&&this.onDismiss()},t.prototype.updatePositionForDynamicPage=function(){this.onUpdatePositionForDynamicPage&&this.isEditing&&this.onUpdatePositionForDynamicPage()},t.prototype.render=function(){var e=this;return O.createElement("div",{className:"cdd-text-editor",style:{display:"none"},ref:function(t){e.container=t},onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown},O.createElement("div",{ref:function(t){e.quillContainer=t}}))},t.prototype.handleCompositionEvent=function(){var e=this;this.container.addEventListener("compositionstart",(function(){e.isComposing=!0})),this.container.addEventListener("compositionend",(function(){e.isComposing=!1,e.onTextChange&&e.onTextChange()}))},t.prototype.getKeyBindings=function(){var e=this,t={custom_enter:{key:13,handler:function(e,t){}}},n=function(t){e.onShortcut&&e.onShortcut(t)};if(oe.isWindows())t.custom_subscript={key:120,handler:function(){n("subscript")}},t.custom_superscript={key:121,handler:function(){n("superscript")}},t.custom_formula={key:70,shortKey:!0,handler:function(){n("formula")}};else if(oe.isMac()){var o=oe.isFirefox()?173:189,r=oe.isFirefox()?61:187;t.custom_subscript={key:o,shortKey:!0,handler:function(){n("subscript")}},t.custom_superscript={key:r,shortKey:!0,handler:function(){n("superscript")}},t.custom_formula={key:70,shortKey:!0,handler:function(){n("formula")}}}return t},t.prototype.customizeHistory=function(){var e=this;this.eventEmitter.on("remove",(function(){e=null}));var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ar(n,t),n.prototype.undo=function(){e&&e.onUndo&&e.onUndo()},n.prototype.redo=function(){e&&e.onRedo&&e.onRedo()},n.prototype.record=function(e,t){},n}(tr().import("modules/history"));tr().register("modules/history",t,!0)},t}(O.Component);function cr(){var e=(0,X.Nc)(),t=(0,O.useCallback)((function(){e.clipboardManager.clipboardEventSource.setActive()}),[e]),n=(0,O.useState)(null),o=n[0],r=n[1],a=(0,O.useCallback)((function(t){t&&e.eventPanelController.bind(t),r(t)}),[e]);return(0,O.useEffect)((function(){if(o){var t=e.mouseEventSource.registerEventOnElement(o),n=e.keyEventSource.registerEventOnElement(o),r=e.clipboardManager.clipboardEventSource.registerOnElement(o),a=e.fileDropEventSource.registerEventOnElement(o),s=function(){e.chemDraw.isViewOnly||(i.activeInstanceHub=e)};return o.addEventListener("mouseover",s,!0),o.addEventListener("mousedown",s,!0),o.addEventListener("keydown",s,!0),o.addEventListener("wheel",(function(){})),function(){t(),n(),r(),a(),o.removeEventListener("mouseover",s,!0),o.removeEventListener("mousedown",s,!0),o.removeEventListener("keydown",s,!0)}}}),[o]),O.createElement("div",{id:"CDW_GestureSourcePanel",className:"cdd-event-panel",tabIndex:0,ref:a,onFocus:t})}var lr=new(function(){function e(){}return e.prototype.toRectangle=function(e){return new pn(e.x,e.y,this.getMaxX(e),this.getMaxY(e))},e.prototype.getMaxX=function(e){return e.x+e.width},e.prototype.getMaxY=function(e){return e.y+e.height},e}()),ur=(0,O.forwardRef)((function(e,t){var n=(0,O.useRef)(null),o=(0,O.useRef)(null);return(0,O.useImperativeHandle)(t,(function(){return{getCanvas:function(e){switch(e){case 0:return n.current;case 1:return o.current;default:throw new Error("Invalid layer")}},getContext:function(e){var t,r,i,a,s=null;return 0===e?s=null!==(r=null===(t=n.current)||void 0===t?void 0:t.getContext("2d"))&&void 0!==r?r:null:1===e&&(s=null!==(a=null===(i=o.current)||void 0===i?void 0:i.getContext("2d"))&&void 0!==a?a:null),s}}}),[n.current,o.current]),O.createElement("div",{className:"cdd-layer-canvas-container"},O.createElement("canvas",{ref:n}),O.createElement("canvas",{ref:o}))})),dr=function(){function e(e,t,n,o){var r=this;this.container=e,this.canvas=t,this.content=n,this.scroller=o,this.onResize=new dn.MZ,this.onViewportChange=new dn.MZ,this.lastViewport=null,this.containerResizeObserver=new ResizeObserver((function(){r.handleContainerResize()})),this.contentResizeObserver=new ResizeObserver((function(){r.handleContentResize()})),this.containerResizeObserver.observe(e),this.contentResizeObserver.observe(n),this.handleScrollPositionChange=this.handleScrollPositionChange.bind(this),this.scroller.addEventListener("scroll",this.handleScrollPositionChange)}return e.prototype.destroy=function(){this.containerResizeObserver.disconnect(),this.contentResizeObserver.disconnect(),this.scroller.removeEventListener("scroll",this.handleScrollPositionChange)},Object.defineProperty(e.prototype,"size",{get:function(){return{width:this.container.clientWidth,height:this.container.clientHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentSize",{get:function(){return{width:this.content.clientWidth,height:this.content.clientHeight}},set:function(e){this.content.style.width=e.width+"px",this.content.style.height=e.height+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return{x:this.scroller.scrollLeft,y:this.scroller.scrollTop,width:Math.min(this.container.clientWidth,this.content.clientWidth),height:Math.min(this.container.clientHeight,this.content.clientHeight)}},enumerable:!1,configurable:!0}),e.prototype.setViewportPosition=function(e){var t=e.x,n=e.y;this.scroller.scrollLeft=t,this.scroller.scrollTop=n},e.prototype.getContext=function(e){return this.canvas.getContext(e)},e.prototype.handleContainerResize=function(){this.updateScroller(),this.updateCanvasLayers(),this.onResize.dispatch(this),this.signalViewportChange()},e.prototype.handleContentResize=function(){this.updateScroller(),this.updateCanvasLayers(),this.signalViewportChange()},e.prototype.handleScrollPositionChange=function(){this.signalViewportChange()},e.prototype.signalViewportChange=function(){var e=this.viewport;this.onViewportChange.dispatch({viewport:e,oldViewport:this.lastViewport}),this.lastViewport=this.viewport},e.prototype.updateCanvasLayers=function(){this.updateCanvas(this.canvas.getCanvas(0)),this.updateCanvas(this.canvas.getCanvas(1))},e.prototype.updateScroller=function(){var e=this.scroller.getBoundingClientRect();Math.abs(e.width-this.contentSize.width)<1?this.scroller.style.overflowX="hidden":this.scroller.style.overflowX="auto",Math.abs(e.height-this.contentSize.height)<1?this.scroller.style.overflowY="hidden":this.scroller.style.overflowY="auto"},e.prototype.updateCanvas=function(e){var t=this.viewport,n=this.calculateBestCanvasSize(),o=n.width,r=n.height;if(e.width=o*devicePixelRatio,e.height=r*devicePixelRatio,e.style.width=o+"px",e.style.height=r+"px",o>t.width||r>t.height){var i=o-t.width,a=r-t.height;e.style.clipPath="inset(0px "+i+"px "+a+"px 0px)"}var s=this.calculateCanvasPosition();e.style.left=s.left,e.style.top=s.top},e.prototype.calculateCanvasPosition=function(){var e=0,t=0;return this.viewport.width<this.size.width&&(e=(this.scroller.clientWidth-this.viewport.width)/2),this.viewport.height<this.size.height&&(t=(this.scroller.clientHeight-this.viewport.height)/2),{left:e+"px",top:t+"px"}},e.prototype.calculateBestCanvasSize=function(){var e=Math.round(this.viewport.width),t=Math.round(this.viewport.height);return{width:e+e%2,height:t+t%2}},e}(),hr=(0,O.forwardRef)((function(e,t){var n=e.children,o=e.containerBackgroundColor,r=e.onResize,i=e.onViewportChange,a=(0,O.useRef)(null),s=(0,O.useRef)(null),c=(0,O.useRef)(null),l=(0,O.useRef)(null),u=(0,O.useState)(null),d=u[0],h=u[1];return(0,O.useEffect)((function(){var e=new dr(a.current,s.current,l.current,c.current);return e.onViewportChange.add((function(e){var t=e.viewport,n=e.oldViewport;i(t,n)})),e.onResize.add((function(){r(e.size)})),h(e),function(){e.destroy()}}),[]),(0,O.useImperativeHandle)(t,(function(){return d}),[d]),O.createElement("div",{className:"cdd-workspace-container",style:{backgroundColor:o},ref:a,"data-testid":"workspace-container"},O.createElement(ur,{ref:s}),O.createElement("div",{className:"cdd-workspace",ref:c,"data-testid":"workspace-scroll-container"},O.createElement("div",{className:"cdd-workspace-scroll-content",ref:l,"data-testid":"workspace-content"},n)))}));hr.displayName="Workspace";var pr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fr=function(e){function t(t){var n=e.call(this,t)||this;return n._workspace=O.createRef(),n.rafID=null,n.state={containerBackgroundColor:"transparent"},n.handleDocumentContentChanged=n.handleDocumentContentChanged.bind(n),n.handleNewDocument=n.handleNewDocument.bind(n),n.handleDocumentScaleChanged=n.handleDocumentScaleChanged.bind(n),n.handleDocumentSizeChanged=n.handleDocumentSizeChanged.bind(n),n.bindTextEditor=n.bindTextEditor.bind(n),n}return pr(t,e),Object.defineProperty(t.prototype,"instanceHub",{get:function(){return this.context.instanceHub},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chemDraw",{get:function(){return this.context.instanceHub.chemDraw},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"workspace",{get:function(){return this._workspace.current},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.chemDraw.drawDelegate=this,this.chemDraw.viewDelegate=this,this.chemDraw.addContentChangeListener(this.handleDocumentContentChanged),this.chemDraw.addNewDocumentListener(this.handleNewDocument),this.chemDraw.addScaleChangeListener(this.handleDocumentScaleChanged),this.chemDraw.addSizeChangeListener(this.handleDocumentSizeChanged),this.instanceHub.mouseEventSource.handler=new Zo(this.instanceHub),this.instanceHub.keyEventSource.handler=new Go(this.instanceHub),this.chemDraw.cdDoc&&this.chemDraw.processChange().catch()},t.prototype.componentWillUnmount=function(){this.chemDraw.drawDelegate=null,this.chemDraw.viewDelegate=null,this.chemDraw.removeContentChangeListener(this.handleDocumentContentChanged),this.chemDraw.removeNewDocumentListener(this.handleNewDocument),this.chemDraw.removeScaleChangeListener(this.handleDocumentScaleChanged),this.chemDraw.removeSizeChangeListener(this.handleDocumentSizeChanged),this.instanceHub.mouseEventSource.handler=null,this.instanceHub.keyEventSource.handler=null},t.prototype.render=function(){return O.createElement(hr,{containerBackgroundColor:this.state.containerBackgroundColor,onResize:this.handleWorkspaceSizeChanged.bind(this),onViewportChange:this.handleWorkspaceViewportChanged.bind(this),ref:this._workspace},O.createElement(cr,null),O.createElement(Jo,{content:this.instanceHub.canvasTooltipContent}),O.createElement(sr,{ref:this.bindTextEditor}))},t.prototype.configureWorkspace=function(){this.updateUI()},t.prototype.requestDraw=function(e){var t=this;this.rafID||(this.rafID=window.requestAnimationFrame((function(){t.rafID=null,t.draw()})))},t.prototype.draw=function(){var e=this.workspace.getContext(0);if(e){this.rafID&&(cancelAnimationFrame(this.rafID),this.rafID=null);var t=this.workspace.viewport;e.save(),e.scale(devicePixelRatio,devicePixelRatio),e.translate(-t.x,-t.y),this.instanceHub.chemDraw.cdDoc&&function(e,t,n){var o=e.getPort(),i=o.drawCallback,a=o.context;o.drawCallback=null,o.context=n;var s=new r.a.DocumentRenderer(e),c=new r.a.CurRect(t.y,t.x,lr.getMaxY(t),lr.getMaxX(t));try{s.drawRect(c),o.validate()}finally{s.delete(),c.delete(),o.drawCallback=i,o.context=a}}(this.instanceHub.chemDraw.cdDoc,t,e),e.restore()}},t.prototype.performWithTrackingPort=function(e){var t=this;this.performWithOverlayContext((function(n){var o=t.chemDraw.cdDoc.getPort(),r=o.context,i=o.drawCallback;o.context=n,o.drawCallback=null,e&&e(),o.context=r,o.drawCallback=i}))},t.prototype.getContainerSize=function(){return this.workspace.size},t.prototype.getVisibleClientRect=function(){return lr.toRectangle(this.workspace.viewport)},t.prototype.scrollClientRectToView=function(e){var t=this.workspace.viewport,n=mr(),o=this.workspace.viewport,r=o.x,i=o.y;e.top<t.y?i+=e.top-t.y:e.bottom>lr.getMaxY(t)&&(i+=e.bottom-lr.getMaxY(t)+n),e.left<t.x?r+=e.left-t.x:e.right>lr.getMaxX(t)&&(r+=e.right-lr.getMaxX(t)+n),this.workspace.setViewportPosition({x:r,y:i})},t.prototype.performWithOverlayContext=function(e){var t=this.workspace.getContext(1);if(t){var n=this.workspace.viewport;t.save();try{t.scale(devicePixelRatio,devicePixelRatio),t.translate(-n.x,-n.y),t.clearRect(n.x,n.y,n.width,n.height),e&&e(t)}finally{t.restore()}}},t.prototype.handleWorkspaceViewportChanged=function(e,t){if(!this.chemDraw.isViewOnly){var n=this.instanceHub.mouseEventSource,o=n.handler,r=n.lastMouseMoveEvent,i=n.lastMouseLocation;r&&i&&(t&&(i.x+=e.x-t.x,i.y+=e.y-t.y),n.isDragging?o.handleDrag(i,n.lastMouseMoveEvent):o.handleMove(i,n.lastMouseMoveEvent))}this.draw(),this.updateUI()},t.prototype.handleWorkspaceSizeChanged=function(e){var t=this;if(this.chemDraw.cdDoc){if(!this.chemDraw.preservePageInfo){this.chemDraw.removeSizeChangeListener(this.handleDocumentSizeChanged);try{this.chemDraw.withMutedContentChangeEvents((function(){var n,o=t.instanceHub.configurationManager.getConfig(),r=new Xn;r.autoFit=null!==(n=o.autoFit)&&void 0!==n?n:null;var i=r.resizeForView(t.chemDraw.cdDoc,e);t.workspace.contentSize=i}))}finally{this.chemDraw.addSizeChangeListener(this.handleDocumentSizeChanged)}}this.updateUI()}},t.prototype.updateUI=function(){var e=!!this._workspace.current&&this.workspace.contentSize.width>this.workspace.viewport.width;this.props.onScrollVisibilityChange(e),this.instanceHub.toolbarContainerController.updateLayout(this.workspace.size.width,this.workspace.size.height);var t=this.context.updateRootSize;t&&t()},t.prototype.handleNewDocument=function(){this.updateContainerBackgroundColor(this.chemDraw.cdDoc.backgroundColor),this.updateUI()},t.prototype.handleDocumentScaleChanged=function(e){this.chemDraw.preservePageInfo?this.handleScaleChangedForFixedPage(e):this.handleScaleChangedForDynamicPage(e)},t.prototype.handleScaleChangedForDynamicPage=function(e){var t=this.chemDraw.cdDoc,n=Jn.PAGE_PADDING,o=t.getMutableMainPage().getScale().internToCurPoint(e.center),i=t.contentBounds,a=this.workspace.size,s=new r.a.CurPoint(a.width/2,a.height/2,0),c=s.x-o.x,l=s.y-o.y,u=new pn(i.left+c,i.top+l,i.right+c,i.bottom+l);if(u.isEmpty||u.left>0&&u.right<a.width&&u.top>0&&u.bottom<a.height)t.performWithUndoModified((function(){t.moveObjects(new r.a.CurPoint(c,l,0))})),(new Xn).updatePageSize(t,a)||(this.workspace.contentSize=a);else{var d=Math.min(0,u.left),h=Math.max(a.width,u.right),p=Math.min(0,u.top),f=Math.max(a.height,u.bottom),m=d<0?n:0,g=p<0?n:0;t.performWithUndoModified((function(){t.moveObjects(new r.a.CurPoint(c-d+m,l-p+g,0))}));var y=h-d+2*n,b=f-p+2*n;(new Xn).updatePageSize(t,{width:y,height:b})||(this.workspace.contentSize={width:y,height:b});var v=-d+m,w=-p+g;this.workspace.setViewportPosition({x:v,y:w})}this.instanceHub.textEditorController.getTextEditor().updatePositionForDynamicPage()},t.prototype.handleScaleChangedForFixedPage=function(e){var t=this.chemDraw.cdDoc.getMutableMainPage().getScale().internToCurPoint(e.center),n=e.newContentSize.width,o=e.newContentSize.height;this.workspace.contentSize={width:n,height:o};var r=t.x-this.workspace.size.width/2,i=t.y-this.workspace.size.height/2;this.workspace.setViewportPosition({x:r,y:i})},t.prototype.handleDocumentSizeChanged=function(e){this.workspace.contentSize=e.newContentSize},t.prototype.handleDocumentContentChanged=function(e){if(!this.chemDraw.preservePageInfo&&"Magnification Change"!==e.action){this.chemDraw.removeSizeChangeListener(this.handleDocumentSizeChanged);try{var t=(new Xn).resizeForView(this.chemDraw.cdDoc,this.workspace.size);this.workspace.contentSize=t}finally{this.chemDraw.addSizeChangeListener(this.handleDocumentSizeChanged)}}this.updateContainerBackgroundColor(this.chemDraw.cdDoc.backgroundColor)},t.prototype.updateContainerBackgroundColor=function(e){var t=e.getHexRGB();this.instanceHub.configurationManager.getConfig().preservePageInfo||this.state.containerBackgroundColor===t||this.setState({containerBackgroundColor:t})},t.prototype.bindTextEditor=function(e){null!==e&&this.instanceHub.textEditorController.bind(e)},t.contextType=X.KK,t}(O.Component),mr=Bo()((function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="50px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var o=n.offsetWidth;return e.parentNode.removeChild(e),t-o})),gr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yr=function(){return(yr=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},br=function(e){function t(t){var n=e.call(this,t)||this;return n.rowCount=0,n.maxWidth=0,n.maxHeight=0,n.minWidth=0,n.minHeight=0,n._isMounted=!1,n.bindButtonGroup=function(e){e&&(n.buttonToolbar=e)},n.setGroupPresentTool=function(e,t){for(var o=0,r=n.chemDraw.toolsProps;o<r.length;o++){var i=r[o];if(i===e){i.tool=t,n.refresh();break}}},n.setSelectedTemplate=function(e,t){for(var o=0,r=n.chemDraw.toolsProps;o<r.length;o++){var i=r[o];if(i===e)return i.selectedTemplate=t,void n.refresh()}},n.chemDraw=n.props.instanceHub.chemDraw,n.chemDraw.initToolbarCallback=n.initToolbarCallback.bind(n),n.chemDraw.checkToolStateCallback=n.checkToolStateCallback.bind(n),n.chemDraw.initToolbar(n.props.instanceHub.configurationManager.getConfig(),n.props.instanceHub.toolLibrary),n}return gr(t,e),t.prototype.componentDidMount=function(){this.props.instanceHub.toolbarContainerController.bind(this),this._isMounted=!0},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.componentDidUpdate=function(){if(this.buttonToolbar){var e=this.props.instanceHub.configurationManager.getConfig().layout.orientation;"horizontal"===e?(this.buttonToolbar.style.minWidth=this.minWidth+"px",this.buttonToolbar.style.minHeight="100%"):"vertical"===e?(this.buttonToolbar.style.minWidth="100%",this.buttonToolbar.style.minHeight=this.minWidth+"px"):(this.buttonToolbar.style.minWidth="auto",this.buttonToolbar.style.minHeight="auto")}},t.prototype.refresh=function(){this._isMounted&&this.forceUpdate()},t.prototype.getWidth=function(){return"horizontal"===this.props.instanceHub.configurationManager.getConfig().layout.orientation?this.maxWidth:this.maxHeight},t.prototype.getHeight=function(){return"horizontal"===this.props.instanceHub.configurationManager.getConfig().layout.orientation?this.maxHeight:this.maxWidth},t.prototype.render=function(){var e,t=this,n=this.props.instanceHub.configurationManager.getConfig().layout.orientation,o=this.props.viewOnly?"hidden":"horizontal"===n?"horizontal":"vertical",r="horizontal"===n?"dock-top":"dock-left",i=[],a=[],s=function(e){i.push(O.createElement(gn.Z,{vertical:"horizontal"===n,key:"toolbar_group_"+e},a)),a=[]},c=0;this.chemDraw.toolsProps.forEach((function(e){if(a.length===t.rowCount&&s(c++),e instanceof kn){var o=e;if("always"===o.collapseOption||o.isCollapsed&&"auto"===o.collapseOption){var r="group_tool";o.subTools.forEach((function(e){r+="_"+e.tool.name})),a.push(O.createElement(Ln,yr({key:r+"_"+c++,toolbarOrientation:n,beforeSubToolClickHandled:function(e){t.setGroupPresentTool(o,e.props.tool)},viewOnly:t.props.viewOnly},e)))}else o.subTools.forEach((function(e){a.length===t.rowCount&&s(c++),a.push(O.createElement(Mn,yr({key:"group_sub_tool_"+e.tool.name+"_"+c++,beforeClickHandled:function(n){t.setGroupPresentTool(o,e.tool)}},e)))}))}else e instanceof Gn?a.push(O.createElement(Zn,yr({},e,{key:"single_tool_"+e.tool.name+"_"+c++,toolbarOrientation:n,beforeClickHandled:function(n){t.setSelectedTemplate(e,n)},viewOnly:t.props.viewOnly}))):a.push(O.createElement(Mn,yr({},e,{key:"single_tool_"+e.tool.name+"_"+c++})))})),0!==a.length&&s(c++);var l=x()(((e={"cdd-toolbar-container":!0})["cdd-toolbar-container-"+r]=!0,e["cdd-toolbar-container-"+o]=!0,e));return O.createElement("div",{id:"CDW_ToolBarContainer",className:l},O.createElement(yn.Z,{id:"CDW_ToolBar",className:"vertical"===n?"cdd-toolbar cdd-toolbar-vertical":"cdd-toolbar",ref:this.bindButtonGroup},O.createElement(gn.Z,{vertical:"vertical"===n},i)))},t.prototype.initToolbarCallback=function(e){this.rowCount=e,this.calculateMaxToolbarSize(),this.refresh()},t.prototype.calculateMaxToolbarSize=function(){var e=0,t=0;this.chemDraw.toolsProps.map((function(n){if(n instanceof kn){var o=n;"always"===o.collapseOption?(e++,t++):"auto"===o.collapseOption?(t++,o.subTools.map((function(t){e++}))):o.subTools.map((function(n){e++,t++}))}else e++,t++}));var n=this.props.instanceHub.configurationManager.getConfig().layout.orientation,o=document.createElement("div");o.className="cdd",o.style.width="auto",o.style.height="auto";var r=document.createElement("button");r.style.position="relative",r.style.visibility="hidden",r.className="cdd-tool-button btn btn-secondary";var i=document.createElement("div");i.className="cdd-tool-image",r.appendChild(i),o.appendChild(r),document.body.appendChild(o);var a=window.getComputedStyle(r),s=parseFloat(a.marginLeft.replace("px","")),c=parseFloat(a.marginRight.replace("px","")),l=parseFloat(a.marginTop.replace("px","")),u=parseFloat(a.marginBottom.replace("px","")),d=parseFloat(a.borderLeftWidth.replace("px","")),h=r.clientWidth+s+c+2*d;"vertical"===n&&(h+=2);var p=r.clientHeight+l+u+2*d;this.maxWidth=(Math.ceil(e/this.rowCount)+1)*h,this.maxHeight=p*this.rowCount,this.minWidth=Math.ceil(t/this.rowCount)*h,this.minHeight=p*this.rowCount,document.body.removeChild(o)},t.prototype.checkToolStateCallback=function(){this.refresh()},t}(O.Component),vr=n(79929),wr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getValue=function(){return t.checkBox.checked},t}return wr(t,e),t.prototype.render=function(){var e=this;return O.createElement(R,null,O.createElement("div",{"data-testid":"clipboard-tip"},Se.extensionIsAllowed()?"If you don't want to run this extension, please uncheck this option.":"If you want to run this extension again, please check the option below."),O.createElement("br",null),O.createElement(M.Z.Check,{id:"clipboard-permission-check",inline:!0,className:"cdd-dialog-input",label:"Allow extension to run",ref:function(t){e.checkBox=t},defaultChecked:Se.extensionIsAllowed()}))},t}(O.Component),Sr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkBox=null,t.onOK=function(e){t.checkBox&&Se.allowExtension(t.context.instanceHub,t.checkBox.getValue()),t.hide(),e.stopPropagation()},t}return Sr(t,e),t.prototype.render=function(){var e=this;return this.instructionContents=Le.generateClipboardInstructionContents(),this.clipboardPermissionCheckBox=Se.extendedClipboard?O.createElement(Cr,{ref:function(t){e.checkBox=t}}):void 0,O.createElement(I,{show:!0,onHide:this.hide},this.instructionContents,this.clipboardPermissionCheckBox,O.createElement(H,null,O.createElement(A.Z,{onClick:this.onOK,bsPrefix:"cdd-button",variant:"ok"},"OK")))},t}(Y),Dr=(0,Ho.Pi)((function(){var e=(0,X.SS)("ExtendedCopyPaste"),t=(0,O.useState)(!1),n=t[0],o=t[1];(0,vr.Z)("cdd_clipboard_icon_state",(function(e){o(e.detail)}));var r=(0,X.Nc)().dialogContainerController,i=(0,O.useCallback)((function(){r.show(O.createElement(Er,null))}),[r]),a=n?"Disable Extended Clipboard":"Enable Extended Clipboard";return O.createElement("div",{className:x()("CDW_ClipboardIcon cdd-clipboard-icon",{"cdd-clipboard-icon-hidden":!e}),onClick:i,role:"button",title:a},O.createElement("div",{className:x()("cdd-clipboard-icon-image",{"cdd-clipboard-icon-image-enabled":n,"cdd-clipboard-icon-image-disabled":!n})},O.createElement(Tr,null)))})),Tr=function(){return O.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32"},O.createElement("g",{fill:"currentColor",fillRule:"evenodd"},O.createElement("path",{d:"M23.624 25.852V8.349h-2.148v3.275H10.524V8.35H8.376v17.503h15.248zM16 6.2c-.297 0-.55.105-.76.314-.21.21-.314.463-.314.76s.105.55.314.76c.21.21.463.314.76.314s.55-.104.76-.314c.21-.21.314-.463.314-.76s-.105-.55-.314-.76a1.035 1.035 0 00-.76-.314zm7.624 0c.594 0 1.11.21 1.546.629.437.419.655.925.655 1.52v17.502c0 .593-.218 1.1-.655 1.52-.436.418-.952.628-1.546.628H8.376c-.594 0-1.11-.21-1.546-.629a2.03 2.03 0 01-.655-1.52V8.35c0-.594.218-1.1.655-1.52.436-.419.952-.628 1.546-.628h4.558A3.302 3.302 0 0114.1 4.616 3.092 3.092 0 0116 4c.716 0 1.35.205 1.9.616.55.41.938.939 1.166 1.585h4.558z"}),O.createElement("path",{d:"M19.012 18.594v-.861a.433.433 0 00-.43-.43H16.86v-1.721a.433.433 0 00-.43-.43h-.861a.433.433 0 00-.43.43v1.72h-1.722a.433.433 0 00-.43.431v.86c0 .236.195.43.43.43h1.721v1.722c0 .235.195.43.43.43h.861c.236 0 .43-.195.43-.43v-1.721h1.722c.235 0 .43-.195.43-.43zm2.151-.43A5.165 5.165 0 0116 23.326a5.165 5.165 0 01-5.163-5.164A5.165 5.165 0 0116 13a5.165 5.165 0 015.163 5.163z"})))},Pr=function(){return(Pr=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},xr=function(e){var t=e.instanceHub;return O.createElement("div",{className:"cdd-copy-document-button",title:"Copy document to clipboard",onClick:function(){t.chemDraw.copyDocumentToClipboard()},role:"button"},O.createElement(Or,null))},Or=function(e){return O.createElement("svg",Pr({width:32,height:32,viewBox:"0 0 32 32"},e),O.createElement("path",{d:"M23.8 25.852V8.349h-2.15v3.275H10.7V8.35H8.55v17.503H23.8zM16.174 6.2c-.297 0-.55.105-.76.314-.21.21-.315.463-.315.76s.105.55.315.76c.21.21.463.314.76.314s.55-.104.76-.314c.21-.21.314-.463.314-.76s-.105-.55-.315-.76a1.035 1.035 0 00-.76-.314zm7.624 0c.594 0 1.11.21 1.546.629.437.419.655.925.655 1.52v17.502c0 .593-.218 1.1-.655 1.52-.437.418-.952.628-1.546.628H8.55c-.594 0-1.109-.21-1.546-.629a2.03 2.03 0 01-.655-1.52V8.35c0-.594.219-1.1.655-1.52.437-.419.952-.628 1.546-.628h4.56a3.302 3.302 0 011.165-1.585 3.092 3.092 0 011.9-.616c.716 0 1.349.205 1.9.616.55.41.938.939 1.165 1.585h4.56z",fill:"currentColor",fillRule:"evenodd"}))},Ar=function(e){var t=e.workspaceHasScroll,n=(0,X.cy)().instanceHub,o=(0,X.SS)("CopyDocumentButton"),r=n.chemDraw.isViewOnly&&o;return O.createElement("div",{className:"cdd-clipboard-icon-container"},O.createElement("div",{className:x()("cdd-clipboard-icon-row-container",{"cdd-clipboard-icon-row-container-with-scroll":t})},O.createElement(Dr,null),r&&O.createElement(xr,{instanceHub:n})))},Mr=(0,Ho.Pi)((function(e){var t=e.onChemDrawPanelAttach,n=(0,X.cy)().instanceHub,o=n.configurationManager.getConfig().layout.orientation,r=O.useState(!1),i=r[0],a=r[1],s=(0,O.useCallback)((function(e){a(e)}),[]);return O.createElement("div",{className:x()("cdd-main-panel",{"flex-column":"horizontal"===o})},O.createElement(br,{instanceHub:n,viewOnly:n.chemDraw.isViewOnly}),O.createElement("div",{className:"cdd-chemdraw-panel-container"},O.createElement(fr,{onScrollVisibilityChange:s,ref:t}),O.createElement(Ar,{workspaceHasScroll:i}),O.createElement(jo,null)))})),_r=n(84956),kr=n(89331),Lr=function(){return(Lr=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ir=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Rr=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Hr=(0,O.createContext)({});function Nr(e){return Ir(this,void 0,void 0,(function(){var t;return Rr(this,(function(n){switch(n.label){case 0:return[4,Br(Wr(e))];case 1:return t=n.sent(),[2,function(n){var o=n.children;return O.createElement(Fr,{configurationManager:e,preloadedPlugins:t},o)}]}}))}))}var Fr=function(e){var t=e.configurationManager,n=e.children,r=function(e,t){var n=(0,_r.Z)(),r=(0,kr.Z)(t),i=r[0],a=r[1];return(0,O.useEffect)((function(){return(0,o.U5)((function(){return Wr(e)}),(function(e){Br(e,i()).then((function(e){n()&&a(e)})).catch((function(){}))}))}),[]),i()}(t,e.preloadedPlugins);return O.createElement(Hr.Provider,{value:r},n)},jr=Hr.Consumer;function Wr(e){return{inspector:e.isFeatureEnabled("Inspector"),helmEditor:e.isFeatureEnabled("HELMEditor")}}function Br(e,t){return void 0===t&&(t={}),Ir(this,void 0,void 0,(function(){var n,o,r;return Rr(this,(function(i){switch(i.label){case 0:return n=Lr({},t),e.inspector?n.inspector?[3,2]:(o=n,[4,Vr()]):[3,3];case 1:o.inspector=i.sent(),i.label=2;case 2:return[3,4];case 3:n.inspector=null,i.label=4;case 4:return e.helmEditor?n.helmEditor?[3,6]:(r=n,[4,Ur()]):[3,7];case 5:r.helmEditor=i.sent(),i.label=6;case 6:return[3,8];case 7:n.helmEditor=null,i.label=8;case 8:return[2,n]}}))}))}function Vr(){return Ir(this,void 0,void 0,(function(){var e;return Rr(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,n.e(949).then(n.bind(n,73))];case 1:return[2,t.sent().InspectorPanel];case 2:return e=t.sent(),console.warn("The Inspector panel could not be loaded:",e instanceof Error?e.message:"An unkown error occurred"),[3,3];case 3:return[2,null]}}))}))}function Ur(){return Ir(this,void 0,void 0,(function(){var e;return Rr(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Promise.all([n.e(261),n.e(489)]).then(n.bind(n,22922))];case 1:return[2,t.sent().HELMEditorPanel];case 2:return e=t.sent(),console.warn("The HELM editor could not be loaded:",e instanceof Error?e.message:"An unkown error occurred"),[3,3];case 3:return[2,null]}}))}))}var zr=n(45509),Gr=function(){return(Gr=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Zr={mainPanel:80,rightPanel:20},Kr=function(e){var t=e.mainPanel,n=e.rightAccessoryPanel,o=e.parentWidth,r=function(){var e=(0,X.Nc)(),t=(0,O.useState)((function(){return Gr({},e.persistenceManager.get("panelLayout",{panelWidths:Zr,rightPanelState:"open"}))})),n=t[0],o=t[1];return[n,(0,O.useCallback)((function(t){o(t),e.persistenceManager.save("panelLayout",t)}),[n])]}(),i=r[0],a=r[1],s=(0,O.useMemo)((function(){return Xr(.25)}),[]),c=(0,O.useMemo)((function(){return Xr(3)}),[]),l=(0,O.useCallback)((function(e){a(Gr(Gr({},i),{rightPanelState:e}))}),[i]),u=(0,O.useCallback)((function(e){var t=e[0],n=e[1];a(Gr(Gr({},i),{panelWidths:{mainPanel:t,rightPanel:n}}))}),[i]),d=(0,O.useCallback)((function(e,t,n){return{pointerEvents:"open"===i.rightPanelState?"auto":"none",width:t+"px"}}),[i]),h=(0,O.useCallback)((function(e,t,n,o){var r=0===o?Zr.mainPanel:Zr.rightPanel;return{width:"calc("+(Math.round(t)===r?r:t)+"%)"}}),[]),p=(0,O.useCallback)((function(){function e(e){return o*e/100}return"collapsed"===i.rightPanelState?{defaultInPercent:0,minimumInPixels:c,maximumInPixels:c}:{defaultInPercent:i.panelWidths.rightPanel,minimumInPixels:e(Zr.rightPanel),maximumInPixels:2*e(Zr.rightPanel)}}),[i,o])();return O.createElement(zr.Z,{sizes:[100-p.defaultInPercent,p.defaultInPercent],minSize:[p.minimumInPixels,p.minimumInPixels],maxSize:[o,p.maximumInPixels],gutterSize:s,gutterAlign:"center",direction:"horizontal",className:"Split",gutterStyle:d,elementStyle:h,snapOffset:0,onDrag:u,onDragEnd:u},O.createElement(t,null),O.createElement(Ro,{id:"cdd-right-accessory-panel"},O.createElement(n,{onStateChange:l,state:i.rightPanelState})))};function Xr(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}var qr,Yr=function(e){var t=e.onChemDrawPanelAttach,n=(0,Io.Z)(),o=n[0],r=n[1].width,i=(0,O.useCallback)((function(){return O.createElement(Mr,{onChemDrawPanelAttach:t})}),[t]);return O.createElement("div",{ref:o,className:"cdd-panel-root"},O.createElement(jr,null,(function(e){var t=e.helmEditor;return O.createElement(Ro,{id:"cdd-left-accessory-panel"},t?O.createElement(t,null):null)})),O.createElement(jr,null,(function(e){var t=e.inspector;return t?O.createElement(Kr,{mainPanel:i,rightAccessoryPanel:t,parentWidth:r}):O.createElement(i,null)})))},Jr=function(){var e=(0,X.cy)().instanceHub,t=e.dialogContainerController,n=(0,rt.Z)();return(0,O.useEffect)((function(){return t.addVisibilityChangeListener((function(){n(),t.isShowing()||e.eventPanelController.setFocus()})),function(){t.removeVisibilityChangeListener(n)}}),[t,e]),O.createElement("div",{className:"cdd-dialog-container"},t.render())},Qr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$r=function(e){function t(t){var n=e.call(this,t)||this;return n.state={visible:!1,message:""},n}return Qr(t,e),t.prototype.render=function(){var e=x()({"cdd-progress-indicator":!0,"cdd-progress-indicator-shown":this.state.visible,"cdd-progress-indicator-hidden":!this.state.visible});return O.createElement("div",{className:e},O.createElement("div",{className:"sk-three-bounce"},O.createElement("div",{className:"sk-child sk-bounce1"}),O.createElement("div",{className:"sk-child sk-bounce2"}),O.createElement("div",{className:"sk-child sk-bounce3"})),O.createElement("div",{className:"cdd-progress-indicator-message"},this.state.message||""))},t.prototype.show=function(e){this.setState({visible:!0,message:e})},t.prototype.hide=function(){this.setState({visible:!1,message:""})},t}(O.Component),ei=n(88375),ti=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ni=function(e){function t(t){var n=e.call(this,t)||this;return n.onCancel=function(e,t){n.props.instanceHub.messagePresenterController.hide(),t.stopPropagation()},n.state={level:J.INFO,visible:!1,text:""},n}return ti(t,e),t.prototype.render=function(){var e;switch(this.state.level){case J.INFO:e="info";break;case J.WARN:e="warning";break;case J.ERROR:e="danger";break;default:e="info"}return O.createElement("div",{className:"cdd-message-presenter"},this.state.visible?O.createElement("div",{className:"cdd-message"},O.createElement(ei.Z,{variant:e,dismissible:!0,onClose:this.onCancel,className:"cdd-message-body"},O.createElement("span",null,this.state.text))):null)},t.prototype.show=function(e,t){this.setState({level:e,visible:!0,text:t})},t.prototype.hide=function(){this.setState({visible:!1,text:""})},t}(O.Component),oi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ri=function(e){function t(t){var n=e.call(this,t)||this;return n.root=O.createRef(),n.mouseDown=function(e){if(!n.props.instanceHub.chemDraw.isViewOnly&&!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){var t=window.pageXOffset,o=window.pageYOffset;n.props.instanceHub.eventPanelController.setFocus(),window.scrollTo(t,o),e.preventDefault()}},n.updateRootSize=function(){var e=n.props.instanceHub,t=e.toolbarContainerController.getToolbarContainer().minWidth,o=e.configurationManager.getConfig().layout.orientation,r=e.chemDraw.isViewOnly,i=n.root.current;if(i)if(r)i.style.minWidth,i.style.minWidth="auto",i.style.minHeight="auto";else if("horizontal"===o){var a=40;i.style.minWidth=t+a+"px",i.style.minHeight="auto"}else a=10,i.style.minWidth="auto",i.style.minHeight=t+a+"px"},n.bindMessagePresenter=n.bindMessagePresenter.bind(n),n.bindProgressIndicator=n.bindProgressIndicator.bind(n),n.handleChemDrawPanelAttach=n.handleChemDrawPanelAttach.bind(n),n.state={viewOnly:t.instanceHub.chemDraw.isViewOnly},t.instanceHub.chemDraw.viewOnlyCallback=function(e){n.setState({viewOnly:e}),n.chemDrawPanel.configureWorkspace()},n}return oi(t,e),t.prototype.render=function(){return O.createElement(X.KK.Provider,{value:{instanceHub:this.props.instanceHub,updateRootSize:this.updateRootSize.bind(this)}},O.createElement("div",{className:"cdd cddroot",onMouseDown:this.mouseDown,ref:this.root},O.createElement($r,{ref:this.bindProgressIndicator}),O.createElement(ni,{instanceHub:this.props.instanceHub,ref:this.bindMessagePresenter}),O.createElement(Jr,null),O.createElement(Yr,{onChemDrawPanelAttach:this.handleChemDrawPanelAttach})))},t.prototype.handleChemDrawPanelAttach=function(e){this.chemDrawPanel=e},t.prototype.bindProgressIndicator=function(e){null!==e&&this.props.instanceHub.progressIndicatorController.bind(e)},t.prototype.bindMessagePresenter=function(e){null!==e&&this.props.instanceHub.messagePresenterController.bind(e)},t}(O.Component),ii=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ai=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},si=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ci=function(){function e(e){this.instanceHub=e,this.data="",this.dataFormat="",this.chemDraw=null}return e.prototype.setContainer=function(e){this.container=e},e.prototype.setDocument=function(e,t){this.data=e,this.dataFormat=t},e.prototype.getChemDrawComponent=function(){return this.chemDraw},e.prototype.execute=function(){return ai(this,void 0,void 0,(function(){return si(this,(function(e){switch(e.label){case 0:return[4,this.renderChemDraw()];case 1:if(e.sent(),!this.chemDraw)throw new Error("Failed to initialize ChemDraw JS");return this.chemDraw.chemDrawPanel.configureWorkspace(),this.instanceHub.chemDraw.newDocument(this.data,this.dataFormat),[2]}}))}))},e.prototype.renderChemDraw=function(){return ai(this,void 0,void 0,(function(){var e,t=this;return si(this,(function(n){switch(n.label){case 0:if(!this.container)throw new Error("Could not mount ChemDraw without DOM element");return[4,Nr(this.instanceHub.configurationManager)];case 1:return e=n.sent(),[2,new Promise((function(n){qt.render(O.createElement(e,null,O.createElement(ri,{ref:function(e){t.chemDraw=e},instanceHub:t.instanceHub})),t.container,(function(){n()}))}))]}}))}))},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.InstanceHub),function(e,o){n(e,o,t)}),ii("design:paramtypes",[D])],e);var t,n}(),li=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ui="cddCorePreferencesChanged",di=function(){function e(e){var t=this;this.execute=function(){return new Promise((function(e,n){var o,i;t.instanceHub.configurationManager.getConfig().featuresInternal.forEach((function(e,n){var o=t.getPreferenceKey(n.toString());o&&r.a.setPreferenceValue(o,e)}));var a=null!==(i=null===(o=t.instanceHub.configurationManager.getConfig().properties)||void 0===o?void 0:o.aromaticDisplay)&&void 0!==i?i:"none";if("alternating"===a||"aromatic"===a){r.a.setPreferenceValue(r.a.PreferenceNormalizeKekulizationOnOpening,1);var s="aromatic"===a?1:0;r.a.setPreferenceValue(r.a.PreferenceKekuleStyle,s)}else"none"===a&&r.a.setPreferenceValue(r.a.PreferenceNormalizeKekulizationOnOpening,0);var c=document.createEvent("CustomEvent");c.initCustomEvent(ui,!0,!1,!0),window.dispatchEvent(c),e()}))},this.getPreferenceKey=function(e){switch(e){case"ShowWarnValence":return r.a.PreferenceShowWarnValence;case"ShowWarnParens":return r.a.PreferenceShowWarnParens;case"ShowWarnIsotopes":return r.a.PreferenceShowWarnIsotopes;case"ShowWarnStrayBonds":return r.a.PreferenceShowWarnStrayBonds;case"ShowWarnStrayAtoms":return r.a.PreferenceShowWarnStrayAtoms;case"ShowWarnUndefinedStereo":return r.a.PreferenceShowWarnUndefinedStereo;case"ShowWarnAmbigStereo":return r.a.PreferenceShowWarnAmbigStereo;case"ShowWarnStereoBtw":return r.a.PreferenceShowWarnStereoBtw;case"ShowWarnLinearAtoms":return r.a.PreferenceShowWarnLinearAtoms;case"ShowWarnHydrogenBonds":return r.a.PreferenceShowWarnHydrogenBonds;case"ShowWarnMisc":return r.a.PreferenceShowWarnMisc;case"AlwaysShowReactionMapping":return r.a.PreferenceShowReactionMap;case"AutomaticReactionMapping":return r.a.PreferenceAutoReactionMap;default:return}},this.instanceHub=e;var n=function(){t.instanceHub&&t.instanceHub.chemDraw&&t.instanceHub.chemDraw.redraw()};window.addEventListener(ui,n),e.eventEmitter.on("dispose",(function(){window.removeEventListener(ui,n)}))}return function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.InstanceHub),function(e,o){n(e,o,t)}),li("design:paramtypes",[D])],e);var t,n}(),hi=n(38429),pi=n(58385),fi=n(45493),mi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},gi=function(){function e(e){this.configurationManager=e,this.cdxmlMap=new Map([["New Document",pi],["ACS Document 1996",hi],["Sequence Graphic Monomers",fi]]),this.MIN_BOND_LENGTH=21.6}return e.prototype.applyConfiguredStyle=function(e){var t=this.configurationManager.getConfig().properties.styleSheet;if(t){var n=this.getCDXMLForStyle(t);if(n){r.a.ReadDocumentAPI.readCDXML(e,n);var o=this.getDefaultZoomLevelForCurrentStyle();o>1&&e.getZoomLevel()<o&&e.performWithUndoDisabled((function(){e.setZoomLevel(o)}))}else console.warn('Style "'+t+'" is not supported.')}},e.prototype.getDefaultZoomLevelForCurrentStyle=function(){var e=this.configurationManager.getConfig().properties.styleSheet;return e&&e.toUpperCase()==="ACS Document 1996".toUpperCase()?1.5:1},e.prototype.getDefaultZoomLevelForDocument=function(e){var t=e.getSetting(r.a.CDXDatumID.BondLength)/20;if(t<this.MIN_BOND_LENGTH){var n=this.MIN_BOND_LENGTH/t;return Math.round(100*n)/100}return 1},e.prototype.getCDXMLForStyle=function(e){var t="";if(e)for(var n=e.toUpperCase(),o=this.cdxmlMap.keys(),r=o.next();!r.done;r=o.next())if(r.value.toUpperCase()===n){t=this.cdxmlMap.get(r.value);break}return t},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.ConfigurationManager),function(e,o){n(e,o,t)}),mi("design:paramtypes",[Mo])],e);var t,n}(),yi=n(81354),bi=n.n(yi),vi=function(){function e(){}return e.getAttr=function(e,t){var n=e.attributes.getNamedItem(t);return n?n.nodeValue:void 0},e.setAttr=function(e,t,n){var o=e.attributes.getNamedItem(t);o&&(o.nodeValue=n)},e}(),wi=function(){var e=this;this.software="",this.id="",this.version="",this.licensee="",this.expirationDate="",this.comment="",this.signature="",this.validFrom="",this.getSoftware=function(){return e.software},this.setSoftware=function(t){e.software=t},this.getVersion=function(){return e.version},this.setVersion=function(t){e.version=t},this.getLicensee=function(){return e.licensee},this.setLicensee=function(t){e.licensee=t},this.getExpirationDate=function(){return e.expirationDate},this.setExpirationDate=function(t){e.expirationDate=t},this.getId=function(){return e.id},this.setId=function(t){e.id=t},this.getComment=function(){return e.comment},this.setComment=function(t){e.comment=t},this.getSignature=function(){return e.signature},this.setSignature=function(t){e.signature=t},this.getValidFrom=function(){return e.validFrom},this.setValidFrom=function(t){e.validFrom=t}},Ci=function(e){var t=this;this.parse=function(){var e=new wi,n=t.getLicenseNode(t.xml),o=vi.getAttr(n,"Version");e.setVersion(o);for(var r=n.childNodes,i=0,a=r.length;i<a;i++){var s=r.item(i),c=s.nodeName.toLowerCase();"Field".toLowerCase()===c?t.extractField(s,e):"Signature".toLowerCase()===c&&t.extractSignature(s,e)}return e},this.extractField=function(e,t){var n=vi.getAttr(e,"Name").toLowerCase(),o=vi.getAttr(e,"Value");"Software".toLowerCase()===n?t.setSoftware(o):"Licensee".toLowerCase()===n?t.setLicensee(o):"Expiration Date".toLowerCase()===n?t.setExpirationDate(o):"ID".toLowerCase()===n?t.setId(o):"Comment".toLowerCase()===n?t.setComment(o):"Valid From".toLowerCase()===n&&t.setValidFrom(o)},this.extractSignature=function(e,t){var n=vi.getAttr(e,"Value");t.setSignature(n)},this.getLicenseNode=function(e){return e.getElementsByTagName("License").item(0)},this.xml=(new DOMParser).parseFromString(e,"text/xml")},Si=function(){function e(t){var n=this;this.validate=function(){return new Promise((function(e,t){var o=new Ci(n.licenseText).parse();n.verifySignature(o.getSignature()),n.verifyExpireDate(o.getExpirationDate()).then((function(){e(o)})).catch((function(e){t(e)}))}))},this.verifySignature=function(t){var o=n.cleanupLicense(n.licenseText),r=bi().HmacSHA1(o,e.KEY);if(bi().enc.Base64.stringify(r)!==t)throw new Error(e.INVALID_LICENSE_ERROR)},this.verifyExpireDate=function(t){return new Promise((function(n,o){if(void 0!==t&&e.LICENSE_UNLIMITED.toLowerCase()!==t.toLowerCase()){var r=new Date(t);if((new Date).getTime()-r.getTime()>e.ONE_DAY_MILLIS_TIME)throw new Error(e.LICENSE_EXPIRES_ERROR);var i=re.W.join(re.W.basePath,"clear.cache.gif");n(se.fetch(i,{headers:{pragma:"no-cache","cache-control":"no-cache"}}).catch((function(e){return e.response})).then((function(t){if(null!=t&&new Date(t.headers.get("Date")).getTime()-r.getTime()>e.ONE_DAY_MILLIS_TIME)throw new Error(e.LICENSE_EXPIRES_ERROR)})))}else n()}))},this.cleanupLicense=function(t){var n=t.replace(e.NEWLINE_PATTERN,"");return n.replace(e.SIGNATURE_TAG_PATTERN,"$1$3")},this.licenseText=t}return e.KEY="ChemDraw Direct by PerkinElmer.",e.INVALID_LICENSE_ERROR="License is not valid",e.LICENSE_EXPIRES_ERROR="License has expired",e.NEWLINE_PATTERN=new RegExp("\\r?\\n","g"),e.SIGNATURE_TAG_PATTERN=new RegExp('(<Signature\\s+Value=")(\\S*)("\\s*/>)'),e.LICENSE_UNLIMITED="Unlimited",e.ONE_DAY_MILLIS_TIME=864e5,e}(),Ei=["scienceaccelerated.com","perkinelmer.cloud","perkinelmer.com"],Di=function(){function e(){var e=this;this.licenseText="",this.licenseUrl="",this.setLicenseText=function(t){e.licenseText=t},this.setLicenseUrl=function(t){e.licenseUrl=t},this.validateLicense=function(){return new Promise((function(t,n){var o=location.hostname.split(".").slice(-2).join(".");Ei.indexOf(o)>=0?t():e.licenseUrl?e.retrieveLicense(e.licenseUrl,t,n):e.licenseText?e.validate(e.licenseText,t,n):n(new Error("License file content or URL must be provided."))}))},this.getLicense=function(){return e.license},this.validate=function(t,n,o){t?new Si(t).validate().then((function(t){e.license=t,n(t)})).catch((function(e){o(e)})):o(new Error("License file is empty"))},this.retrieveLicense=function(t,n,o){se.getWithCache(t).then((function(t){e.validate(t,n,o)})).catch((function(e){o(new Error("Failed to get license file. Reason: "+e.statusText+"."))}))}}return function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)()],e)}(),Ti=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pi=function(){function e(){this.content=null,this._dialogType="document",this.onClose=new dn.MZ,this.onShow=new dn.MZ,this.onVisibilityChange=dn.MZ.merge(this.onShow,this.onClose)}return Object.defineProperty(e.prototype,"dialogType",{get:function(){return this._dialogType},enumerable:!1,configurable:!0}),e.prototype.isShowing=function(){return!!this.content},e.prototype.show=function(e,t){var n;void 0===t&&(t={}),this.content=e,this._dialogType=null!==(n=t.dialogType)&&void 0!==n?n:"document",this.onShow.dispatch()},e.prototype.showAsync=function(e,t){return void 0===t&&(t={}),n=this,o=void 0,i=function(){var n,o,r;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(i){switch(i.label){case 0:return this.show(e,t),[4,this.onClose.promisify()];case 1:if(n=i.sent(),o=n.error,r=n.value,o)throw o;return[2,r]}}))},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}c((i=i.apply(n,o||[])).next())}));var n,o,r,i},e.prototype.hide=function(){this.handleDismiss({value:void 0})},e.prototype.addVisibilityChangeListener=function(e){this.onVisibilityChange.add(e)},e.prototype.removeVisibilityChangeListener=function(e){this.onVisibilityChange.remove(e)},e.prototype.render=function(){var e=this;return O.createElement(_.Provider,{value:{onCancel:function(){return e.handleDismiss({error:new E})},onClose:function(t){return e.handleDismiss({value:t})}}},this.content)},e.prototype.isDialogType=function(e){return!(!this.content||!this.content)&&this.content.type===e},e.prototype.handleDismiss=function(e){this.content&&(this.content=null,this.onClose.dispatch(e))},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),Ti("design:paramtypes",[])],e)}(),xi=function(){function e(){}return e.prototype.getEventPanel=function(){return this.eventPanel},e.prototype.bind=function(e){this.eventPanel=e},e.prototype.setFocus=function(){if(this.eventPanel)if("function"==typeof this.eventPanel.setActive)try{this.eventPanel.setActive()}catch(e){this.eventPanel.focus()}else this.eventPanel.focus()},e.prototype.setCursorVisible=function(e){this.eventPanel&&(this.eventPanel.style.cursor=e?"default":"none")},e.prototype.setCursorByID=function(e){if(this.eventPanel)if(0===e)this.eventPanel.style.cursor="default";else{var t=re.W.basePath+"/cursors/bin"+e+".cur";this.eventPanel.style.cursor="url("+t+"), default"}},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)()],e)}(),Oi=function(){function e(){this.showAttempts=0}return e.prototype.bind=function(e){this.indicator=e},e.prototype.show=function(e){this.indicator&&(this.showAttempts++,this.indicator.show(e))},e.prototype.showAsync=function(e){return t=this,n=void 0,r=function(){return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return this.indicator?(this.showAttempts++,this.indicator.show(e),[4,new Promise((function(e){requestAnimationFrame((function(){requestAnimationFrame(e)}))}))]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}c((r=r.apply(t,n||[])).next())}));var t,n,o,r},e.prototype.hide=function(){this.indicator&&(this.showAttempts>0&&this.showAttempts--,0===this.showAttempts&&this.indicator.hide())},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)()],e)}(),Ai=function(){function e(){}return e.prototype.bind=function(e){this.editor=e},e.prototype.getTextEditor=function(){return this.editor},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)()],e)}(),Mi=function(){function e(){}return e.prototype.bind=function(e){this.toolbarContainer=e},e.prototype.updateLayout=function(e,t){for(var n=this.toolbarContainer.getWidth()>=e||this.toolbarContainer.getHeight()>=t,o=0,r=this.toolbarContainer.chemDraw.toolsProps;o<r.length;o++){var i=r[o];i instanceof kn&&(i.isCollapsed=n)}this.toolbarContainer.refresh()},e.prototype.getToolbarContainer=function(){return this.toolbarContainer},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)()],e)}(),_i=n(78052),ki=n.n(_i),Li=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(e){e[e.REPLACE=0]="REPLACE",e[e.INSERT=1]="INSERT",e[e.CANCEL=2]="CANCEL"}(qr||(qr={}));var Ii=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onReplace=function(e){t.props.onReturn(qr.REPLACE),t.hide(),e.stopPropagation()},t.onInsert=function(e){t.props.onReturn(qr.INSERT),t.hide(),e.stopPropagation()},t.onCancel=function(e){t.props.onReturn(qr.CANCEL),t.hide(),e.stopPropagation()},t}return Li(t,e),t.prototype.render=function(){return O.createElement(I,{show:!0,onHide:this.hide,dialogClassName:"cdd-dialog-guide"},O.createElement(R,null,"Do you want to replace your current document or add the file contents to it?"),O.createElement(H,null,O.createElement(A.Z,{onClick:this.onReplace,bsPrefix:"cdd-button",variant:"danger"},"Replace"),O.createElement(A.Z,{onClick:this.onInsert,bsPrefix:"cdd-button",variant:"ok"},"Insert"),O.createElement(A.Z,{onClick:this.onCancel,bsPrefix:"cdd-button",variant:"cancel"},"Cancel")))},t}(Y),Ri=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Hi=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ni=function(){function e(e,t){this.instanceHub=e,this.monomerService=t,this.actionType=qr.REPLACE}return e.prototype.getExtension=function(e){if(!e)throw new Error("Can't read this file.");var t=e.name,n=t.lastIndexOf(".");if(-1===n)throw new Error("File does not have an extension: "+t);return t.substring(n+1)},e.prototype.askForDiscard=function(){var e=this;return new Promise((function(t,n){if(e.instanceHub.chemDraw.cdDoc.isEmpty())e.actionType=qr.REPLACE,t();else{var o=O.createElement(Ii,{onReturn:function(o){e.actionType=o,o===qr.CANCEL?n():t()}});e.instanceHub.dialogContainerController.show(o)}}))},e.prototype.handle=function(e){return Ri(this,void 0,void 0,(function(){var t,n;return Hi(this,(function(o){switch(o.label){case 0:return t=ki().convert(new Uint8Array(e),"UTF8"),n=Vt.fromByteArray(t),[4,this.readToDocument(n)];case 1:return o.sent(),[2]}}))}))},e.prototype.readToDocument=function(e){return Ri(this,void 0,void 0,(function(){var t,n,o;return Hi(this,(function(i){switch(i.label){case 0:t=this.getType(),n=this.instanceHub.chemDraw.cdDoc,i.label=1;case 1:return i.trys.push([1,3,4,5]),this.actionType===qr.REPLACE?(r.a.ReadDocumentAPI.replaceFrom(n,e,t),this.instanceHub.chemDraw.autoFitToContainer()):this.actionType===qr.INSERT&&r.a.ReadDocumentAPI.insertFrom(n,e,t),this.instanceHub.configurationManager.getConfig().autoFit||this.instanceHub.chemDraw.preservePageInfo||this.instanceHub.chemDraw.resizeToContainer(),[4,T.Z(this.instanceHub.chemDraw.cdDoc,this.monomerService)];case 2:return i.sent(),[3,5];case 3:throw o=i.sent(),qe.l.getError(o);case 4:return this.instanceHub.chemDraw.processChange(!0),[7];case 5:return[2]}}))}))},e}(),Fi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ji=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fi(t,e),t.prototype.canHandle=function(e){return"cdx"===this.getExtension(e).toLocaleLowerCase()},t.prototype.getType=function(){return"chemical/x-cdx"},t.prototype.handle=function(e){return t=this,n=void 0,r=function(){var t,n;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(o){return t=new Uint8Array(e),n=h.fromByteArray(t),this.readToDocument(n),[2]}))},new((o=void 0)||(o=Promise))((function(e,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}c((r=r.apply(t,n||[])).next())}));var t,n,o,r},t}(Ni),Wi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wi(t,e),t.prototype.canHandle=function(e){return"cdxml"===this.getExtension(e).toLocaleLowerCase()},t.prototype.getType=function(){return"chemical/x-cdxml"},t}(Ni),Vi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ui=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vi(t,e),t.prototype.canHandle=function(e){return"mol"===this.getExtension(e).toLocaleLowerCase()},t.prototype.getType=function(){return"chemical/x-mdl-molfile"},t}(Ni),zi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zi(t,e),t.prototype.canHandle=function(e){var t=this.getExtension(e).toLocaleLowerCase();return"smi"===t||"smiles"===t},t.prototype.getType=function(){return"chemical/x-daylight-smiles"},t}(Ni),Zi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ki=function(e,t){return function(n,o){t(n,o,e)}},Xi=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},qi=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Yi=function(){function e(e,t){var n=this;this.instanceHub=e,this.monomerService=t,this.handlers=[],this.onDragEnter=function(e){e.stopPropagation(),e.preventDefault()},this.onDragOver=function(e){e.stopPropagation(),e.preventDefault();for(var t=0,n=e.dataTransfer.types;t<n.length;t++)if("Files"===n[t])return e.dataTransfer.dropEffect="copy",void(e.dataTransfer.effectAllowed="copy");e.dataTransfer.dropEffect="none",e.dataTransfer.effectAllowed="none"},this.onDragLeave=function(e){e.stopPropagation(),e.preventDefault()},this.onDrop=function(e){e.stopPropagation(),e.preventDefault(),Xi(n,void 0,void 0,(function(){var t,n;return qi(this,(function(o){switch(o.label){case 0:if(o.trys.push([0,6,,7]),!((t=e.dataTransfer.files).length>0)||this.instanceHub.chemDraw.isViewOnly)return[3,5];o.label=1;case 1:return o.trys.push([1,,4,5]),[4,this.instanceHub.progressIndicatorController.showAsync()];case 2:return o.sent(),[4,this.processFiles(t)];case 3:return o.sent(),[3,5];case 4:return this.instanceHub.progressIndicatorController.hide(),[7];case 5:return[3,7];case 6:return n=o.sent(),this.showError(n.message),[3,7];case 7:return[2]}}))}))},this.addHandler(new Gi(e,t)),this.addHandler(new Ui(e,t)),this.addHandler(new Bi(e,t)),this.addHandler(new ji(e,t))}return e.prototype.registerEventOnElement=function(e){var t=this;return e.addEventListener("dragenter",this.onDragEnter),e.addEventListener("dragover",this.onDragOver),e.addEventListener("dragleave",this.onDragLeave),e.addEventListener("drop",this.onDrop),function(){e.removeEventListener("dragenter",t.onDragEnter),e.removeEventListener("dragover",t.onDragOver),e.removeEventListener("dragleave",t.onDragLeave),e.removeEventListener("drop",t.onDrop)}},e.prototype.addHandler=function(e){this.handlers.push(e)},e.prototype.readFile=function(e){return new Promise((function(t,n){var o=new FileReader;o.onload=function(){t(o.result)},o.onerror=function(){var t;return n((null===(t=o.error)||void 0===t?void 0:t.message)||"Failed to read file "+e.name)},o.readAsArrayBuffer(e)}))},e.prototype.processFiles=function(e){return Xi(this,void 0,void 0,(function(){var t,n,o,r,i,a,s;return qi(this,(function(c){switch(c.label){case 0:if(0===(t=e.item(0)).size)throw new Error("Cannot read directory or empty file: "+t.name);n=!1,c.label=1;case 1:c.trys.push([1,8,,9]),o=0,r=this.handlers,c.label=2;case 2:return o<r.length?(i=r[o]).canHandle(t)?(n=!0,[4,i.askForDiscard()]):[3,6]:[3,7];case 3:return c.sent(),[4,this.readFile(t)];case 4:return a=c.sent(),[4,i.handle(a)];case 5:return c.sent(),[3,7];case 6:return o++,[3,2];case 7:return[3,9];case 8:if((s=c.sent())&&s.message)throw qe.l.getError(s);return[3,9];case 9:if(!n)throw new Error("Not supported file: "+t.name);return[2]}}))}))},e.prototype.showError=function(e){this.instanceHub.messagePresenterController.error(e)},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),Ki(0,(0,p.f3)(w.InstanceHub)),Ki(1,(0,p.f3)(w.MonomerService)),Zi("design:paramtypes",[D,Object])],e)}(),Ji=n(42441),Qi=n.n(Ji),$i=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.equals=function(e){return!!e&&this.x===e.x&&this.y===e.y},e.prototype.toString=function(){return"("+this.x+", "+this.y+")"},e}(),ea=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ta=function(){function e(e){this.handler=null,this.instanceHub=e}return e.prototype.handleModifierKeyChanged=function(e){var t,n=this.instanceHub.mouseEventSource.lastMouseLocation||new $i(-1,-1);null===(t=this.handler)||void 0===t||t.handleModifierKeyChanged(e,n)},e.prototype.handleKeyEvent=function(e){var t;this.instanceHub.canvasTooltipContent.clearContent(),null===(t=this.handler)||void 0===t||t.handleKeyEvent(e)},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.InstanceHub),function(e,o){n(e,o,t)}),ea("design:paramtypes",[D])],e);var t,n}(),na=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oa=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ra=function(e){function t(t){var n=e.call(this,t)||this;return n.commands=new Map,Qi().addKeycodes({173:"-"}),n}return na(t,e),t.prototype.registerEventOnElement=function(e){var t=this;this.mousetrap=Qi()(e),this.registerModifierKeys(),this.registerCommandShortcuts();var n=function(e){t.isEditMode()&&!t.isMouseDragging()&&t.handleKeyEvent(e)};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}},t.prototype.registerCommand=function(e,t){var n=this;this.commands.set(e,t),this.mousetrap.bind(e,(function(){return n.dispatchCommandForKeys(e),!1}))},t.prototype.dispatchCommandForKeys=function(e){if(this.isEditMode()&&!this.isMouseDragging()){var t=this.commands.get(e),n=this.instanceHub.commandLibrary.getCommandWithName(t);n.isEnabled&&n.execute()}},t.prototype.unregisterCommands=function(){var e=this;this.commands.forEach((function(t,n){e.mousetrap.unbind(n)})),this.commands.clear()},t.prototype.registerModifierKeys=function(){var e=this;this.mousetrap.bind(["shift","alt","mod"],(function(t){if(e.isEditMode())return t.repeat||e.handleModifierKeyChanged(t),!1}),"keydown"),this.mousetrap.bind(["shift","alt","mod"],(function(t){if(e.isEditMode())return e.handleModifierKeyChanged(t),!1}),"keyup")},t.prototype.registerCommandShortcuts=function(){this.registerCommand("mod+c","copy"),this.registerCommand("mod+x","cut"),this.registerCommand("mod+a","selectAll"),this.registerCommand("mod+z","undo"),this.registerCommand("mod+shift+z","redo"),this.registerCommand("mod+g","group"),this.registerCommand("mod+shift+g","ungroup"),this.registerCommand("mod+j","joinObjectToGroup"),this.registerCommand("mod+shift+h","rotateObjects180Horizontal"),this.registerCommand("mod+shift+v","rotateObjects180Vertical"),this.registerCommand("mod+alt+shift+b","alignBottomEdges"),this.registerCommand("mod+alt+shift+l","alignLeftEdges"),this.registerCommand("mod+alt+shift+c","alignLeftRightCenters"),this.registerCommand("mod+alt+shift+r","alignRightEdges"),this.registerCommand("mod+alt+shift+m","alignTopBottomCenters"),this.registerCommand("mod+alt+shift+t","alignTopEdges"),this.registerCommand("mod+alt+shift+h","distributeObjectsHorizontally"),this.registerCommand("mod+alt+shift+v","distributeObjectsVertically"),this.registerCommand("mod+shift+k","cleanStructure"),this.registerCommand("mod+shift+x","cleanReaction"),this.registerCommand("mod+alt+k","toggleKekulization"),this.registerCommand("mod+l","toggleFixedBondLengths"),this.registerCommand("mod+e","toggleFixedBondAngles"),oe.isWindows()?(this.registerCommand("f9","textStyleSubscript"),this.registerCommand("f10","textStyleSuperscript"),this.registerCommand("mod+f","textStyleFormula")):oe.isMac()&&(this.registerCommand("mod+-","textStyleSubscript"),this.registerCommand("mod+=","textStyleSuperscript"),this.registerCommand("mod+f","textStyleFormula")),this.registerCommand("mod+shift+n","convertNameToStructure"),this.registerCommand("mod+alt+n","convertStructureToName")},t.prototype.isEditMode=function(){return!this.instanceHub.chemDraw.isViewOnly},t.prototype.isMouseDragging=function(){return this.instanceHub.mouseEventSource.isDragging},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(n=0,o=(0,p.f3)(w.InstanceHub),function(e,t){o(e,t,n)}),oa("design:paramtypes",[D])],t);var n,o}(ta),ia=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},aa=function(){function e(e){var t=this;this.instanceHub=e,this.isDown=!1,this.isDragging=!1,this.clickCount=0,this.lastMouseDownTime=0,this.handler=null,this.mouseDragUpAction=function(e){t.handleMouseUp(t.locationInElementFromEvent(e),e),window.removeEventListener("mousemove",t.mouseDragMoveAction,!0),window.removeEventListener("mouseup",t.mouseDragUpAction,!0),setTimeout((function(){window.removeEventListener("click",t.mouseDragUpOutOfCanvasAction,!0)}),0),t.handleStopDrag(),t.clickCount=0,t.isDown=!1,t.isDragging=!1},this.mouseDragMoveAction=function(e){t.handleDrag(t.locationInElementFromEvent(e),e)}}var t,n,o;return t=e,e.prototype.locationInElementFromEvent=function(e){var t=this.element.getBoundingClientRect();return new $i(e.clientX-t.left,e.clientY-t.top)},e.prototype.triggerMouseUp=function(e){var n=this;if(!this.isDragging){if(this.clickCount>0){var o=Date.now(),r=this.locationInElementFromEvent(e);this.handleMouseUp(r,e),o-this.lastMouseDownTime>t.DOUBLE_CLICK_INTERVAL?(this.handleSingleClick(r,e),this.clickCount=0):(this.timeoutAction=function(){1===n.clickCount?n.handleSingleClick(r,e):n.clickCount>1&&n.handleDoubleClick(r,e),n.clickCount=0},this.timeoutHandler=setTimeout((function(){n.timeoutAction(),n.timeoutHandler=void 0,n.timeoutAction=void 0}),t.DOUBLE_CLICK_INTERVAL))}this.isDown=!1}},e.prototype.triggerMouseDown=function(e){this.instanceHub.canvasTooltipContent.clearContent();var t=this.locationInElementFromEvent(e);this.handleMouseDown(t,e),this.timeoutHandler&&(clearTimeout(this.timeoutHandler),this.timeoutHandler=void 0,this.timeoutAction=void 0),this.lastMouseDownTime=Date.now(),this.isDown=!0,this.clickCount++,this.lastMouseDownLocation=t},e.prototype.triggerMouseMove=function(e){var n=this.locationInElementFromEvent(e);if(this.isDown){if(!this.isDragging)if(n.equals(this.lastMouseDownLocation));else{var o=Math.abs(n.x-this.lastMouseDownLocation.x),r=Math.abs(n.y-this.lastMouseDownLocation.y),i=Date.now()-this.lastMouseDownTime;(o>t.MIN_DRAG_DISTANCE_THRESHOLD||r>t.MIN_DRAG_DISTANCE_THRESHOLD||i>t.DOUBLE_CLICK_INTERVAL)&&(this.isDragging=!0,window.addEventListener("mouseup",this.mouseDragUpAction,!0),window.addEventListener("mousemove",this.mouseDragMoveAction,!0),window.addEventListener("click",this.mouseDragUpOutOfCanvasAction,!0),this.handleStartDrag(this.lastMouseDownLocation,e),this.handleDrag(n,e))}}else this.timeoutHandler&&!n.equals(this.lastMouseDownLocation)&&(clearTimeout(this.timeoutHandler),this.timeoutAction(),this.timeoutHandler=void 0,this.timeoutAction=void 0),n.equals(this.lastMouseLocation)||this.handleMove(n,e);this.lastMouseLocation=n,this.lastMouseMoveEvent=e},e.prototype.mouseDragUpOutOfCanvasAction=function(e){window.removeEventListener("click",this.mouseDragUpOutOfCanvasAction,!0)},e.prototype.handleMouseDown=function(e,t){var n;null===(n=this.handler)||void 0===n||n.handleMouseDown(e,t)},e.prototype.handleMouseUp=function(e,t){var n;null===(n=this.handler)||void 0===n||n.handleMouseUp(e,t)},e.prototype.handleMove=function(e,t){var n;null===(n=this.handler)||void 0===n||n.handleMove(e,t)},e.prototype.handleSingleClick=function(e,t){var n;null===(n=this.handler)||void 0===n||n.handleSingleClick(e,t)},e.prototype.handleDoubleClick=function(e,t){var n;null===(n=this.handler)||void 0===n||n.handleDoubleClick(e,t)},e.prototype.handleStartDrag=function(e,t){var n;null===(n=this.handler)||void 0===n||n.handleStartDrag(e,t)},e.prototype.handleDrag=function(e,t){var n;null===(n=this.handler)||void 0===n||n.handleDrag(e,t)},e.prototype.handleStopDrag=function(){var e;null===(e=this.handler)||void 0===e||e.handleStopDrag()},e.DOUBLE_CLICK_INTERVAL=250,e.MIN_DRAG_DISTANCE_THRESHOLD=5,t=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(n=0,o=(0,p.f3)(w.InstanceHub),function(e,t){o(e,t,n)}),ia("design:paramtypes",[D])],e)}(),sa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ca=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},la=function(e){function t(t){var n=e.call(this,t)||this;return n.mouseDragUpOutOfCanvasAction=n.mouseDragUpOutOfCanvasAction.bind(n),n}return sa(t,e),t.prototype.registerEventOnElement=function(e){var t=this;this.element=e;var n=function(e){},o=function(e){},r=function(e){t.instanceHub.chemDraw.isViewOnly||0===e.button&&(t.triggerMouseDown(e),e.preventDefault())},i=function(e){t.instanceHub.chemDraw.isViewOnly||0===e.button&&(t.triggerMouseUp(e),e.preventDefault())},a=function(e){t.instanceHub.chemDraw.isViewOnly||(t.triggerMouseMove(e),e.preventDefault())};return e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",o),e.addEventListener("mousedown",r),e.addEventListener("mousemove",a),e.addEventListener("mouseup",i),function(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",o),e.removeEventListener("mousedown",r),e.removeEventListener("mousemove",a),e.removeEventListener("mouseup",i)}},t.prototype.mouseDragUpOutOfCanvasAction=function(t){e.prototype.mouseDragUpOutOfCanvasAction.call(this,t);var n=this.instanceHub.chemDrawWebLoader.container.getBoundingClientRect();(t.clientX<n.left||t.clientY<n.top||t.clientX>n.right||t.clientY>n.bottom)&&t.stopPropagation()},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(n=0,o=(0,p.f3)(w.InstanceHub),function(e,t){o(e,t,n)}),ca("design:paramtypes",[D])],t);var n,o}(aa),ua=function(){function e(e,t){this.name=e,this.instanceHub=t}return Object.defineProperty(e.prototype,"isChecked",{get:function(){return this.instanceHub.chemDraw.isCommandChecked(this.name)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.instanceHub.chemDraw.isCommandEnabled(this.name)},enumerable:!1,configurable:!0}),e.prototype.execute=function(e){je.currentInstance=this.instanceHub.clipboardManager,this.instanceHub.clipboardManager.setClipboardActive(),e&&this.instanceHub.clipboardManager.setCallback(e),"paste"===this.name?this.instanceHub.clipboardManager.executePaste():"copyAsCdxml"===this.name?this.dispatchClipboardCommand("copy","copyAsCdxml"):this.dispatchClipboardCommand(this.name)},e.prototype.dispatchClipboardCommand=function(e,t){if(void 0===t&&(t=null),this.instanceHub.clipboardManager.copyAction=t,!document.execCommand(e))throw new Error("The command could not be executed because it was blocked by the browser security policy")},e}(),da=function(){function e(e,t){this.name=e,this.instanceHub=t}return Object.defineProperty(e.prototype,"isChecked",{get:function(){return this.instanceHub.chemDraw.isCommandChecked(this.name)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.instanceHub.chemDraw.isCommandEnabled(this.name)},enumerable:!1,configurable:!0}),e.prototype.execute=function(e){var t=this,n=this.instanceHub.chemDraw.handleCommand(this.name);0===n?this.instanceHub.chemDraw.processChange().then((function(){var n;null===(n=t.instanceHub.mouseEventSource.handler)||void 0===n||n.refreshHighlight(),e&&e()})):console.error("Failed to execute command "+this.name+" with result "+n)},e}(),ha=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},pa=function(){function e(e){this.commands=new Map,this.instanceHub=e,this.addCommand(new ua("copy",e)),this.addCommand(new ua("cut",e)),this.addCommand(new ua("copyAsCdxml",e)),this.addCommand(new ua("paste",e))}return e.prototype.getCommandWithName=function(e){var t=this.commands.get(e);return t||(t=new da(e,this.instanceHub)),t},e.prototype.addCommand=function(e){this.commands.set(e.name,e)},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.InstanceHub),function(e,o){n(e,o,t)}),ha("design:paramtypes",[D])],e);var t,n}(),fa=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ma=function(){function e(e){this.tools=[],this.instanceHub=e,this.addUndoRedoTools(),this.addSelectionTools(),this.addZoomTools(),this.addEraserTool(),this.addChainTools(),this.addTextTools(),this.addClipboardTools(),this.addArrowTools(),this.addCleanUpTools(),this.addGroupTools(),this.addSymbolTools(),this.addBondTools(),this.addRingTools(),this.addNameStructureTools(),this.addContractExpandTools(),this.addTemplateTool(),this.addBracketTools(),this.addQueryTools(),this.addDebugTools(),this.addDeprecatedTools()}return e.prototype.getTool=function(e){for(var t=0,n=this.tools;t<n.length;t++){var o=n[t];if(o.name===e)return o}throw new Error("Tool "+e+" was not found")},e.prototype.addTool=function(e){this.tools.push(e)},e.prototype.addDeprecatedTools=function(){this.tools.push(new mn("Print","Printable Version","Print tool has been deprecated")),this.tools.push(new mn("MoveCanvas","Move","MoveCanvas tool has been deprecated")),this.tools.push(new mn("Unintegral","Unintegral","Unintegral tool is merged into Integral tool"))},e.prototype.addUndoRedoTools=function(){this.addCommandTool("Undo","Undo","undo"),this.addCommandTool("Redo","Redo","redo")},e.prototype.addSelectionTools=function(){this.addCommandTool("LassoSelection","Lasso","chooseSelectionTool_Lasso"),this.addCommandTool("MarqueeSelection","Marquee","chooseSelectionTool_Marquee")},e.prototype.addZoomTools=function(){this.addCommandTool("ZoomIn","Magnify","zoomIn"),this.addCommandTool("ZoomOut","Reduce","zoomOut")},e.prototype.addEraserTool=function(){this.addCommandTool("Eraser","Eraser","chooseEdittingTool_Eraser")},e.prototype.addChainTools=function(){this.addCommandTool("AcyclicChain","Acyclic Chain","chooseAlkaneTool_Acyclic_Chain"),this.addCommandTool("SnakingChain","Snaking Chain","chooseAlkaneTool_Snaking_Chain")},e.prototype.addTextTools=function(){this.addCommandTool("Text","Text","chooseEditingTool_Text"),this.addCommandTool("Subscript","Subscript","textStyleSubscript"),this.addCommandTool("Superscript","Superscript","textStyleSuperscript"),this.addCommandTool("Formula","Formula","textStyleFormula")},e.prototype.addClipboardTools=function(){this.addCommandTool("Copy","Copy","copy"),this.addCommandTool("CopyAsCDXML","Copy as CDXML","copyAsCdxml"),this.addCommandTool("Paste","Paste","paste")},e.prototype.addArrowTools=function(){this.addCommandTool("ArrowSolidLarge","Solid (Large)","chooseArrowTool_Large_Solid"),this.addCommandTool("ArrowSolidMedium","Solid (Medium)","chooseArrowTool_Medium_Solid"),this.addCommandTool("ArrowSolidSmall","Solid (Small)","chooseArrowTool_Small_Solid"),this.addCommandTool("ArrowHollowLarge","Hollow (Large)","chooseArrowTool_Large_Hollow"),this.addCommandTool("ArrowHollowMedium","Hollow (Medium)","chooseArrowTool_Medium_Hollow"),this.addCommandTool("ArrowRetrosyntheticLarge","Retrosynthetic (Large)","chooseArrowTool_Large_Retrosynthetic"),this.addCommandTool("ArrowRetrosyntheticSmall","Retrosynthetic (Small)","chooseArrowTool_Small_Retrosynthetic"),this.addCommandTool("ArrowBoldLarge","Bold (Large)","chooseArrowTool_Large_Bold"),this.addCommandTool("ArrowBoldMedium","Bold (Medium)","chooseArrowTool_Medium_Bold"),this.addCommandTool("ArrowBoldSmall","Bold (Small)","chooseArrowTool_Small_Bold"),this.addCommandTool("Arrow270CW","270° CW","chooseArrowTool_270_CW"),this.addCommandTool("Arrow180CW","180° CW","chooseArrowTool_180_CW"),this.addCommandTool("Arrow120CW","120° CW","chooseArrowTool_120_Solid_CW"),this.addCommandTool("Arrow90CW","90° CW","chooseArrowTool_90_CW"),this.addCommandTool("ArrowDashedLarge","Dashed (Large)","chooseArrowTool_Large_Dashed"),this.addCommandTool("ArrowDashedMedium","Dashed (Medium)","chooseArrowTool_Medium_Dashed"),this.addCommandTool("ArrowDashedSmall","Dashed (Small)","chooseArrowTool_Small_Dashed"),this.addCommandTool("Arrow270CCW","270° CCW","chooseArrowTool_270_CCW"),this.addCommandTool("Arrow180CCW","180° CCW","chooseArrowTool_180_CCW"),this.addCommandTool("Arrow120CCW","120° CCW","chooseArrowTool_120_Solid_CCW"),this.addCommandTool("Arrow90CCW","90° CCW","chooseArrowTool_90_CCW"),this.addCommandTool("ArrowOneSidedLeftLarge","One-Sided (Left) (Large)","chooseArrowTool_Large_OneSided_Left"),this.addCommandTool("ArrowOneSidedLeftMedium","One-Sided (Left) (Medium)","chooseArrowTool_Medium_OneSided_Left"),this.addCommandTool("ArrowOneSidedLeftSmall","One-Sided (Left) (Small)","chooseArrowTool_Small_OneSided_Left"),this.addCommandTool("Arrow270SingleCW","270° Single CW","chooseArrowTool_270_Single_CW"),this.addCommandTool("Arrow180SingleCW","180° Single CW","chooseArrowTool_180_Single_CW"),this.addCommandTool("Arrow120SingleCW","120° Single CW","chooseArrowTool_120_Single_CW"),this.addCommandTool("Arrow90SingleCW","90° Single CW","chooseArrowTool_90_Single_CW"),this.addCommandTool("ArrowOneSidedRightLarge","One-Sided (Right) (Large)","chooseArrowTool_Large_OneSided_Right"),this.addCommandTool("ArrowOneSidedRightMedium","One-Sided (Right) (Medium)","chooseArrowTool_Medium_OneSided_Right"),this.addCommandTool("ArrowOneSidedRightSmall","One-Sided (Right) (Small)","chooseArrowTool_Small_OneSided_Right"),this.addCommandTool("Arrow270SingleCCW","270° Single CCW","chooseArrowTool_270_Single_CCW"),this.addCommandTool("Arrow180SingleCCW","180° Single CCW","chooseArrowTool_180_Single_CCW"),this.addCommandTool("Arrow120SingleCCW","120° Single CCW","chooseArrowTool_120_Single_CCW"),this.addCommandTool("Arrow90SingleCCW","90° Single CCW","chooseArrowTool_90_Single_CCW"),this.addCommandTool("ArrowResonanceLarge","Resonance (Large)","chooseArrowTool_Large_Resonance"),this.addCommandTool("ArrowResonanceMedium","Resonance (Medium)","chooseArrowTool_Medium_Resonance"),this.addCommandTool("ArrowResonanceSmall","Resonance (Small)","chooseArrowTool_Small_Resonance"),this.addCommandTool("Arrow270Double","270° 2 Headed","chooseArrowTool_2Sided_270"),this.addCommandTool("Arrow180Double","180° 2 Headed","chooseArrowTool_180_Double"),this.addCommandTool("Arrow120Double","120° 2 Headed","chooseArrowTool_120_Double"),this.addCommandTool("Arrow90Double","90° 2 Headed","chooseArrowTool_90_Double"),this.addCommandTool("ArrowNoGoCrossLarge","No Go (Cross) (Large)","chooseArrowTool_Large_NoGo_Cross"),this.addCommandTool("ArrowNoGoCrossMedium","No Go (Cross) (Medium)","chooseArrowTool_Medium_NoGo_Cross"),this.addCommandTool("ArrowNoGoCrossSmall","No Go (Cross) (Small)","chooseArrowTool_Small_NoGo_Cross"),this.addCommandTool("ArrowEquilibriumLarge","Equilibrium (Large)","chooseArrowTool_Large_Equilibrium"),this.addCommandTool("ArrowEquilibriumMedium","Equilibrium (Medium)","chooseArrowTool_Medium_Equilibrium"),this.addCommandTool("ArrowEquilibriumSmall","Equilibrium (Small)","chooseArrowTool_Small_Equilibrium"),this.addCommandTool("Arrow270ElipticalCW","270° Eliptical CW","chooseArrowTool_270_Eliptical_CW"),this.addCommandTool("ArrowNoGoHashLarge","No Go (Hash) (Large)","chooseArrowTool_Large_NoGo_Hash"),this.addCommandTool("ArrowNoGoHashMedium","No Go (Hash) (Medium)","chooseArrowTool_Medium_NoGo_Hash"),this.addCommandTool("ArrowNoGoHashSmall","No Go (Hash) (Small)","chooseArrowTool_Small_NoGo_Hash"),this.addCommandTool("ArrowUnbalancedELarge","Unbalanced Equilibrium (Large)","chooseArrowTool_Large_UnbalancedE"),this.addCommandTool("ArrowUnbalancedEMedium","Unbalanced Equilibrium (Medium)","chooseArrowTool_Medium_UnbalancedE"),this.addCommandTool("ArrowUnbalancedESmall","Unbalanced Equilibrium (Small)","chooseArrowTool_Small_UnbalancedE"),this.addCommandTool("Arrow270ElipticalCCW","270° Eliptical CCW","chooseArrowTool_270_Eliptical_CCW"),this.addCommandTool("SolidArrow","Solid Arrow","chooseArrowTool_Small_Solid"),this.addCommandTool("DashedArrow","Dashed Arrow","chooseArrowTool_Small_Dashed"),this.addCommandTool("NoGoArrow","NoGo Arrow","chooseArrowTool_Small_NoGo_Cross"),this.addCommandTool("ResonanceArrow","Resonance Arrow","chooseArrowTool_Small_Resonance"),this.addCommandTool("HollowArrow","Hollow Arrow","chooseArrowTool_Medium_Hollow")},e.prototype.addCleanUpTools=function(){this.addCommandTool("StructureCleanup","Clean Up Structure","cleanStructure"),this.addCommandTool("ReactionCleanup","Clean Up Reaction","cleanReaction"),this.addCommandTool("SequenceCleanup","Clean Up Biopolymer","cleanSequence")},e.prototype.addGroupTools=function(){this.addCommandTool("Group","Group","group"),this.addCommandTool("Ungroup","Ungroup","ungroup"),this.addCommandTool("Integral","Integral","groupIntegral")},e.prototype.addSymbolTools=function(){this.addCommandTool("CirclePlus","Circle Plus","chooseSymbolTool_CirclePlus"),this.addCommandTool("CircleMinus","Circle Minus","chooseSymbolTool_CircleMinus"),this.addCommandTool("Plus","Plus","chooseSymbolTool_Plus"),this.addCommandTool("Minus","Minus","chooseSymbolTool_Minus"),this.addCommandTool("RadicalCation","Radical Cation","chooseSymbolTool_RadicalCation"),this.addCommandTool("RadicalAnion","Radical Anion","chooseSymbolTool_RadicalAnion"),this.addCommandTool("LonePair","Lone Pair","chooseSymbolTool_DoubleRadical"),this.addCommandTool("Radical","Radical","chooseSymbolTool_Radical"),this.addCommandTool("HDot","H Dot","chooseSymbolTool_HDot"),this.addCommandTool("HDash","H Dash","chooseSymbolTool_HDash"),this.addCommandTool("AttachmentDiamond","Attachment Point","chooseSymbolTool_Attachment_Diamond"),this.addCommandTool("AttachmentStar","Attachment Point","chooseSymbolTool_Attachment_Star"),this.addCommandTool("AttachmentPolymerBead","Polymer Bead Attachment Point","chooseSymbolTool_PolymerBeadAttachmentPoint"),this.addCommandTool("AttachmentWavy","Attachment Point","chooseSymbolTool_Attachment_Wavy"),this.addCommandTool("ElectronPushing","Electron Pushing","choosePushElectronTool"),this.addCommandTool("RadicalPushing","Radical Pushing","choosePushRadicalTool")},e.prototype.addBondTools=function(){this.addCommandTool("SolidBond","Solid Bond","chooseBondTool_Solid"),this.addCommandTool("BoldBond","Bold Bond","chooseBondTool_Bold"),this.addCommandTool("DoubleBond","Double Bond","chooseMultipleBondsTool_DoubleBond"),this.addCommandTool("DottedBond","Hydrogen Bond","chooseBondTool_DottedHydrogen"),this.addCommandTool("DashedBond","Dashed Bond","chooseBondTool_Dashed"),this.addCommandTool("HashedBond","Hashed Bond","chooseBondTool_Hashed"),this.addCommandTool("HashedWedgedBond","Hashed Wedged Bond","chooseBondTool_Hashed_Wedged"),this.addCommandTool("HollowWedgedBond","Hollow Wedged Bond","chooseBondTool_Hollow_Wedged"),this.addCommandTool("WavyBond","Wavy Bond","chooseBondTool_Wavy"),this.addCommandTool("WedgedBond","Wedged Bond","chooseBondTool_Wedged"),this.addCommandTool("DativeBond","Dative Bond","chooseMultipleBondsTool_DativeBond"),this.addCommandTool("AnyBond","Any Bond","chooseMultipleBondsTool_AnyBond"),this.addCommandTool("DoubleOrAromaticBond","Double or Aromatic Bond","chooseMultipleBondsTool_DoubleOrAromaticBond"),this.addCommandTool("SingleOrAromaticBond","Single or Aromatic Bond","chooseMultipleBondsTool_SingleOrAromaticBond"),this.addCommandTool("SingleOrDoubleBond","Single or Double Bond","chooseMultipleBondsTool_SingleOrDoubleBond"),this.addCommandTool("BoldDoubleBond","Bold Double Bond","chooseMultipleBondsTool_BoldDoubleBond"),this.addCommandTool("DashedDoubleBond","Dashed Double Bond","chooseMultipleBondsTool_DashedDoubleBond"),this.addCommandTool("DoubleDashedDoubleBond","Double Dashed Double Bond","chooseMultipleBondsTool_DoubleDashedDoubleBond"),this.addCommandTool("DoubleEitherBond","Double Either Bond","chooseMultipleBondsTool_DoubleEitherBond"),this.addCommandTool("TripleBond","Triple Bond","chooseMultipleBondsTool_TripleBond"),this.addCommandTool("QuadrupleBond","Quadruple Bond","chooseMultipleBondsTool_QuadrupleBond"),this.addCommandTool("HashedWedgeBond","Hashed Wedged Bond","chooseBondTool_Hashed_Wedged"),this.addCommandTool("WedgeBond","Wedged Bond","chooseBondTool_Wedged")},e.prototype.addRingTools=function(){this.addCommandTool("Propane","Cyclopropane Ring","chooseRingTool_Cyclopropane"),this.addCommandTool("Butane","Cyclobutane Ring","chooseRingTool_Cyclobutane"),this.addCommandTool("Pentane","Cyclopentane Ring","chooseRingTool_Cyclopentane"),this.addCommandTool("Hexane","Cyclohexane Ring","chooseRingTool_Cyclohexane"),this.addCommandTool("Heptane","Cycloheptane Ring","chooseRingTool_Cycloheptane"),this.addCommandTool("Octane","Cyclooctane Ring","chooseRingTool_Cyclooctane"),this.addCommandTool("CyclohexaneChairRight","Chair Cyclohexane","chooseRingTool_Chair_Cyclohexane1"),this.addCommandTool("CyclohexaneChairLeft","Chair Cyclohexane","chooseRingTool_Chair_Cyclohexane2"),this.addCommandTool("Pentadiene","Cyclopentadiene","chooseRingTool_Cyclopentadiene"),this.addCommandTool("Benzene","Benzene","chooseRingTool_Benzene")},e.prototype.addNameStructureTools=function(){this.addCommandTool("NameToStructure","Name to Structure","convertNameToStructure"),this.addCommandTool("StructureToName","Structure to Name","convertStructureToName")},e.prototype.addContractExpandTools=function(){this.addCommandTool("ExpandLabel","Expand Label","expandLabel"),this.addCommandTool("ContractLabel","Contract Label","contractLabel")},e.prototype.addTemplateTool=function(){this.addCommandTool("Templates","Templates","chooseTemplateTool")},e.prototype.addBracketTools=function(){this.addCommandTool("SquareBrackets","Brackets","chooseBracketTool_SquareBrackets"),this.addCommandTool("LeftSquareBracket","Bracket","chooseBracketTool_LeftSquareBracket"),this.addCommandTool("RoundBrackets","Parentheses","chooseBracketTool_Parenthesis"),this.addCommandTool("LeftRoundBracket","Parenthesis","chooseBracketTool_LeftParenthesis"),this.addCommandTool("CurlyBrackets","Braces","chooseBracketTool_CurlyBrackets"),this.addCommandTool("LeftCurlyBracket","Brace","chooseBracketTool_LeftCurlyBracket"),this.addCommandTool("DoubleDaggerBrackets","Double Dagger","chooseBracketTool_DoubleDagger"),this.addCommandTool("SingleDaggerBracket","Dagger","chooseBracketTool_SingleDagger")},e.prototype.addQueryTools=function(){this.addCommandTool("AlternativeGroup","Alternative Group","chooseQueryTool_AlternativeGroup"),this.addCommandTool("StructureProperties","Show Properties","showStructurePropertiesDialog"),this.addCommandTool("AddMultiCenterAttachment","Add Multi-Center Attachment","addMultiCenterAttachment"),this.addCommandTool("ReactionAtomMap","Reaction Atom Map","chooseQueryTool_ReactionAtomAtomMap"),this.addCommandTool("AddVariableAttachment","Add Variable Attachment","addVariableAttachment")},e.prototype.addDebugTools=function(){this.addCommandTool("ReactionInterpretation","Reaction Interpretation","toggleReactionInterpretation")},e.prototype.addCommandTool=function(e,t,n){var o=this,r=new fn.A(e,t,n,(function(){o.instanceHub.commandLibrary.getCommandWithName(n).execute()}));this.addTool(r)},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.InstanceHub),function(e,o){n(e,o,t)}),fa("design:paramtypes",[D])],e);var t,n}(),ga=function(){return(ga=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ya=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ba=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},va=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},wa="name,html-formula,mw,em,inchi,smiles";function Ca(e){var t={};return e.id&&(t.id=""+e.id),e.name&&(t.name=e.name),e["html-formula"]&&(t.formula=e["html-formula"]),e.mw&&e.mw.value&&(t.molecularWeight=e.mw.value+" g/mol"),e.em&&e.em.value&&(t.exactMass=e.em.value),e.inchi&&(t.inChI=e.inchi),e.smiles&&(t.smiles=e.smiles),t}function Sa(e,t){return ba(this,void 0,void 0,(function(){return va(this,(function(n){return"chemical/x-cdx"===t?[2,fetch("data:chemical/x-cdx;base64,"+e).then((function(e){return e.arrayBuffer()}))]:[2,e]}))}))}var Ea=function(){function e(e){this.configurationManager=e}return e.prototype.isEnabled=function(){return this.configurationManager.isFeatureEnabled("WebService")},e.prototype.getProperties=function(e){return ba(this,void 0,void 0,(function(){var t;return va(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.requestProperties(e,"chemical/x-cdxml",wa)];case 1:return[2,Ca(n.sent())];case 2:throw t=n.sent(),new Error("Failed to get properties from service. Reason: "+t.message);case 3:return[2]}}))}))},e.prototype.findReactions=function(e){return ba(this,void 0,void 0,(function(){var t;return va(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.sendAPIRequest("reactions?properties="+wa,{method:"POST",headers:{"Content-Type":"chemical/x-cdxml",Accept:"application/json"},body:e})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent().map((function(e){return{steps:e.steps.map((function(e){var t=e.reactants,n=e.reagents,o=e.products;return{reactants:t.map(Ca),reagents:n.map(Ca),products:o.map(Ca)}}))}}))];case 3:throw t=n.sent(),new Error("Failed to find reactions from service. Reason: "+t.message);case 4:return[2]}}))}))},e.prototype.nameToStructure=function(e){return ba(this,void 0,void 0,(function(){var t;return va(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.convert(e,"chemical/x-name","chemical/x-cdxml")];case 1:return[2,n.sent()];case 2:throw t=n.sent(),new Error('Failed to get CDXML for name "'+e+'". Reason: '+t.message);case 3:return[2]}}))}))},e.prototype.structureToName=function(e){return ba(this,void 0,void 0,(function(){var t,n;return va(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.sendAPIRequest("properties?properties=name",{method:"POST",headers:{"Content-Type":"chemical/x-cdxml",Accept:"application/json"},body:e})];case 1:return[4,o.sent().json()];case 2:if(!(t=o.sent()).name)throw new Error("Could not get name for structure");return[2,t.name];case 3:throw n=o.sent(),new Error("Failed to get name for structure. Reason: "+n.message);case 4:return[2]}}))}))},e.prototype.getMolecularWeight=function(e,t){return ba(this,void 0,void 0,(function(){var n,o;return va(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.requestProperties(e,t,"mw")];case 1:if(!(n=r.sent()).mw)throw new Error("Could not calculate molecular weight");return[2,n.mw.value];case 2:throw o=r.sent(),new Error("Failed to get molecular weight for structure. Reason: "+o.message);case 3:return[2]}}))}))},e.prototype.convertToCDXML=function(e,t){return ba(this,void 0,void 0,(function(){var n;return va(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.convert(e,t,"chemical/x-cdxml")];case 1:return[2,o.sent()];case 2:throw n=o.sent(),new Error("Failed to convert the given content. Reason: "+n.message);case 3:return[2]}}))}))},e.prototype.getSVGFromMIMEData=function(e,t,n){return ba(this,void 0,void 0,(function(){var o,r;return va(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),o=new URLSearchParams,(null==n?void 0:n.scale)&&o.append("scale",n.scale.toString()),(null==n?void 0:n.styleSheet)&&o.append("stylesheet",n.styleSheet),[4,this.sendAPIRequest("render?"+o.toString(),{method:"POST",headers:{"Content-Type":t,Accept:"image/svg+xml"},body:e})];case 1:return[4,i.sent().text()];case 2:return[2,i.sent()];case 3:throw r=i.sent(),new Error("Failed to get SVG for structure. Reason: "+r.message);case 4:return[2]}}))}))},e.prototype.requestProperties=function(e,t,n){return ba(this,void 0,void 0,(function(){var o;return va(this,(function(r){switch(r.label){case 0:return[4,Sa(e,t)];case 1:return o=r.sent(),[4,this.sendAPIRequest("properties?properties="+n,{method:"POST",headers:{"Content-Type":t,Accept:"application/json"},body:o})];case 2:return[4,r.sent().json()];case 3:return[2,r.sent()]}}))}))},e.prototype.convert=function(e,t,n){return ba(this,void 0,void 0,(function(){var o;return va(this,(function(r){switch(r.label){case 0:return[4,Sa(e,t)];case 1:return o=r.sent(),[4,this.sendAPIRequest("convert",{method:"POST",headers:{"Content-Type":t,Accept:n},body:o})];case 2:return[2,r.sent().text()]}}))}))},e.prototype.sendAPIRequest=function(e,t){return ba(this,void 0,void 0,(function(){var n,o,r;return va(this,(function(i){switch(i.label){case 0:n=this.getURLFromEndpoint(e),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,fetch(n,ga({mode:"cors"},t))];case 2:return(o=i.sent()).ok?[3,4]:[4,o.json()];case 3:r=i.sent(),i.label=4;case 4:return[3,6];case 5:throw i.sent(),console.error("Unable to contact the ChemDraw Web Service at "+n+', check the "chemService" value in your configuration.'),new Error("Unable to contact the ChemDraw Web Service, check that you are connected to the internet");case 6:if(r)throw new Error(r.title||"An unknown error occurred");return[2,o]}}))}))},e.prototype.getURLFromEndpoint=function(e){var t=this.configurationManager.getConfig().properties.chemService;if(!t)throw console.error('The ChemDraw Web Service has not been configured, check the "chemService" value in your configuration.'),new Error("The ChemDraw Web Service is not available");return re.W.join(t,e)},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.ConfigurationManager),function(e,o){n(e,o,t)}),ya("design:paramtypes",[Mo])],e);var t,n}(),Da=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ta=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Pa=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},xa=function(){function e(e){this.configurationManager=e}return e.prototype.isAvailable=function(){return!!this.serviceURL},e.prototype.findMonomer=function(e){return Ta(this,void 0,void 0,(function(){var t,n;return Pa(this,(function(o){switch(o.label){case 0:return this.throwIfNotAvailable(),t=re.W.join(this.serviceURL,"monomers/"+e.polymerType.toLocaleLowerCase()+"/"+e.monomerType.toLocaleLowerCase()+"/"+e.symbol),e.cdxml?[4,this.fetch(t+"?includeDeprecated=true",{headers:{"content-type":"chemical/x-cdxml"},method:"POST",body:e.cdxml})]:[3,2];case 1:return n=o.sent(),[3,4];case 2:return[4,this.fetch(t)];case 3:n=o.sent(),o.label=4;case 4:return 200!==n.status?[3,6]:[4,n.json()];case 5:return[2,o.sent()];case 6:if(404===n.status)return[2,null];o.label=7;case 7:throw new Error("Error "+n.status+" finding monomer")}}))}))},e.prototype.getMonomerLibraries=function(){return Ta(this,void 0,void 0,(function(){var e,t;return Pa(this,(function(n){switch(n.label){case 0:return this.throwIfNotAvailable(),e=re.W.join(this.serviceURL,"libraries"),[4,fetch(e,{method:"GET"})];case 1:return 200!==(t=n.sent()).status?[3,3]:[4,t.json()];case 2:return[2,n.sent()];case 3:throw new Error("Error "+t.status+" getting monomer libraries")}}))}))},e.prototype.getMonomers=function(e,t){var n=t.polymerType,o=t.monomerType;return Ta(this,void 0,void 0,(function(){var t,r;return Pa(this,(function(i){switch(i.label){case 0:return this.throwIfNotAvailable(),t=re.W.join(this.serviceURL,"libraries/"+e+"/"+n.toLocaleLowerCase()+"/"+o.toLocaleLowerCase()+"/monomers"),[4,this.fetch(t)];case 1:return 200!==(r=i.sent()).status?[3,3]:[4,r.json()];case 2:return[2,i.sent()];case 3:throw new Error("Error "+r.status+" fetching monomers for library")}}))}))},Object.defineProperty(e.prototype,"serviceURL",{get:function(){var e,t;return null!==(t=null===(e=this.configurationManager.getConfig().properties)||void 0===e?void 0:e.monomerService)&&void 0!==t?t:""},enumerable:!1,configurable:!0}),e.prototype.throwIfNotAvailable=function(){if(!this.isAvailable())throw new Error("The monomer service is not available")},e.prototype.fetch=function(e,t){return Ta(this,void 0,void 0,(function(){return Pa(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,fetch(e,t)];case 1:return[2,n.sent()];case 2:throw n.sent(),new Error("Some monomer definitions were not found as the monomer service is not available");case 3:return[2]}}))}))},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([(0,p.b2)(),(t=0,n=(0,p.f3)(w.ConfigurationManager),function(e,o){n(e,o,t)}),Da("design:paramtypes",[Mo])],e);var t,n}(),Oa=new p.nZ((function(e){e(w.InstanceHub).to(D).inSingletonScope(),e(w.ChemDrawCoreWrapper).to(Jn).inSingletonScope(),e(w.MonomerService).to(xa).inSingletonScope(),e(w.CommandLibrary).to(pa).inSingletonScope(),e(w.ToolLibrary).to(ma).inSingletonScope(),e(w.MouseEventSource).to(la).inSingletonScope(),e(w.KeyEventSource).to(ra).inSingletonScope(),e(w.FileDropEventSource).to(Yi).inSingletonScope(),e(w.ClipboardManager).to(je).inSingletonScope(),e(w.ProgressIndicatorController).to(Oi).inSingletonScope(),e(w.MessagePresenterController).to(ie).inSingletonScope(),e(w.DialogContainerController).to(Pi).inSingletonScope(),e(w.ChemistryService).to(Ea).inSingletonScope(),e(w.EventPanelController).to(xi).inSingletonScope(),e(w.TextEditorController).to(Ai).inSingletonScope(),e(w.ToolbarController).to(Mi).inSingletonScope(),e(w.CanvasTooltipContent).to(oo).inSingletonScope(),e(w.PersistenceManager).to(Lo).inSingletonScope(),e(w.LicenseManager).to(Di).inSingletonScope(),e(w.ConfigurationManager).to(Mo).inSingletonScope(),e(w.DocumentStyleManager).to(gi).inSingletonScope(),e(w.ChemDrawWebLoader).to(ci).inSingletonScope(),e(w.CoreConfigurator).to(di).inSingletonScope(),e(w.EventEmitter).toConstantValue(new($n()))})),Aa=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Ma=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_a=function(){function e(e,t){void 0===t&&(t=Oa),this.cddContainer=null;var n=new p.W2;n.load(t),this.instanceHub=n.get(w.InstanceHub),this.instanceHub.initialize(n),this.params=e||new an.I,this.instanceHub.chemDrawWebLoader.setDocument(this.params.data,this.params.dataFormat),this.cddSelection=new un(this.instanceHub);var o=n.get(w.MonomerService);this.drawing=new en(this.instanceHub,o),this.selection=new rn(this.instanceHub)}return e.prototype.attach=function(e,t,n){var o=null;if(e instanceof HTMLElement?o=e:"string"==typeof e&&(o=document.getElementById(e)),o){if(this.cddContainer=document.createElement("div"),this.cddContainer.className="cdd-container",o.appendChild(this.cddContainer),!this.instanceHub)throw new Error("Cannot reattach ChemDraw JS object");this.instanceHub.chemDrawWebLoader.setContainer(this.cddContainer),this.setup().then(t).catch((function(e){n(e)}))}else n(new Error("Target element is undefined"))},e.prototype.dispose=function(){this.cddContainer&&(qt.unmountComponentAtNode(this.cddContainer),this.cddContainer.parentElement&&this.cddContainer.parentElement.removeChild(this.cddContainer),this.cddContainer=null),this.instanceHub&&(this.instanceHub.dispose(),this.instanceHub=null)},e.prototype.clear=function(){var e=this.instanceHub.chemDraw,t=e.cdDoc,n=this.instanceHub.documentStyleManager.getDefaultZoomLevelForDocument(t);t.clearContent(),t.performWithUndoDisabled((function(){t.setZoomLevel(n)})),e.processChange(!0)},e.prototype.loadCDXML=function(e){this.doLoadDocument(e,Yt.l.CDXML)},e.prototype.loadMOL=function(e,t){var n;try{this.doLoadDocument(e,Yt.l.MOLFILE)}catch(e){n=e}t&&t(n?void 0:this.getCDXML(),n)},e.prototype.loadSMILES=function(e,t){var n;try{this.doLoadDocument(e,Yt.l.SMILES)}catch(e){n=e}t&&t(n?void 0:this.getCDXML(),n)},e.prototype.loadB64CDX=function(e,t){var n;try{this.doLoadDocument(e,Yt.l.B64CDX)}catch(e){n=e}t&&t(n?void 0:this.getCDXML(),n)},e.prototype.getCDXML=function(){try{return this.instanceHub.chemDraw.documentToXml()}catch(e){throw qe.l.getError(e)}},e.prototype.getB64CDX=function(){try{return this.instanceHub.chemDraw.documentToB64CDX()}catch(e){throw qe.l.getError(e)}},e.prototype.loadConfig=function(e){var t=this;this.instanceHub.configurationManager.updateConfig(e),this.applyConfiguration().then((function(){t.updateUIFromConfiguration()}))},e.prototype.loadConfigFromUrl=function(e,t){var n=this;se.fetch(e,{cache:"no-cache"}).then((function(e){e.text().then((function(e){try{var o=JSON.parse(e);n.loadConfig(o),t&&t()}catch(e){t&&t("Failed to parse configuration file. Reason: "+e.message+".")}}))})).catch((function(n){t&&t("Failed to get configuration file from "+e+". Reason: "+n.statusText+".")}))},e.prototype.getVersion=function(){return te.G.getAppVersion()},e.prototype.setViewOnly=function(e){this.instanceHub.chemDraw.setViewOnly(e)},e.prototype.fitToContainer=function(){this.instanceHub.chemDraw.fitToContainer()},e.prototype.zoomToContainer=function(e){this.instanceHub.chemDraw.zoomToContainer(e)},e.prototype.shrinkToFit=function(){this.instanceHub.chemDraw.shrinkToFit()},e.prototype.getErrors=function(){return this.instanceHub.chemDraw.cdDoc.processErrors()},e.prototype.isBlankStructure=function(){return this.instanceHub.chemDraw.cdDoc.isEmpty()},e.prototype.getProperties=function(e){var t=this.instanceHub.chemDraw.documentToXml();this.instanceHub.chemistryService.getProperties(t).then((function(t){var n=JSON.stringify(ka(t));e(n,void 0)})).catch((function(t){e(void 0,t.toString())}))},e.prototype.findReactions=function(e){var t=this.instanceHub.chemDraw.documentToXml();this.instanceHub.chemistryService.findReactions(t).then((function(t){var n=JSON.stringify(t.map((function(e){return{STEPS:e.steps.map((function(e){var t=e.reactants,n=e.products,o=e.reagents;return{REACTANTS:t.map(ka),REAGENTS:o.map(ka),PRODUCTS:n.map(ka)}}))}})));e(n,void 0)})).catch((function(t){e(void 0,t.toString())}))},e.prototype.addReactant=function(e){return this.addReactionComponent("reactant",e)},e.prototype.addReagent=function(e){return this.addReactionComponent("reagent",e)},e.prototype.addProduct=function(e){return this.addReactionComponent("product",e)},e.prototype.setContentChangedHandler=function(e){this.instanceHub.chemDraw.contentChangedHandlerCallback=function(t,n){if(e)try{t.isClean()||e(n)}catch(e){console.error("Calling content changed handler throws error:\n"+e)}}},e.prototype.isSaved=function(){return this.instanceHub.chemDraw.cdDoc.isClean()},e.prototype.markAsSaved=function(){this.instanceHub.chemDraw.cdDoc.markClean()},e.prototype.labelFragments=function(e){void 0===e&&(e=[]);var t=this.instanceHub.chemDraw,n=t.cdDoc;try{r.a.FragmentAPI.labelFragments(n,e),t.processChange()}catch(e){throw qe.l.getError(e)}},e.prototype.getFragmentsInfo=function(e){return this.doGetFragmentsInfo("",e)},e.prototype.getAllFragmentsInfo=function(e){return this.doGetFragmentsInfo("all",e)},e.prototype.getSelectedFragmentsInfo=function(e){return this.doGetFragmentsInfo("selected",e)},e.prototype.nameToStructure=function(e,t){this.instanceHub.chemistryService.nameToStructure(e).then((function(e){t(e,void 0)})).catch((function(e){t(void 0,e.toString())}))},e.prototype.structureToName=function(e,t){this.instanceHub.chemistryService.structureToName(e).then((function(e){t(e,void 0)})).catch((function(e){t(void 0,e.toString())}))},e.prototype.getMOL=function(e){try{e(this.instanceHub.chemDraw.documentToMOLV2000(),void 0)}catch(t){e(void 0,qe.l.getError(t).message)}},e.prototype.getMOLV3000=function(e){try{e(this.instanceHub.chemDraw.documentToMOLV3000(),void 0)}catch(t){e(void 0,qe.l.getError(t).message)}},e.prototype.getSMILES=function(e){try{e(this.instanceHub.chemDraw.documentToSMILES(),void 0)}catch(t){e(void 0,qe.l.getError(t).message)}},e.prototype.getInChI=function(e){try{e(this.instanceHub.chemDraw.documentToInChI(),void 0)}catch(t){e(void 0,qe.l.getError(t).message)}},e.prototype.getInChIKey=function(e){try{e(this.instanceHub.chemDraw.documentToInChIKey(),void 0)}catch(t){e(void 0,qe.l.getError(t).message)}},e.prototype.getRXN=function(e){try{e(this.instanceHub.chemDraw.documentToRXNV2000(),void 0)}catch(t){e(void 0,qe.l.getError(t).message)}},e.prototype.getRXNV3000=function(e){try{e(this.instanceHub.chemDraw.documentToRXNV3000(),void 0)}catch(t){e(void 0,qe.l.getError(t).message)}},e.prototype.getSVG=function(e,t){try{if("function"==typeof e){var n=this.instanceHub.chemDraw.documentToSVG(t);return e(n,void 0),n}return this.instanceHub.chemDraw.documentToSVG(e)}catch(t){var o=qe.l.getException(t);if("function"!=typeof e)throw new Error(o?o.message:t);e(void 0,o?o.message:t)}},e.prototype.getImgUrl=function(e){try{return"data:image/png;base64,"+this.instanceHub.chemDraw.documentToPNG(e)}catch(e){throw qe.l.getError(e)}},e.prototype.getCanvasSize=function(){var e=this.instanceHub.chemDraw.cdDoc.getMainPage().curRect;return{width:e.width,height:e.height}},e.prototype.setCanvasSize=function(e,t){var n=e.width,o=e.height,i=Jn.PAGE_PADDING,a=this.instanceHub.chemDraw.cdDoc;if(t&&t.doNotCropDrawings){var s=a.contentBounds;n=Math.max(n,s.right+i),o=Math.max(o,s.bottom+i)}var c=a.getMutableMainPage().getScale(),l=c.curToInternDistance(n),u=c.curToInternDistance(o),d=new r.a.DocumentPosterSize(l,u);a.resize(d),d.delete()},e.prototype.getMolecularWeight=function(e,t,n){this.instanceHub.chemistryService.getMolecularWeight(e,t).then((function(e){n(e,void 0)})).catch((function(e){n(void 0,e)}))},e.prototype.convertToCDXML=function(e,t,n){this.instanceHub.chemistryService.convertToCDXML(e,t).then((function(e){n(e,void 0)})).catch((function(e){n(void 0,e)}))},e.prototype.getDocumentName=function(){return this.instanceHub.chemDraw.cdDoc.name},e.prototype.setDocumentName=function(e){this.instanceHub.chemDraw.cdDoc.name=e},e.prototype.getDocumentSetting=function(e){return this.instanceHub.chemDraw.cdDoc.getSetting(e)},e.prototype.setDocumentSetting=function(e,t){this.instanceHub.chemDraw.cdDoc.setSetting(e,t)},e.prototype.getDocumentZoomLevel=function(){return this.instanceHub.chemDraw.cdDoc.getZoomLevel()},e.prototype.setDocumentZoomLevel=function(e){this.instanceHub.chemDraw.cdDoc.setZoomLevel(e)},e.prototype.getCommandWithName=function(e){return this.instanceHub.chemDraw.getCommandIDForName(e)?this.instanceHub.commandLibrary.getCommandWithName(e):null},e.prototype.getAvailableCommandNames=function(){return this.instanceHub.chemDraw.getAvailableCommandNames()},e.prototype.doLoadDocument=function(e,t){var n=this;!function(e){c=!0;try{e&&e()}finally{c=!1}}((function(){n.instanceHub.chemDraw.newDocument(e,t)}))},e.prototype.addReactionComponent=function(e,t){if("string"!=typeof t)throw new TypeError("The argument is not a string");var n=this.instanceHub.chemDraw,o=n.cdDoc;try{var i=0;switch(e){case"reactant":i=r.a.ReactionAPI.addReactant(o,t);break;case"reagent":i=r.a.ReactionAPI.addReagent(o,t);break;case"product":i=r.a.ReactionAPI.addProduct(o,t)}return n.processChange(),i}catch(e){throw qe.l.getError(e)}},e.prototype.doGetFragmentsInfo=function(e,t){var n,o=this.instanceHub.chemDraw.cdDoc;t=Object.assign({transparentBackground:!0},t);try{switch(e){case"all":n=r.a.FragmentAPI.getAllFragmentsInfo(o,t);break;case"selected":n=r.a.FragmentAPI.getSelectedFragmentsInfo(o,t);break;default:0===(n=r.a.FragmentAPI.getSelectedFragmentsInfo(o,t)).length&&(n=r.a.FragmentAPI.getAllFragmentsInfo(o,t))}}catch(e){throw qe.l.getError(e)}return n.forEach((function(e){var t=e.image;e.image="data:image/png;base64,"+t})),n},e.prototype.setup=function(){return Aa(this,void 0,void 0,(function(){return Ma(this,(function(e){switch(e.label){case 0:return[4,this.loadLicense()];case 1:return e.sent(),[4,this.loadConfiguration()];case 2:return e.sent(),[4,this.instanceHub.chemDrawWebLoader.execute()];case 3:return e.sent(),[4,this.applyConfiguration()];case 4:return e.sent(),[2]}}))}))},e.prototype.applyConfiguration=function(){return Aa(this,void 0,void 0,(function(){return Ma(this,(function(e){switch(e.label){case 0:return[4,this.instanceHub.coreConfigurator.execute()];case 1:return e.sent(),this.configureClipboard(),[2]}}))}))},e.prototype.loadLicense=function(){return Aa(this,void 0,void 0,(function(){var e;return Ma(this,(function(t){switch(t.label){case 0:return(e=this.instanceHub.licenseManager).setLicenseText(this.params.license),e.setLicenseUrl(this.params.licenseUrl),[4,e.validateLicense()];case 1:return t.sent(),[2]}}))}))},e.prototype.loadConfiguration=function(){return Aa(this,void 0,void 0,(function(){var e,t,n,o;return Ma(this,(function(r){switch(r.label){case 0:if(e=this.instanceHub.configurationManager,t=this.params.config,!this.params.configUrl)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,se.getWithCache(this.params.configUrl)];case 2:return n=r.sent(),t=JSON.parse(n),[3,4];case 3:throw o=r.sent(),new Error("Failed to get configuration file from "+this.params.configUrl+". Reason: "+o.statusText+".");case 4:try{e.updateConfig(t)}catch(e){throw new Error("Failed to parse configuration file. Reason: "+e.message+".")}return[2]}}))}))},e.prototype.configureClipboard=function(){var e=this.instanceHub;Se.registerClipboardStorageChangedListener(e),e.clipboardManager.checkPermissions()},e.prototype.updateUIFromConfiguration=function(){var e=this.instanceHub;e.chemDraw.initToolbar(e.configurationManager.getConfig(),e.toolLibrary),e.chemDrawWebLoader.getChemDrawComponent().chemDrawPanel.configureWorkspace(),e.chemDraw.processChange()},e}();function ka(e){var t={};return e.id&&(t.ID=e.id),e.name&&(t.Name=e.name),e.formula&&(t.Formula=e.formula),e.molecularWeight&&(t.MW=e.molecularWeight),e.exactMass&&(t.EM=e.exactMass),e.inChI&&(t.INCHI=e.inChI),e.smiles&&(t.SMILES=e.smiles),t}var La=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ia=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ra=function(){function e(e){this.g=new _a(e),this.api2=Object.freeze({drawing:this.g.drawing,selection:this.g.selection})}return e.prototype.attach=function(e,t,n){this.g.attach(e,t,n)},e.prototype.dispose=function(){this.g&&(this.g.dispose(),this.g=null)},e.prototype.clear=function(){this.g.clear()},e.prototype.loadCDXML=function(e){this.g.loadCDXML(e)},e.prototype.loadMOL=function(e,t){this.g.loadMOL(e,t)},e.prototype.loadSMILES=function(e,t){this.g.loadSMILES(e,t)},e.prototype.loadB64CDX=function(e,t){this.g.loadB64CDX(e,t)},e.prototype.getCDXML=function(){return this.g.getCDXML()},e.prototype.getB64CDX=function(){return this.g.getB64CDX()},e.prototype.loadConfig=function(e){this.g.loadConfig(e)},e.prototype.loadConfigFromUrl=function(e,t){this.g.loadConfigFromUrl(e,t)},e.prototype.getVersion=function(){return this.g.getVersion()},e.prototype.setViewOnly=function(e){this.g.setViewOnly(e)},e.prototype.fitToContainer=function(){this.g.fitToContainer()},e.prototype.zoomToContainer=function(e){this.g.zoomToContainer(e)},e.prototype.shrinkToFit=function(){this.g.shrinkToFit()},e.prototype.getErrors=function(){return this.g.getErrors()},e.prototype.isBlankStructure=function(){return this.g.isBlankStructure()},e.prototype.getProperties=function(e){this.g.getProperties(e)},e.prototype.findReactions=function(e){this.g.findReactions(e)},e.prototype.addReactant=function(e){return this.g.addReactant(e)},e.prototype.addReagent=function(e){return this.g.addReagent(e)},e.prototype.addProduct=function(e){return this.g.addProduct(e)},e.prototype.setContentChangedHandler=function(e){this.g.setContentChangedHandler(e)},e.prototype.isSaved=function(){return this.g.isSaved()},e.prototype.markAsSaved=function(){this.g.markAsSaved()},e.prototype.labelFragments=function(e){this.g.labelFragments(e)},e.prototype.getFragmentsInfo=function(){return this.g.getFragmentsInfo()},e.prototype.getAllFragmentsInfo=function(){return this.g.getAllFragmentsInfo()},e.prototype.getSelectedFragmentsInfo=function(){return this.g.getSelectedFragmentsInfo()},e.prototype.nameToStructure=function(e,t){this.g.nameToStructure(e,t)},e.prototype.structureToName=function(e,t){this.g.structureToName(e,t)},e.prototype.getMOL=function(e){this.g.getMOL(e)},e.prototype.getMOLV3000=function(e){this.g.getMOLV3000(e)},e.prototype.getSMILES=function(e){this.g.getSMILES(e)},e.prototype.getInChI=function(e){this.g.getInChI(e)},e.prototype.getInChIKey=function(e){this.g.getInChIKey(e)},e.prototype.getRXN=function(e){this.g.getRXN(e)},e.prototype.getRXNV3000=function(e){this.g.getRXNV3000(e)},e.prototype.getImgUrl=function(e){return this.g.getImgUrl(e)},e.prototype.getSVG=function(e,t){return this.g.getSVG(e,t)},e.prototype.getCanvasSize=function(){return this.g.getCanvasSize()},e.prototype.setCanvasSize=function(e,t){this.g.setCanvasSize(e,t)},e.prototype.getMolecularWeight=function(e,t,n){this.g.getMolecularWeight(e,t,n)},e.prototype.convertToCDXML=function(e,t,n){this.g.convertToCDXML(e,t,n)},e.prototype.getDocumentName=function(){return this.g.getDocumentName()},e.prototype.setDocumentName=function(e){this.g.setDocumentName(e)},e.prototype.getDocumentSetting=function(e){return this.g.getDocumentSetting(e)},e.prototype.setDocumentSetting=function(e,t){this.g.setDocumentSetting(e,t)},e.prototype.getDocumentZoomLevel=function(){return this.g.getDocumentZoomLevel()},e.prototype.setDocumentZoomLevel=function(e){this.g.setDocumentZoomLevel(e)},Object.defineProperty(e.prototype,"selection",{get:function(){return this.g.cddSelection},enumerable:!1,configurable:!0}),e.prototype.getCommandWithName=function(e){return this.g.getCommandWithName(e)},e.prototype.getAvailableCommandNames=function(){return this.g.getAvailableCommandNames()},La([sn('Use async "api2.drawing.clear()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",void 0)],e.prototype,"clear",null),La([sn('Use async "api2.drawing.setCDXML(cdxml)" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[String]),Ia("design:returntype",void 0)],e.prototype,"loadCDXML",null),La([sn('Use async "api2.drawing.setMOL(mol)" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[String,Function]),Ia("design:returntype",void 0)],e.prototype,"loadMOL",null),La([sn('Use async "api2.drawing.setSMILES(smiles)" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[String,Function]),Ia("design:returntype",void 0)],e.prototype,"loadSMILES",null),La([sn('Use async "api2.drawing.setBase64CDX()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[String,Function]),Ia("design:returntype",void 0)],e.prototype,"loadB64CDX",null),La([sn('Use async "api2.drawing.getCDXML()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",String)],e.prototype,"getCDXML",null),La([sn('Use async "api2.drawing.getBase64CDX()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",String)],e.prototype,"getB64CDX",null),La([sn('Use async "api2.drawing.getChemicalErrors()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",Array)],e.prototype,"getErrors",null),La([sn('Use async "api2.drawing.isEmpty()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",Boolean)],e.prototype,"isBlankStructure",null),La([sn('Use async "api2.drawing.getProperties()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"getProperties",null),La([sn('Use async "api2.drawing.findReactions()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"findReactions",null),La([sn('Use async "api2.drawing.addReactant()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[String]),Ia("design:returntype",Number)],e.prototype,"addReactant",null),La([sn('Use async "api2.drawing.addReagent()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[String]),Ia("design:returntype",Number)],e.prototype,"addReagent",null),La([sn('Use async "api2.drawing.addProduct()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[String]),Ia("design:returntype",Number)],e.prototype,"addProduct",null),La([sn('Use "api2.drawing.onContentChange" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"setContentChangedHandler",null),La([sn('Use async "api2.drawing.labelFragments()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Array]),Ia("design:returntype",void 0)],e.prototype,"labelFragments",null),La([sn('Use async "api2.drawing.getFragmentsInfo()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",Array)],e.prototype,"getFragmentsInfo",null),La([sn('Use async "api2.drawing.getFragmentsInfo()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",Array)],e.prototype,"getAllFragmentsInfo",null),La([sn('Use async "api2.selection.getFragmentsInfo()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",Array)],e.prototype,"getSelectedFragmentsInfo",null),La([sn('Use async "api2.drawing.getMOLV2000()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"getMOL",null),La([sn('Use async "api2.drawing.getMOLV3000()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"getMOLV3000",null),La([sn('Use async "api2.drawing.getSMILES()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"getSMILES",null),La([sn('Use async "api2.drawing.getInChI()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"getInChI",null),La([sn('Use async "api2.drawing.getInChIKey()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"getInChIKey",null),La([sn('Use async "api2.drawing.getRXNV2000()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"getRXN",null),La([sn('Use async "api2.drawing.getRXNV3000()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Function]),Ia("design:returntype",void 0)],e.prototype,"getRXNV3000",null),La([sn('Use async "api2.drawing.getImageURL()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Object]),Ia("design:returntype",String)],e.prototype,"getImgUrl",null),La([sn('Use async "api2.drawing.getSVG()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[Object,Object]),Ia("design:returntype",Object)],e.prototype,"getSVG",null),La([sn('Use async "api2.drawing.getName()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[]),Ia("design:returntype",String)],e.prototype,"getDocumentName",null),La([sn('Use async "api2.drawing.setName()" instead.'),Ia("design:type",Function),Ia("design:paramtypes",[String]),Ia("design:returntype",void 0)],e.prototype,"setDocumentName",null),e}();function Ha(){return new Promise((function(e){try{r.a.AlertDisplayService.setSharedService(new d),r.a.CursorService.setSharedService(new Xe),r.a.ClipboardServiceWeb.setSharedService(new Ke),r.a.AddChainDialog=nt,r.a.AnalysisErrorDialog=ot,r.a.AtomPropertiesDialog=yt,r.a.BondPropertiesDialog=Et,r.a.BracketPropertiesDialog=kt,r.a.ContractLabelDialog=Ft,r.a.MonomerImportReportDialog=jt,r.a.NameToStructureDialog=Kt,r.a.TextObjectEditor=Xt,r.a.callNameToStructureWebService=a,r.a.callStructureToNameWebService=s}catch(e){var t,n=qe.l.getException(e);throw t=n?"Failed to initialise ChemDraw Core library: "+n.message+" ("+n.errorCode+")":"string"==typeof(null==e?void 0:e.message)?e.message:"An unknown error occurred initializing ChemDraw JS",new Error(t)}var o=setInterval((function(){"loading"!==document.readyState&&(clearInterval(o),e())}),10)}))}(0,o.jQ)({isolateGlobalState:!0})},15469:(e,t,n)=>{n.d(t,{k:()=>u});var o=n(94184),r=n.n(o),i=n(67294),a=n(38460),s=n(89583),c=n(40460),l=n(70730),u=function(e){var t,n=e.mimeData,o=e.mimeType,u=e.className,d=(0,l.Nc)().chemistryService,h=(0,c.Z)((function(){return e=void 0,t=void 0,i=function(){var e;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return[4,d.getSVGFromMIMEData(n,o,{scale:1.5,styleSheet:"acs96"})];case 1:return e=t.sent(),[2,"data:image/svg+xml;base64,"+btoa(e)]}}))},new((r=void 0)||(r=Promise))((function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}));var e,t,r,i}),[n,o]),p=h.value,f=h.error;return t=h.loading?i.createElement(a.Z,{animation:"border",variant:"secondary",role:"status","aria-label":"Loading"}):f?i.createElement(s.gJy,{role:"status","aria-label":f.message}):i.createElement("img",{src:p,alt:"Preview"}),i.createElement("div",{className:r()(u,"cdd-preview",{"cdd-preview-error-status":!!f}),role:"region",title:f?f.message:"","aria-label":"Preview"},t)}},46670:(e,t,n)=>{function o(){var e=document.getElementById("cdd-tooltip-container");return e||((e=document.createElement("div")).className="cdd cdd-tooltip-container",e.id="cdd-tooltip-container",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.pointerEvents="none",document.body.appendChild(e),e)}n.d(t,{m:()=>o})},98517:(e,t,n)=>{n.d(t,{A:()=>o});var o=function(e,t,n,o){this.name=e,this.displayName=t,this.command=n,this.type="button",this.onClick=o}},23789:(e,t,n)=>{n.d(t,{l:()=>r});var o=n(40200),r=function(){function e(){}return e.getException=function(e){try{var t=void 0;return"number"==typeof e?t=o.a.getException(e):e instanceof WebAssembly.Exception&&(t=o.a.getException(o.a.getCppExceptionThrownObjectFromWebAssemblyException(e))),t?{errorCode:t.errorCode,message:t.message}:void 0}catch(e){return}},e.getError=function(t){var n=e.getException(t);return n?new Error(n.message+" ("+n.errorCode+")"):t instanceof Error?t:"string"==typeof t?new Error(t):null!=t&&void 0!==t.message?new Error(t.message):new Error("An unknown error occurred")},e}()},38429:e=>{e.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE CDXML SYSTEM "http://www.cambridgesoft.com/xml/cdxml.dtd" >\n<CDXML\n CreationProgram="ChemDraw Web 2.0.0"\n Name="ACS Document 1996"\n BoundingBox="0 0 0 0"\n WindowPosition="0 0"\n WindowSize="0 0"\n FractionalWidths="yes"\n InterpretChemically="yes"\n ShowAtomQuery="yes"\n ShowAtomStereo="no"\n ShowAtomEnhancedStereo="yes"\n ShowAtomNumber="no"\n ShowResidueID="no"\n ShowBondQuery="yes"\n ShowBondRxn="yes"\n ShowBondStereo="no"\n ShowTerminalCarbonLabels="no"\n ShowNonTerminalCarbonLabels="no"\n HideImplicitHydrogens="no"\n LabelFont="3"\n LabelSize="10"\n LabelFace="96"\n CaptionFont="3"\n CaptionSize="10"\n HashSpacing="2.50"\n MarginWidth="1.60"\n LineWidth="0.60"\n BoldWidth="2"\n BondLength="14.40"\n BondSpacing="18"\n ChainAngle="120"\n LabelJustification="Auto"\n CaptionJustification="Left"\n AminoAcidTermini="HOH"\n ShowSequenceTermini="yes"\n ShowSequenceBonds="yes"\n ResidueWrapCount="40"\n ResidueBlockCount="10"\n ResidueZigZag="yes"\n NumberResidueBlocks="no"\n PrintMargins="36 36 36 36"\n MacPrintInfo="0003000001200120000000000B6608A0FF84FF880BE309180367052703FC0002000001200120000000000B6608A0000100640064000000010001010100000001270F000100010000000000000000000000000002001901900000000000600000000000000000000100000000000000000000000000000000"\n ChemPropName=""\n ChemPropFormula="Chemical Formula: "\n ChemPropExactMass="Exact Mass: "\n ChemPropMolWt="Molecular Weight: "\n ChemPropMOverZ="m/z: "\n ChemPropAnalysis="Elemental Analysis: "\n ChemPropBoilingPt="Boiling Point: "\n ChemPropMeltingPt="Melting Point: "\n ChemPropCritTemp="Critical Temp: "\n ChemPropCritPres="Critical Pres: "\n ChemPropCritVol="Critical Vol: "\n ChemPropGibbs="Gibbs Energy: "\n ChemPropLogP="Log P: "\n ChemPropMR="MR: "\n ChemPropHenry="Henry&apos;s Law: "\n ChemPropEForm="Heat of Form: "\n ChemProptPSA="tPSA: "\n ChemPropCLogP="CLogP: "\n ChemPropCMR="CMR: "\n ChemPropLogS="LogS: "\n ChemPropPKa="pKa: "\n ChemPropID=""\n color="0"\n bgcolor="1"\n RxnAutonumberStart="1"\n RxnAutonumberConditions="no"\n RxnAutonumberStyle="Roman"\n RxnAutonumberFormat="(#)"\n><colortable>\n<color r="1" g="1" b="1"/>\n<color r="0" g="0" b="0"/>\n<color r="1" g="0" b="0"/>\n<color r="1" g="1" b="0"/>\n<color r="0" g="1" b="0"/>\n<color r="0" g="1" b="1"/>\n<color r="0" g="0" b="1"/>\n<color r="1" g="0" b="1"/>\n</colortable><fonttable>\n<font id="3" charset="iso-8859-1" name="Arial"/>\n</fonttable><page\n id="6"\n BoundingBox="0 0 540 719.75"\n HeaderPosition="36"\n FooterPosition="36"\n PrintTrimMarks="yes"\n HeightPages="1"\n WidthPages="1"\n/></CDXML>'},58385:e=>{e.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE CDXML SYSTEM "http://www.cambridgesoft.com/xml/cdxml.dtd" >\n<CDXML\n CreationProgram="ChemDraw Web 2.0.0"\n Name="Document"\n BoundingBox="0 0 0 0"\n WindowPosition="0 0"\n WindowSize="0 0"\n FractionalWidths="yes"\n InterpretChemically="yes"\n ShowAtomQuery="yes"\n ShowAtomStereo="no"\n ShowAtomEnhancedStereo="yes"\n ShowAtomNumber="no"\n ShowResidueID="no"\n ShowBondQuery="yes"\n ShowBondRxn="yes"\n ShowBondStereo="no"\n ShowTerminalCarbonLabels="no"\n ShowNonTerminalCarbonLabels="no"\n HideImplicitHydrogens="no"\n LabelFont="3"\n LabelSize="10"\n LabelFace="96"\n CaptionFont="4"\n CaptionSize="12"\n HashSpacing="2.70"\n MarginWidth="2"\n LineWidth="1"\n BoldWidth="4"\n BondLength="30"\n BondSpacing="12"\n ChainAngle="120"\n LabelJustification="Auto"\n CaptionJustification="Left"\n AminoAcidTermini="HOH"\n ShowSequenceTermini="yes"\n ShowSequenceBonds="yes"\n ResidueWrapCount="40"\n ResidueBlockCount="10"\n ResidueZigZag="yes"\n NumberResidueBlocks="no"\n PrintMargins="36 36 36 36"\n MacPrintInfo="000300000258025800000000190D1357FFA9FFB21971139E0367052803FC000200000258025800000000190D1357000100640064000000010001010100000001270F000100010000000000000000000000000002001901900000000000600000000000000000000100000000000000000000000000000000"\n ChemPropName=""\n ChemPropFormula="Chemical Formula: "\n ChemPropExactMass="Exact Mass: "\n ChemPropMolWt="Molecular Weight: "\n ChemPropMOverZ="m/z: "\n ChemPropAnalysis="Elemental Analysis: "\n ChemPropBoilingPt="Boiling Point: "\n ChemPropMeltingPt="Melting Point: "\n ChemPropCritTemp="Critical Temp: "\n ChemPropCritPres="Critical Pres: "\n ChemPropCritVol="Critical Vol: "\n ChemPropGibbs="Gibbs Energy: "\n ChemPropLogP="Log P: "\n ChemPropMR="MR: "\n ChemPropHenry="Henry&apos;s Law: "\n ChemPropEForm="Heat of Form: "\n ChemProptPSA="tPSA: "\n ChemPropCLogP="CLogP: "\n ChemPropCMR="CMR: "\n ChemPropLogS="LogS: "\n ChemPropPKa="pKa: "\n ChemPropID=""\n color="0"\n bgcolor="1"\n RxnAutonumberStart="1"\n RxnAutonumberConditions="no"\n RxnAutonumberStyle="Roman"\n RxnAutonumberFormat="(#)"\n><colortable>\n<color r="1" g="1" b="1"/>\n<color r="0" g="0" b="0"/>\n<color r="1" g="0" b="0"/>\n<color r="1" g="1" b="0"/>\n<color r="0" g="1" b="0"/>\n<color r="0" g="1" b="1"/>\n<color r="0" g="0" b="1"/>\n<color r="1" g="0" b="1"/>\n</colortable><fonttable>\n<font id="3" charset="iso-8859-1" name="Arial"/>\n<font id="4" charset="iso-8859-1" name="Times New Roman"/>\n</fonttable><page\n id="3"\n BoundingBox="0 0 540 720"\n HeaderPosition="36"\n FooterPosition="36"\n PrintTrimMarks="yes"\n HeightPages="1"\n WidthPages="1"\n/></CDXML>'},45493:e=>{e.exports='<?xml version="1.0" encoding="UTF-8" ?>\r\n<!DOCTYPE CDXML SYSTEM "http://www.cambridgesoft.com/xml/cdxml.dtd" >\r\n<CDXML\r\n CreationProgram="ChemDraw 22.0.999.2992"\r\n Name="Sequence Graphic Monomers.cdxml"\r\n BoundingBox="0 0 0 0"\r\n WindowPosition="0 0"\r\n WindowSize="-2147483648 -1073741824"\r\n WindowIsZoomed="yes"\r\n FractionalWidths="yes"\r\n InterpretChemically="yes"\r\n ShowAtomQuery="yes"\r\n ShowAtomStereo="no"\r\n ShowAtomEnhancedStereo="yes"\r\n ShowAtomNumber="no"\r\n ShowResidueID="no"\r\n ShowBondQuery="yes"\r\n ShowBondRxn="yes"\r\n ShowBondStereo="no"\r\n ShowTerminalCarbonLabels="no"\r\n ShowNonTerminalCarbonLabels="no"\r\n HideImplicitHydrogens="no"\r\n LabelFont="3"\r\n LabelSize="10"\r\n LabelFace="96"\r\n CaptionFont="3"\r\n CaptionSize="10"\r\n HashSpacing="2.50"\r\n MarginWidth="1.60"\r\n LineWidth="0.60"\r\n BoldWidth="2"\r\n BondLength="14.40"\r\n BondSpacing="18"\r\n ChainAngle="120"\r\n LabelJustification="Auto"\r\n CaptionJustification="Left"\r\n AminoAcidTermini="HOH"\r\n ShowSequenceTermini="yes"\r\n ShowSequenceBonds="yes"\r\n ShowSequenceUnlinkedBranches="no"\r\n ResidueWrapCount="40"\r\n ResidueBlockCount="10"\r\n PrintMargins="36 36 36 36"\r\n MacPrintInfo="0003000001200120000000000B6608A0FF84FF880BE309180367052703FC0002000001200120000000000B6608A0000100000064000000010001010100000001270F000100010000000000000000000000000002001901900000000000600000000000000000000100000000000000000000000000000000"\r\n ChemPropName=""\r\n ChemPropFormula="Chemical Formula: "\r\n ChemPropExactMass="Exact Mass: "\r\n ChemPropMolWt="Molecular Weight: "\r\n ChemPropMOverZ="m/z: "\r\n ChemPropAnalysis="Elemental Analysis: "\r\n ChemPropBoilingPt="Boiling Point: "\r\n ChemPropMeltingPt="Melting Point: "\r\n ChemPropCritTemp="Critical Temp: "\r\n ChemPropCritPres="Critical Pres: "\r\n ChemPropCritVol="Critical Vol: "\r\n ChemPropGibbs="Gibbs Energy: "\r\n ChemPropLogP="Log P: "\r\n ChemPropMR="MR: "\r\n ChemPropHenry="Henry&apos;s Law: "\r\n ChemPropEForm="Heat of Form: "\r\n ChemProptPSA="tPSA: "\r\n ChemPropCLogP="CLogP: "\r\n ChemPropCMR="CMR: "\r\n ChemPropLogS="LogS: "\r\n ChemPropPKa="pKa: "\r\n ChemPropID=""\r\n ChemPropFragmentLabel=""\r\n color="0"\r\n bgcolor="1"\r\n RxnAutonumberStart="1"\r\n RxnAutonumberConditions="no"\r\n RxnAutonumberStyle="Roman"\r\n RxnAutonumberFormat="(#)"\r\n MonomerRenderingStyle="graphic"\r\n><colortable>\r\n<color r="1" g="1" b="1"/>\r\n<color r="0" g="0" b="0"/>\r\n<color r="1" g="0" b="0"/>\r\n<color r="1" g="1" b="0"/>\r\n<color r="0" g="1" b="0"/>\r\n<color r="0" g="1" b="1"/>\r\n<color r="0" g="0" b="1"/>\r\n<color r="1" g="0" b="1"/>\r\n</colortable><fonttable>\r\n<font id="3" charset="iso-8859-1" name="Arial"/>\r\n</fonttable><page\r\n id="6"\r\n BoundingBox="0 0 540 719.75"\r\n HeaderPosition="36"\r\n FooterPosition="36"\r\n PrintTrimMarks="yes"\r\n HeightPages="1"\r\n WidthPages="1"\r\n/></CDXML>'}}]);